(this.webpackJsonprent=this.webpackJsonprent||[]).push([[0],{184:function(e,t,a){},261:function(e,t,a){e.exports=a(453)},266:function(e,t,a){},270:function(e,t,a){},273:function(e,t){},275:function(e,t){},317:function(e,t){},318:function(e,t){},453:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(94),c=a.n(r),o=(a(266),a(16)),i=a(38),s=a(19),m=a(31),u=a.n(m),d=a(47),f=a(243),b=a(260),E=a(258),h=a(52),y=a.n(h),p=(a(267),{apiKey:"AIzaSyBFDTNmvOzGvYgIXwmOJbR8NYTmYd9kGdk",authDomain:"landlord-b68c5.firebaseapp.com",databaseURL:"https://landlord-b68c5.firebaseio.com",projectId:"landlord-b68c5",storageBucket:"landlord-b68c5.appspot.com",messagingSenderId:"18825199721",appId:"1:18825199721:web:da5322c747c82034c322f8",measurementId:"G-XXJHCZ4G3Q"}),g=a(9),v=a.n(g),k=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).refreshCache=function(e,t){var a="/";n.data&&(e&&(a+=e),t&&(a+="/"+t)),y.a.database().ref(a).on("value",function(){var a=Object(d.a)(u.a.mark((function a(l){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n.data||!e){a.next=12;break}if(!t){a.next=7;break}return a.next=4,l.val();case 4:n.data[e][t]=a.sent,a.next=10;break;case 7:return a.next=9,l.val();case 9:n.data[e]=a.sent;case 10:a.next=15;break;case 12:return a.next=14,l.val();case 14:n.data=a.sent;case 15:return localStorage.setItem("rent-db",JSON.stringify(n.data)),a.abrupt("return",new Promise((function(e,t){setTimeout((function(){n.data&&e(n.data)}),200)})));case 17:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},n.get=function(){if(!n.data){var e=localStorage.getItem("rent-db");if(e)n.data=JSON.parse(e);else y.a.database().ref("/").on("value",function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.val();case 2:return n.data=e.sent,localStorage.setItem("rent-db",JSON.stringify(n.data)),e.abrupt("return",new Promise((function(e,t){setTimeout((function(){n.data&&e(n.data)}),200)})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},n.persons=function(e){n.data||n.get();var t=[];return Object.keys(n.data).forEach((function(a,l){e?a.split("_")[0]===e&&t.push(n.data[a]):t.push(n.data[a])})),t},n.profiles=function(e){n.data||n.get();var t=[];return Object.keys(n.data).forEach((function(a,l){e?a.split("_")[0]===e&&t.push(n.data[a].profile):t.push(n.data[a].profile)})),t},n.parseId=function(e){n.data||n.get();var t=e.split("_");if(e)return t.length?{building:t[0],floor:parseInt(t[1]),door:parseInt(t[2])}:void 0},n.updateUser=function(e,t,a){e&&a&&(Array.isArray(a)?y.a.database().ref(e+"/"+t).set(a,(function(t){return new Promise((function(a,l){t&&l(t),a(n.refreshCache(e))}))})):y.a.database().ref(e+"/"+t).once("value").then((function(l){l.val()?y.a.database().ref(e+"/"+t).update(a,(function(t){return new Promise((function(a,l){t&&l(t),a(n.refreshCache(e))}))})):y.a.database().ref(e+"/"+t).set(a,(function(t){return new Promise((function(a,l){t&&l(t),a(n.refreshCache(e))}))}))})))},n.getExpectedRent=function(e,t){for(var a=[],l=v()(e.startdate);l.isSameOrBefore(v()().add(1,"M"))&&!l.isAfter(v()());l.add(1,"M").startOf("month")){var r=Math.floor(a.length/11),c={housing:Math.floor(e.base_rent*Math.pow(1.05,r)),others:0};e.invoices&&(c.others+=n.getInvoiceSum(e,l.month()-1));if(a.length+1===t)return c;a.push(c)}return a},n.getDues=function(e,t,a,l){var r=n.getExpectedRent(e),c=[{housing:0,others:0}];e.payment_history&&(c=Object(s.a)(e.payment_history));for(var o={housing:0,others:0};c.length!==r.length;)c.push({housing:0,others:0});var i={housing:0,others:0};return c.forEach((function(e,t){var a={housing:r[t].housing-e.housing,others:r[t].others-e.others};o.housing+=a.housing,o.others+=a.others,t===l&&(i=a)})),l&&(o=i),t?a?0===o.housing&&0===o.others:0===o.housing:a?o:o.housing},n.getPaidRent=function(e,t){var a=n.getExpectedRent(e),l=[{housing:0,others:0}];for(e.payment_history&&(l=Object(s.a)(e.payment_history));l.length!==a.length;)l.push({housing:0,others:0});return t?l[t]||{housing:0,others:0}:l},n.getLess=function(e,t){var a=0,l=[];return n.getExpectedRent(e).forEach((function(t,r){var c=n.getDues(e,!1,!0,r+1);l.push({month:r+1,amount:c.housing+c.others,reason:"Rent ".concat(c.others>0?"& Utilities ":"","- ").concat(v()(e.startdate).add(r+1,"M").format("MMM YY"))}),a+=c.housing+c.others})),t?a:l},n.addUser=function(e,t){if(console.log(n.data),console.log(e),n.data||n.get(),!n.data[e])return!1;y.a.database().ref("/"+e).set(t,(function(t){return new Promise((function(a,l){t&&l(t),a(n.refreshCache(e))}))}))},n.getNickname=function(e){return e?e.nickname?e.nickname:e.name.split(" ")[0]:"undefined"},n.deleteUser=function(e,t){if(!Object.keys(n.data).find(e))return!0;y.a.database().ref(e).remove().catch((function(e){return console.log(e),!1}))},n.addPay=function(e,t,a){var l=e.payment_history||[];return t>l.length?l.push(a):l[t-1]=a,n.updateUser(e.id,"payment_history",l)},n.getNextRenewal=function(e){var t=e.renewals;return v()(void 0!==t&&t.length>0?t[t.length-1]:e.startdate,"YYYY-MM-DD",!0).add(11,"M")},n.getBuildings=function(){n.data||n.get();var e=[];return Object.keys(n.data).forEach((function(t,a){e.push(n.parseId(t).building)})),Object(s.a)(new Set(e))},n.getFloors=function(e){n.data||n.get();var t=[];return Object.keys(n.data).forEach((function(a,l){n.parseId(a).building===e&&t.push(n.parseId(a).floor)})),Object(s.a)(new Set(t)).reverse()},n.getDoors=function(e,t){n.data||n.get();var a=[];return Object.keys(n.data).forEach((function(l,r){n.parseId(l).building===e&&n.parseId(l).floor===parseInt(t)&&a.push(n.parseId(l).door)})),Object(s.a)(new Set(a))},n.generateInvoiceId=function(e){var t=n.parseId(e.id),a="I-".concat(t.building.padStart(2,"0")).concat(t.floor).concat(t.door,"-").concat(e.profile.mobile.slice(-4),"-").concat(v()().format("YYYYMMDD"),"-");if(e.invoices){var l=function(){var t=e.invoices.filter((function(e){return e.date===v()().format("YYYY-MM-DD")})),n=0,l="";do{l=(++n).toString().padStart(2,"0")}while(t.find((function(e){return e.id===a+l})));return{v:a+l}}();if("object"===typeof l)return l.v}return a+"01"},n.addInvoice=function(e,t){var a=e.invoices||[];return a.push(t),n.updateUser(e.id,"invoices",a)},n.getInvoiceSum=function(e,t){var a=e.invoices||[],n=0;return a.forEach((function(e){t?t===v()(e.billing_end,"YYYY-MM").month()+1&&(n+=e.sum||0):n+=e.sum||0})),n},y.a.apps.length||(y.a.initializeApp(p),n.get()),n}return a}(l.a.Component),M=(a(184),a(22)),Y=(a(270),function(e){return l.a.createElement("div",{className:"circle-container",style:e.style,onClick:e.onClick},l.a.createElement("div",{className:e.small?"circle-sm":"circle",style:e.condition?{backgroundColor:e.color[0]}:{backgroundColor:e.color[1]}},l.a.createElement("center",null,l.a.createElement("b",{className:"fas"},e.condition?e.icon[0]:e.icon[1]))),e.title?l.a.createElement("p",{style:e.titleStyle||{}},e.title):null)}),N=function(e){return l.a.createElement("div",{className:"circle-container",style:e.style,onClick:e.onClick},l.a.createElement("div",{className:e.small?"circle-sm":"circle",style:{backgroundColor:e.invert?"white":e.color||"darkgrey"}},l.a.createElement("center",null,l.a.createElement("b",{className:"fas",style:{color:e.invert?e.color:"white"}},e.icon))),l.a.createElement("br",null),e.title?l.a.createElement("p",{style:e.titleStyle||{}},e.title):null)},w=function(e){return l.a.createElement("div",{style:{overflow:"scroll",height:"100%"}},l.a.createElement("div",{className:"vertical-timeline",content:"\uf067",style:{height:"".concat(17*e.content.length,"%")}},e.content.map((function(e,t){return l.a.createElement("div",{key:t,className:"vertical-timeline-container"},l.a.createElement("div",{className:"content"},l.a.createElement("h5",null,e.title),l.a.createElement("div",{style:{marginBottom:"5%"}},e.subtitle)))}))))},j=function(e){return l.a.createElement("div",{className:"horizontal-timeline"},e.content.map((function(e,t){return l.a.createElement("div",{key:t,className:"horizontal-timeline-container",onClick:e.onClick,style:{cursor:e.onClick?"pointer":"default"}},l.a.createElement("div",{className:"content"},l.a.createElement("h5",null,e.title),l.a.createElement("p",null,e.subtitle)))})))},O=function(e){return l.a.createElement("div",{className:"horizontal-timeline",content:"\uf067"},e.content.map((function(t,a){return l.a.createElement("div",{key:a,className:"horizontal-timeline-container"},l.a.createElement("div",{className:"content"},l.a.createElement("h5",null,t.title),l.a.createElement("p",null,t.subtitle),l.a.createElement(Y,{small:!0,color:e.color,icon:e.icon,style:{position:"relative",top:-70,zIndex:1},condition:e.conditionArray[a]})))})))},S=function(e){return l.a.createElement("div",{style:{overflow:"scroll",height:"100%"}},l.a.createElement("div",{className:"vertical-timeline",content:"\uf067",style:{height:"".concat(17*e.content.length,"%")}},e.content.map((function(t,a){return l.a.createElement("div",{key:a,className:"vertical-timeline-container"},l.a.createElement("div",{className:"content",style:{color:"white",width:"130%"}},l.a.createElement("h5",null,t.title),l.a.createElement("div",{style:{marginBottom:"5%"}},t.subtitle),l.a.createElement(Y,{small:!0,color:e.color,icon:e.icon,style:{position:"absolute",top:-78,zIndex:1,marginLeft:"88%"},condition:e.conditionArray[a-1]||!1})))}))))},x=function(e){return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"overlay",onClick:e.bgClick,style:{opacity:!0===e.visible?1:0,display:!0===e.visible?"block":"none"}}),l.a.createElement("div",{className:"sliding-overlay-container",style:{bottom:"".concat(-e.height+e.height*(!0===e.visible?1:0),"%"),height:"".concat(e.height,"%")}},e.children))},C=function(e){return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"overlay",onClick:e.bgClick,style:{opacity:!0===e.visible?1:0,display:!0===e.visible?"block":"none"}}),l.a.createElement("center",null,l.a.createElement("div",{className:"overlay-container",style:{display:!0===e.visible?"block":"none",height:"".concat(e.height,"%"),top:"".concat((100-e.height)/2,"%")}},e.children)))},P=a(259),R=a(72),I=a(4),_=new k,z=["","One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine ","Ten ","Eleven ","Twelve ","Thirteen ","Fourteen ","Fifteen ","Sixteen ","Seventeen ","Eighteen ","Nineteen "],T=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],D=function(e){if((e=e.toString()).length>9)return"overflow";var t=("000000000"+e).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);if(t){var a="";return a+=0!==Number(t[3])?(z[Number(t[3])]||T[t[3][0]]+" "+z[t[3][1]])+"Thousand ":"",a+=0!==Number(t[4])?(z[Number(t[4])]||T[t[4][0]]+" "+z[t[4][1]])+"Hundred ":"",a+=0!==Number(t[5])?(""!==a?"and ":"")+(z[Number(t[5])]||T[t[5][0]]+" "+z[t[5][1]])+"only. ":""}},B=I.d.create({page:{padding:"5%"},small:{color:"darkgrey",fontSize:10},id:{position:"absolute",top:"3%",right:"4%"},h1:{fontSize:30,fontWeight:"bold"},table:{display:"table",width:"auto",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0},tr:{margin:"auto",flexDirection:"row"},tcol:{width:"20%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tcell:{margin:"auto",marginTop:5,fontSize:10},total:{fontSize:14,fontWeight:"bold",textAlign:"right"},footer:{textAlign:"center",fontSize:8},sign:{fontSize:10,width:"100%",flexDirection:"row"}});function F(e){if(!e.invoice||!e.person)return null;var t=e.invoice,a=e.person,n=_.parseId(a.id),r="86"===n.building?"BTM 4th Stage, 2nd Block,\nVijaya Bank Layout":"Vinayaka Nagar,\nNyanapanhalli",c=t.prodata.isProdata?t.prodata.days/t.prodata.maxDays:1,o=Math.round(t.sum*c,0),i=function(e){var a=1;return e.isPerHead&&(a*=t.head_count),e.isPerMonth&&(a*=t.months),a};return l.a.createElement(I.a,null,l.a.createElement(I.c,{size:"A4",style:B.page},l.a.createElement(I.e,{style:[B.small,B.id]},t.id),l.a.createElement(I.e,{style:B.h1},t.type.charAt(0).toUpperCase()+t.type.slice(1)," Invoice","\n"),l.a.createElement(I.e,{style:B.small},v()(t.date).format("Do MMMM, YYYY")),l.a.createElement(I.f,{style:B.small},l.a.createElement(I.e,null,"\n\n".concat(a.profile.name,"\n").concat(0===n.floor?"G":n.floor,"0").concat(n.door,", #").concat(n.building,",\n").concat(r,", Bengaluru - 560076\n\n\n")),l.a.createElement(I.e,null,"Billing Period: ".concat(v()(t.billing_start,"YYYY-MM").format("MMMM, YYYY")," to ").concat(v()(t.billing_end,"YYYY-MM").format("MMMM, YYYY"),"\nNo of. heads: ").concat(t.head_count,"\n\n\n"))),l.a.createElement(I.f,{style:B.table},l.a.createElement(I.f,{style:B.tr},l.a.createElement(I.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(I.e,{style:B.tcell},"Sl.")),l.a.createElement(I.f,{style:[B.tcol,{width:"70%"}]},l.a.createElement(I.e,{style:[B.tcell,{justifyContent:"flex-start"}]},"Particulars")),l.a.createElement(I.f,{style:[B.tcol,{width:"10%"}]},l.a.createElement(I.e,{style:B.tcell},"Unit Price (INR)")),l.a.createElement(I.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(I.e,{style:B.tcell},"Qty")),l.a.createElement(I.f,{style:[B.tcol,{width:"10%"}]},l.a.createElement(I.e,{style:B.tcell},"Net Price (INR)"))),t.particulars.map((function(e,a){return l.a.createElement(I.f,{style:B.tr,key:a},l.a.createElement(I.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(I.e,{style:B.tcell},a+1)),l.a.createElement(I.f,{style:[B.tcol,{width:"70%",justifyContent:"flex-start"}]},l.a.createElement(I.e,{style:B.tcell},e.item," ",e.isPerMonth?" ( x ".concat(t.months," months)"):""," ",e.isPerHead?" ( x ".concat(t.head_count," heads)"):"",t.prodata.isProdata?"\n(Calculated as per prodata basis for ".concat(t.prodata.days," days: price*(").concat(t.prodata.days,"/").concat(t.prodata.maxDays,"))"):"")),l.a.createElement(I.f,{style:[B.tcol,{width:"10%"}]},l.a.createElement(I.e,{style:B.tcell},e.amount,"/-")),l.a.createElement(I.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(I.e,{style:B.tcell},i(e))),l.a.createElement(I.f,{style:[B.tcol,{width:"10%"}]},l.a.createElement(I.e,{style:B.tcell},Math.round(e.amount*i(e)*c,0),"/-")))}))),l.a.createElement(I.e,{style:B.total},"\n\n","Net Payable: INR. ",o,"/-"),l.a.createElement(I.e,{style:[B.total,{fontSize:10,position:"relative",top:"-1%"}]},"\n","In Words: Rupees ",D(o)),l.a.createElement(I.f,null,l.a.createElement(I.e,{style:[B.small,B.footer]},"\n\n\n\n\n\n","This is a computer generated invoice and does not require signature while being shared electronically."))))}function L(e){if(!e.person)return null;var t=e.person,a=e.start,n=e.end,r=e.type,c=e.less,o=e.lessTotal,i=t.advance-o,s=_.getExpectedRent(t,t.payment_history.length).housing,m=_.parseId(t.id),u="86"===m.building?"BTM 4th Stage, 2nd Block,\nVijaya Bank Layout":"Vinayaka Nagar,\nNyanapanhalli",d=function(){return Math.round(s*v()(n).date()/v()(n).daysInMonth(),0)};return"settlement"===r&&(c.forEach((function(e){e.reason.includes(v()().format("MMM YY"))&&(i+=s)})),i-=d()+s),l.a.createElement(I.a,null,l.a.createElement(I.c,{size:"A4",style:B.page},l.a.createElement(I.e,{style:B.h1},r.charAt(0).toUpperCase()+r.slice(1)," Invoice","\n"),l.a.createElement(I.e,{style:B.small},v()().format("Do MMMM, YYYY")),l.a.createElement(I.f,{style:B.small},l.a.createElement(I.e,null,"\n\n".concat(t.profile.name,"\n").concat(0===m.floor?"G":m.floor,"0").concat(m.door,", #").concat(m.building,",\n").concat(u,", Bengaluru - 560076\n\n\n")),l.a.createElement(I.e,null,"".concat(r.charAt(0).toUpperCase()+r.slice(1)," Period: ").concat("adjustment"===r?a:v()(t.startdate).format("Do MMMM, YYYY")," to ").concat("adjustment"===r?n:v()(n).format("Do MMMM, YYYY"),"\n\n\n"))),l.a.createElement(I.f,{style:B.table},l.a.createElement(I.f,{style:B.tr},l.a.createElement(I.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(I.e,{style:B.tcell},"Sl.")),l.a.createElement(I.f,{style:[B.tcol,{width:"65%"}]},l.a.createElement(I.e,{style:[B.tcell,{justifyContent:"flex-start"}]},"Particulars")),l.a.createElement(I.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(I.e,{style:B.tcell},"Credit (INR)")),l.a.createElement(I.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(I.e,{style:B.tcell},"Debit (INR)"))),l.a.createElement(I.f,{style:B.tr},l.a.createElement(I.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(I.e,{style:B.tcell},"1")),l.a.createElement(I.f,{style:[B.tcol,{width:"65%",justifyContent:"flex-start"}]},l.a.createElement(I.e,{style:B.tcell},"Security Deposit")),l.a.createElement(I.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(I.e,{style:B.tcell},t.advance,"/-")),l.a.createElement(I.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(I.e,{style:B.tcell}))),c.filter((function(e){return 0!==e.amount&&!e.reason.includes(v()().format("MMM YY"))})).map((function(e,t){return l.a.createElement(I.f,{style:B.tr,key:t},l.a.createElement(I.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(I.e,{style:B.tcell},t+2)),l.a.createElement(I.f,{style:[B.tcol,{width:"65%",justifyContent:"flex-start"}]},l.a.createElement(I.e,{style:B.tcell},"Less: ",e.reason)),l.a.createElement(I.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(I.e,{style:B.tcell})),l.a.createElement(I.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(I.e,{style:B.tcell},e.amount,"/-")))})),"settlement"===r&&l.a.createElement(I.f,{style:B.tr},l.a.createElement(I.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(I.e,{style:B.tcell},c.filter((function(e){return 0!==e.amount})).length+2)),l.a.createElement(I.f,{style:[B.tcol,{width:"65%",justifyContent:"flex-start"}]},l.a.createElement(I.e,{style:B.tcell},"Less: Rent for ",v()(n).format("MMM YYYY"),"\n","(Calculated as per prodata basis for ",v()(n).date()," days: x ",v()(n).date(),"/",v()(n).daysInMonth(),")")),l.a.createElement(I.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(I.e,{style:B.tcell})),l.a.createElement(I.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(I.e,{style:B.tcell},d(),"/-"))),"settlement"===r&&l.a.createElement(I.f,{style:B.tr},l.a.createElement(I.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(I.e,{style:B.tcell},c.filter((function(e){return 0!==e.amount})).length+3)),l.a.createElement(I.f,{style:[B.tcol,{width:"65%",justifyContent:"flex-start"}]},l.a.createElement(I.e,{style:B.tcell},"Less: Painting (One month rent)")),l.a.createElement(I.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(I.e,{style:B.tcell})),l.a.createElement(I.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(I.e,{style:B.tcell},s,"/-")))),l.a.createElement(I.e,{style:B.total},"\n\n","Net ",i>=0?"Receivable":"Payable",": INR. ",i>=0?i:-i,"/-"),l.a.createElement(I.e,{style:[B.total,{fontSize:10,position:"relative",top:"-1%"}]},"\n","In Words: Rupees ",D(i>=0?i:-i)),"settlement"===r&&l.a.createElement(I.f,null,l.a.createElement(I.e,null,"\n\n\n"),l.a.createElement(I.f,{style:[B.sign]},l.a.createElement(I.e,{style:{width:"50%",flexGrow:1,textAlign:"left",paddingLeft:"5%"}},"R. Maqsood"),l.a.createElement(I.e,{style:{width:"50%",flexGrow:1,textAlign:"right",float:"right",paddingRight:"8%"}},t.profile.name))),l.a.createElement(I.f,null,"settlement"!==r&&l.a.createElement(I.e,{style:[B.small,B.footer]},"\n\n\n\n\n\n","This is a computer generated invoice and does not require signature while being shared electronically."))))}var A=new k;var V=function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(),s=Object(o.a)(c,2),m=s[0],u=s[1],d=Object(n.useState)(!1),f=Object(o.a)(d,2),b=f[0],E=f[1],h=Object(n.useState)(),y=Object(o.a)(h,2),p=y[0],g=y[1],k=Object(n.useState)(!1),w=Object(o.a)(k,2),j=w[0],O=w[1],S=Object(R.a)(),_=S.register,z=S.getValues,T=S.handleSubmit,D=Object(n.useState)(0),B=Object(o.a)(D,2),F=B[0],V=B[1],H=Object(n.useState)(!1),G=Object(o.a)(H,2),W=G[0],U=G[1],J=Object(n.useState)(),q=Object(o.a)(J,2),X=q[0],Q=q[1],$=Object(n.useState)(!1),K=Object(o.a)($,2),Z=K[0],ee=K[1];Object(n.useEffect)((function(){A.refreshCache()}),[]);var te=function(){var e=[];return A.data&&A.persons().map((function(t,a){return A.getNextRenewal(t).isBetween(v()().subtract(1,"M"),v()().add(7,"M"),"M")?e.push({i:a,name:t.profile.name,date:A.getNextRenewal(t).format("Do MMMM, YYYY")}):null})),e},ae=function(e){var t=v()().diff(v()(e.startdate).startOf("month"),"months")+1;return void 0!==e.payment_history?{i:t-1,month:v()().subtract(t-e.payment_history.length-1,"M").startOf("month"),amount:A.getExpectedRent(e,t)}:{i:0,month:v()(e.startdate),amount:A.getExpectedRent(e,1)}},ne=function(){var e=0,t=0;return A.persons().forEach((function(a){var n=ae(a),l=A.getPaidRent(a,n.i).housing||0;e+=l,t+=0===l?A.getExpectedRent(a,n.i+1).housing:l})),{current:e,total:t,percent:e/t*100}}(),le=function(){O(!1),V(0)};return a?l.a.createElement(M.a,{push:!0,to:{pathname:a,state:m}}):l.a.createElement("div",null,l.a.createElement(i.a,{bg:"primary",variant:"dark",fixed:"top"},l.a.createElement(i.a.Brand,{className:"mx-auto"},l.a.createElement("h3",null,l.a.createElement("b",null,"Rent")))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf662"),"\xa0\xa0",v()().format("MMMM")),l.a.createElement("div",{className:"container"},A.data&&A.getBuildings().reverse().map((function(e,t){return l.a.createElement(n.Fragment,{key:t},A.persons(e).filter((function(e){return!e.isEmpty})).map((function(e,a){return l.a.createElement(n.Fragment,{key:t+a},l.a.createElement(Y,{title:A.getNickname(e.profile),condition:ae(e).month.isAfter(v()()),onClick:function(){u(e),r("/details")},color:["#07ab0a","darkgrey"],icon:["\uf00c","\uf00d"]}),l.a.createElement("br",{style:a%3===2?{display:"block"}:{display:"none"}}))})),t!==A.getBuildings().length-1?l.a.createElement("hr",{style:{marginTop:"-1%",marginBottom:"6%"}}):null)})))),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf4c0"),"\xa0\xa0Collected")),l.a.createElement("div",{className:"container"},l.a.createElement("center",null,l.a.createElement("br",null),l.a.createElement("h2",null,l.a.createElement("b",{className:"fas",style:{fontSize:26}},"\uf156"),"\xa0\xa0",ne.current),l.a.createElement(P.a,{now:ne.percent,style:{borderRadius:"25px",margin:"5% 0",width:"95%"}}),l.a.createElement("small",{style:{display:"inline-block",width:"40%",color:"darkgrey"}},"out of ",ne.total)),l.a.createElement("br",null)),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf1da"),"\xa0\xa0Upcoming Renewals")),l.a.createElement("div",{className:"container"},A.data&&te().map((function(e,t){return l.a.createElement(n.Fragment,{key:t},l.a.createElement("div",{style:{display:"inline-flex",width:"100%",marginLeft:"2%",cursor:"pointer"}},l.a.createElement("div",{style:{display:"inline-block",width:"20%",marginRight:"8%"}},l.a.createElement(N,{color:"#5e09b8",icon:"\uf007"})),l.a.createElement("div",{style:{display:"inline-block",width:"80%",marginTop:"1.5%"}},l.a.createElement("b",null,e.name),l.a.createElement("br",null),e.date)),t!==te().length-1?l.a.createElement("hr",{style:{marginTop:"-3%"}}):null)}))),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf0c0"),"\xa0\xa0Tennants")),l.a.createElement("div",{className:"container"},A.data&&A.getBuildings().reverse().map((function(e,t){return l.a.createElement(n.Fragment,{key:t},A.getFloors(e).map((function(t,a){return l.a.createElement(n.Fragment,{key:a},l.a.createElement("div",{className:"floor-label-container"},l.a.createElement("center",null,l.a.createElement("b",{className:"floor-label"},0===t?"G":t))),l.a.createElement("div",{className:"floor"},A.getDoors(e,t).map((function(n,c){return A.data["".concat(e,"_").concat(t,"_").concat(n)].isEmpty?l.a.createElement("div",{key:c,onClick:function(){u("".concat(e,"_").concat(t,"_").concat(n)),r("/add-person")},style:{width:"".concat(100/A.getDoors(e,t).length,"%"),backgroundColor:"lightgrey"},className:"door"},l.a.createElement("center",null,l.a.createElement("b",{className:"door-label",style:{color:"#777"}},l.a.createElement("b",{className:"fas"},"\uf52a"),"\xa0",0===t?"G":t,"0",n),l.a.createElement("p",{className:"door-subtitle",style:{color:"#777"}},"Empty"))):l.a.createElement("div",{key:c,onClick:function(){g({building:e,floor:t,door:n}),E(!0)},style:{width:"".concat(100/A.getDoors(e,t).length,"%"),backgroundColor:"hsl(".concat(48-2*(a+c),", ").concat((a+c+1)/A.getDoors(e,t).length*80+15,"%, ").concat((a+c)/A.getDoors(e,t).length*13+74,"%)")},className:"door"},l.a.createElement("center",null,l.a.createElement("b",{className:"door-label"},l.a.createElement("b",{className:"fas"},"\uf52a"),"\xa0",0===t?"G":t,"0",n),l.a.createElement("p",{className:"door-subtitle"},A.getNickname(A.data["".concat(e,"_").concat(t,"_").concat(n)].profile))))}))),l.a.createElement("br",null))})),t!==A.getBuildings().length-1?l.a.createElement("hr",null):null)}))),l.a.createElement("br",null),l.a.createElement("br",null),p&&l.a.createElement(C,{visible:b,bgClick:function(){return E(!b)},height:25},l.a.createElement("h3",null,l.a.createElement("b",null,A.data["".concat(p.building,"_").concat(p.floor,"_").concat(p.door)].profile.name)),"".concat(0===p.floor?"G":p.floor,"0").concat(p.door,", #").concat(p.building),l.a.createElement("br",null),"Since "+v()(A.data["".concat(p.building,"_").concat(p.floor,"_").concat(p.door)].startdate).format("Do MMM, YYYY"),l.a.createElement("br",null),l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#ED0034"},onClick:function(){return U(!0)}},"Vacate")),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf543"),"\xa0\xa0Invoices")),l.a.createElement("div",{className:"container"},l.a.createElement("center",null,l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#006CFF"},onClick:function(){return O(!0)}},"Create New"),l.a.createElement("br",null),l.a.createElement("br",null))),l.a.createElement(x,{visible:j,bgClick:function(){return le()},height:48},l.a.createElement("b",{className:"fas",style:{fontSize:22,float:"right"},onClick:function(){return le()}},"\uf00d"),l.a.createElement("br",null),l.a.createElement("form",{onSubmit:T((function(e){u(e),r("/generate-invoice")}))},l.a.createElement("center",null,l.a.createElement("div",{style:{display:"inline-block",width:"420%",transition:".2s ease",marginLeft:"".concat(-2-104*F,"%"),position:"relative",zIndex:10}},l.a.createElement("div",{style:{display:"inline-block",width:"20%"}},l.a.createElement("h3",null,l.a.createElement("b",null,"Electricity")),l.a.createElement("p",{style:{marginTop:"-2%"}},"Stairs & Pump"),l.a.createElement("br",null),l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"eb",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:850,ref:_,className:"editable-label-input"})),l.a.createElement("div",{style:{display:"inline-block",marginLeft:"5%",width:"20%"}},l.a.createElement("h3",{style:{marginBottom:"-1%"}},l.a.createElement("b",null,"Other Charges")),l.a.createElement("input",{name:"other1-title",style:{display:"inline-block",fontSize:16,fontWeight:"normal"},defaultValue:"Other Expense 1",ref:_,className:"editable-label-input"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"other1-amount",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:0,ref:_,className:"editable-label-input"})),l.a.createElement("div",{style:{display:"inline-block",marginLeft:"5%",width:"20%"}},l.a.createElement("h3",{style:{marginBottom:"-1%"}},l.a.createElement("b",null,"Other Charges")),l.a.createElement("input",{name:"other2-title",style:{display:"inline-block",fontSize:16,fontWeight:"normal"},defaultValue:"Other Expense 2",ref:_,className:"editable-label-input"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"other2-amount",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:0,ref:_,className:"editable-label-input"})),l.a.createElement("div",{style:{display:"inline-block",marginLeft:"5%",width:"20%"}},l.a.createElement("h3",{style:{marginBottom:"-1%"}},l.a.createElement("b",null,"Other Charges")),l.a.createElement("input",{name:"other3-title",style:{display:"inline-block",fontSize:16,fontWeight:"normal"},defaultValue:"Other Expense 3",ref:_,className:"editable-label-input"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"other3-amount",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:0,ref:_,className:"editable-label-input"})))),l.a.createElement("b",{className:"fas",onClick:function(){return V(3===F?0:F+1)},style:{fontSize:22,float:"right",marginRight:"5%",marginTop:"-15%",position:"relative",zIndex:15}},"\uf1b2"),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("button",{className:"overlay-button",style:{marginTop:"5%",color:"#006CFF"},type:"submit"},"Next")))),l.a.createElement(C,{visible:W,bgClick:function(){return U(!W)},height:25},l.a.createElement("h3",null,l.a.createElement("b",null,"Vacating Date")),l.a.createElement("input",{name:"vacate-date",className:"editable-label-input",type:"date",style:{backgroundColor:"white",color:"black",fontSize:16},defaultValue:v()().endOf("month").format("YYYY-MM-DD"),ref:_}),Z?l.a.createElement(I.b,{document:l.a.createElement(L,X),fileName:"".concat(A.data["".concat(p.building,"_").concat(p.floor,"_").concat(p.door)].profile.name," Settlement.pdf"),style:{textDecoration:"none",color:"black"}},(function(e){e.blob,e.url;var t=e.loading;e.error;return t?l.a.createElement(n.Fragment,null):l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#00A4BC"}},"Settlement")})):l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#00A4BC"},onClick:function(){Q({person:A.data["".concat(p.building,"_").concat(p.floor,"_").concat(p.door)],end:z("vacate-date"),type:"settlement",less:A.getLess(A.data["".concat(p.building,"_").concat(p.floor,"_").concat(p.door)]),lessTotal:A.getLess(A.data["".concat(p.building,"_").concat(p.floor,"_").concat(p.door)],!0)}),ee(!0)}},"Settle"),l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#ED0034"},onClick:function(){A.updateUser("".concat(p.building,"_").concat(p.floor,"_").concat(p.door),"",{isEmpty:!0}),A.refreshCache(),r("/")}},"Vacate")),l.a.createElement("br",null),l.a.createElement("br",null))},H=new k;var G=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1],m=Object(n.useState)(!1),u=Object(o.a)(m,2),d=u[0],f=u[1],b=Object(n.useState)(!1),E=Object(o.a)(b,2),h=E[0],y=E[1],p=Object(n.useState)(!1),g=Object(o.a)(p,2),k=g[0],M=g[1],Y=Object(n.useState)(!1),P=Object(o.a)(Y,2),_=P[0],z=P[1],T=Object(n.useState)(!1),D=Object(o.a)(T,2),B=D[0],A=D[1],V=Object(n.useState)([]),G=Object(o.a)(V,2),W=G[0],U=G[1],J=Object(R.a)(),q=J.register,X=J.getValues,Q=J.setValue,$=Object(n.useState)(),K=Object(o.a)($,2),Z=K[0],ee=K[1],te=Object(n.useState)(!1),ae=Object(o.a)(te,2),ne=ae[0],le=ae[1],re=e.location.state,ce=H.parseId(re.id),oe=function(){c(!1),M(!1)},ie=void 0!==re.payment_history?{i:re.payment_history.length,month:v()(re.startdate).add(re.payment_history.length,"M").startOf("month"),amount:H.getExpectedRent(re,re.payment_history.length)}:{i:0,month:v()(re.startdate),amount:H.getExpectedRent(re,1)},se=Object(n.useState)(ie),me=Object(o.a)(se,2),ue=me[0],de=me[1],fe=H.getPaidRent(re),be=H.getLess(re),Ee=H.getLess(re,!0);return l.a.createElement("div",null,l.a.createElement(i.a,{bg:"primary",variant:"dark",fixed:"top"},l.a.createElement(i.a.Brand,{className:"mx-auto"},l.a.createElement("h3",null,l.a.createElement("b",null,"Rent")))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{style:{display:"inline-flex",width:"95%",marginLeft:"2%",cursor:"pointer"}},l.a.createElement("div",{style:{display:"inline-block",width:"20%",marginRight:"8%"}},l.a.createElement(N,{color:"#5e09b8",icon:"\uf007",style:{marginLeft:"50%"}})),l.a.createElement("div",{style:{display:"inline-block",width:"80%",marginTop:"1%",marginLeft:"5%"}},l.a.createElement("h3",{style:{marginBottom:"-2%"}},re.profile.name),l.a.createElement("small",{style:{display:"inline-block",width:"40%",color:"darkgrey"}},"".concat(0===ce.floor?"G":ce.floor,"0").concat(ce.door,", #").concat(ce.building)),l.a.createElement("br",null))),l.a.createElement("div",{className:"container"},l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("b",{className:"fas",style:{display:"inline-block",width:"10%",margin:"-1% 1% 2% 3%",fontSize:"40px",color:"#f03050"}},"\uf073"),l.a.createElement("div",{style:{marginLeft:"5%"}},l.a.createElement("small",{style:{display:"inline-block",width:"40%",color:"darkgrey"}},"Since"),l.a.createElement("h4",{style:{marginTop:"-1%"}},l.a.createElement("b",null,v()(re.startdate).format("Do MMMM, YYYY")))))),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf1da"),"\xa0\xa0Rent History")),l.a.createElement("div",{className:"container",onClick:function(){return f(!0)}},void 0!==re.payment_history?l.a.createElement(O,{content:fe.map((function(e,t){return{title:v()(re.startdate).add(t,"M").format("MMM"),subtitle:e.housing}})).slice(-3),conditionArray:fe.map((function(e){return 0!==e.housing})).slice(-3),color:["#07ab0a","darkgrey"],icon:["\uf00c","\uf00d"]}):null),l.a.createElement(x,{visible:d,height:85,bgClick:function(){return f(!1)}},l.a.createElement("b",{className:"fas",style:{fontSize:20,float:"right"},onClick:function(){return f(!d)}},"\uf00d"),l.a.createElement("br",null),void 0!==re.payment_history?l.a.createElement(S,{content:fe.map((function(e,t){return{title:v()(re.startdate).add(t,"M").format("MMM YY"),subtitle:l.a.createElement("div",null,l.a.createElement("b",{className:"fas"},"\uf015")," ",e.housing,"\xa0\xa0\xa0\xa0",l.a.createElement("b",{className:"fas"},"\uf1b2")," ",e.others)}})),conditionArray:fe.map((function(e){return 0!==e.housing})),color:["#07ab0a","darkgrey"],icon:["\uf00c","\uf00d"]}):null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf3d1"),"\xa0\xa0Returnable Advance")),l.a.createElement("div",{className:"container",onClick:function(){return y(!0)}},l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h2",null,l.a.createElement("b",{className:"fas",style:{fontSize:26}},"\uf156"),l.a.createElement("b",null,"\xa0",re.advance-Ee))),l.a.createElement("br",null),l.a.createElement("div",{style:{color:"darkgrey",fontSize:14}},be.filter((function(e){return 0!==e.amount})).map((function(e,t){return l.a.createElement(n.Fragment,{key:t},l.a.createElement("b",{className:"fas",style:{marginRight:"3%"}},"\uf06a"),e.reason,l.a.createElement("br",null))})).slice(-2).reverse(),l.a.createElement("button",{className:"btn btn-link",style:{margin:"-2% 0 0 -4%"},onClick:function(){return y(!0)}},l.a.createElement("small",null,be.filter((function(e){return 0!==e.amount})).length," more..")))),l.a.createElement("br",null),l.a.createElement(x,{visible:h,height:85,bgClick:function(){return y(!1)}},l.a.createElement("b",{className:"fas",style:{fontSize:20,float:"right"},onClick:function(){return y(!h)}},"\uf00d"),l.a.createElement("br",null),l.a.createElement(w,{content:be.filter((function(e){return 0!==e.amount})).map((function(e){return{title:e.reason,subtitle:-e.amount}}))})),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf251"),"\xa0\xa0Renewals")),l.a.createElement("div",{className:"container"},l.a.createElement(j,{content:[].concat(Object(s.a)(re.renewals||[]),[H.getNextRenewal(re)]).map((function(e){return{title:v()(e).format("MMM"),subtitle:v()(e).format("YYYY")}}))}),l.a.createElement("center",null,l.a.createElement("button",{className:"btn btn-link",onClick:function(){return A(!0)}},"Adjust Advance"))),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf543"),"\xa0\xa0Invoices")),l.a.createElement("div",{className:"container"},void 0!==re.invoices?l.a.createElement(j,{content:re.invoices.map((function(e,t){return{title:v()(e.billing_end,"YYYY-MM").format("MMM"),subtitle:e.sum,onClick:function(){ee({person:re,invoice:e}),le(!0)}}})).slice(-3)}):null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(N,{color:"#006CFF",icon:"\uf067",style:{position:"fixed",bottom:"1%",right:"2%"},onClick:function(){return c(!0)}}),l.a.createElement(x,{visible:r,bgClick:function(){return oe()},height:48},l.a.createElement("b",{className:"fas",style:{fontSize:22,float:"right"},onClick:function(){return oe()}},"\uf00d"),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h3",{style:{marginLeft:"5%"}},l.a.createElement("b",null,k?"Utilities":l.a.createElement("span",{onClick:function(){return U(H.getExpectedRent(re)),void z(!_)}},"Rent ".concat(ue.month.format("MMMM"))))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{style:{display:"inline-block",width:"210%",transition:".2s ease",marginLeft:k?"-115%":"4%",position:"relative",zIndex:10}},l.a.createElement("div",{style:{display:"inline-block",width:"45%"}},l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"housing-payment",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:ue.amount.housing,ref:q,className:"editable-label-input"})),l.a.createElement("div",{style:{display:"inline-block",marginLeft:"10%",width:"45%"}},l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"other-payment",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:ue.amount.others,ref:q,className:"editable-label-input"})))),l.a.createElement("b",{className:"fas",onClick:function(){return M(!k)},style:{fontSize:22,float:"right",marginRight:"5%",marginTop:"-15%",position:"relative",zIndex:15}},"\uf1b2"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("button",{className:"overlay-button",onClick:function(){H.addPay(re,ue.i+1,{housing:parseInt(X("housing-payment")),others:parseInt(X("other-payment"))}),oe()},style:{color:"#006CFF"}},"Save"))),l.a.createElement(C,{visible:_,bgClick:function(){return z(!_)},height:40},l.a.createElement("div",{style:{display:"inline-block",width:"100%",overflow:"scroll"}},W.length>0&&W.map((function(e,t){return l.a.createElement(n.Fragment,{key:t},v()(re.startdate).add(t,"M").startOf("month").isSame(ue.month,"month")?l.a.createElement("button",{className:"overlay-button-mx",key:t,style:{margin:"2% 1%"},onClick:function(){de({i:t,month:v()(re.startdate).add(t,"M").startOf("month"),amount:e}),Q("housing-payment",ue.amount.housing),Q("other-payment",ue.amount.others),z(!1)}},v()(re.startdate).add(t,"M").format("MMM YY")):l.a.createElement("span",{className:"overlay-button-mx-light",key:t,onClick:function(){de({i:t,month:v()(re.startdate).add(t,"M").startOf("month"),amount:e}),Q("housing-payment",ue.amount.housing),Q("other-payment",ue.amount.others),z(!1)}},v()(re.startdate).add(t,"M").format("MMM YY")),t%3===2?l.a.createElement("br",null):null)})))),l.a.createElement(C,{visible:B,bgClick:function(){return A(!B)},height:25},l.a.createElement("div",{style:{display:"inline-block",width:"100%",overflow:"scroll"}},re.renewals?[re.startdate].concat(Object(s.a)(re.renewals)).map((function(e,t){return l.a.createElement(n.Fragment,{key:t},l.a.createElement("button",{className:"overlay-button-mx-light",key:t,onClick:function(){ee({person:re,type:"adjustment",less:be,lessTotal:Ee,start:v()(e).format("MMMM YYYY"),end:t===re.renewals.length?v()().format("MMMM YYYY"):v()(re.renewals[t+1]).format("MMMM YYYY")}),le(!0)}},v()(e).format("MMM YY")," - ",t===re.renewals.length?v()().format("MMM YY"):v()(re.renewals[t+1]).format("MMM YY")),l.a.createElement("br",null))})):l.a.createElement("button",{className:"overlay-button-mx-light",style:{margin:"2% 1%"},onClick:function(){ee({person:re,type:"adjustment",less:be,lessTotal:Ee,start:v()(re.startdate).format("MMMM YYYY"),end:v()().format("MMMM YYYY")}),le(!0)}},v()(re.startdate).format("MMM YY")," - ",v()().format("MMM YY")))),ne&&l.a.createElement(C,{visible:ne,bgClick:function(){return le(!ne)},height:25},l.a.createElement("div",{style:{display:"inline-block",width:"100%",overflow:"scroll"}},l.a.createElement("h3",null,l.a.createElement("b",null,"adjustment"===Z.type?"Adjustment Invoice":"Utilities Invoice")),"adjustment"===Z.type?"".concat(Z.start," - ").concat(Z.end):"".concat(v()(Z.invoice.billing_start,"YYYY-MM").format("MMMM, YYYY")," - ").concat(v()(Z.invoice.billing_end,"YYYY-MM").format("MMMM, YYYY")),l.a.createElement(I.b,{document:"adjustment"===Z.type?l.a.createElement(L,Z):l.a.createElement(F,Z),fileName:"".concat(re.profile.name," ").concat("adjustment"===Z.type?"Adjustment ":"").concat(v()().format("YYYY-MM-DD"),".pdf"),style:{textDecoration:"none",color:"black"}},(function(e){e.blob,e.url;var t=e.loading;e.error;return t?l.a.createElement(n.Fragment,null):l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#00A4BC"}},"Download")})))))},W=a(26),U=new k;var J=function(e){var t=Object(R.a)(),a=t.register,r=t.getValues,c=t.handleSubmit,m=Object(n.useState)(3),u=Object(o.a)(m,2),d=u[0],f=u[1],b=Object(n.useState)(),E=Object(o.a)(b,2),h=E[0],y=E[1],p=Object(n.useState)(!1),g=Object(o.a)(p,2),k=g[0],w=g[1],j=Object(n.useState)(),O=Object(o.a)(j,2),S=O[0],x=O[1],P=Object(n.useState)(),I=Object(o.a)(P,2),_=I[0],z=I[1],T=function(){var e=4;return U.persons().forEach((function(t){e+=t.profile.head_count||0})),e}(),D=function(){var e=1;return U.persons().forEach((function(t){e+=t.profile.isEmpty?0:1})),e}(),B=e.location.state;Object(n.useEffect)((function(){var e=[{title:"Stairs & Pump",value:parseInt(B.eb),fieldname:"eb",icon:"\uf0e7",isShared:!0,isPerHead:!1},{title:"Water +/-",value:0,valueTemplate:"water",fieldname:"water",icon:"\ue005",isPPB:!0,isPerHead:!0,perPersonValue:[]},{title:"Garbage +/-",value:60,fieldname:"garbage",icon:"\uf1f8"}];Array.from(["1","2","3"]).forEach((function(t){"0"!==B["other".concat(t,"-amount")]&&e.push({title:B["other".concat(t,"-title")],value:parseInt(B["other".concat(t,"-amount")]),icon:"\uf1b2",fieldname:"other".concat(t),isShared:!0,isPerHead:!0})})),e.forEach((function(e,t){e.isPerMonth=!1,e.isPPB?U.persons().forEach((function(t){t[e.valueTemplate]&&e.perPersonValue.push({id:t.id,value:e.isPerHead?t[e.valueTemplate]*(t.profile.head_count||0):t[e.valueTemplate]})})):e.isShared&&(e.value/=e.isPerHead?T:D),e.value=Math.round(e.value,0)||0})),y(e)}),[B,T,D]);var F=function(e,t){y((function(a){var n=a[e];return n.isPPB?(n=Object(W.a)(Object(W.a)({},n),{},{value:n.value+t,perPersonValue:n.perPersonValue.map((function(e){return{id:e.id,value:e.value+t}}))}),Array.from([].concat(Object(s.a)(a.slice(0,e)),[n],Object(s.a)(a.slice(e+1))))):(n=n.isShared?n.isPerHead?Object(W.a)(Object(W.a)({},n),{},{value:n.value+t*T}):Object(W.a)(Object(W.a)({},n),{},{value:n.value+t*D}):Object(W.a)(Object(W.a)({},n),{},{value:n.value+t}),Array.from([].concat(Object(s.a)(a.slice(0,e)),[n],Object(s.a)(a.slice(e+1)))))}))};return S?l.a.createElement(M.a,{push:!0,to:{pathname:S,state:_}}):l.a.createElement("div",null,l.a.createElement(i.a,{bg:"primary",variant:"dark",fixed:"top"},l.a.createElement(i.a.Brand,{className:"mx-auto"},l.a.createElement("h3",null,l.a.createElement("b",null,"Rent")))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h3",null,l.a.createElement("b",{className:"fas"},"\uf543"),l.a.createElement("b",null,"\xa0\xa0New Invoice")),l.a.createElement("input",{name:"billing-start",style:{display:"inline-block",fontSize:16,fontWeight:"normal",backgroundColor:"#fafafa",color:"grey"},defaultValue:v()().subtract(3,"M").format("YYYY-MM"),type:"month",ref:a,onChange:function(){return f(v()(r("billing-end"),"YYYY-MM").diff(v()(r("billing-start"),"YYYY-MM"),"months")+1)},className:"editable-label-input"}),l.a.createElement("input",{name:"billing-end",style:{display:"inline-block",fontSize:16,fontWeight:"normal",backgroundColor:"#fafafa",color:"grey"},defaultValue:v()().subtract(1,"M").format("YYYY-MM"),type:"month",ref:a,onChange:function(){return f(v()(r("billing-end")).diff(v()(r("billing-start")),"months")+1)},className:"editable-label-input"})),l.a.createElement("br",null),l.a.createElement("form",{onSubmit:c((function(e){return function(e){var t=[];U.persons().forEach((function(a){var n={date:v()().format("YYYY-MM-DD"),id:U.generateInvoiceId(a),head_count:a.profile.head_count||1,type:"utilities",months:v()(e["billing-end"]).diff(e["billing-start"],"months")+1,billing_start:e["billing-start"],billing_end:e["billing-end"],sum:0,particulars:[]};h.forEach((function(e,t){var l={item:e.title.replace(" +/-",""),isPerHead:e.isPerHead||!1,isPerMonth:e.isPerMonth};if(e.isPPB){var r=e.perPersonValue.find((function(e){return e.id===a.id}))||{value:0};l.amount=r.value}else l.amount=e.value;if(l.isPerHead&&(l.amount/=n.head_count),l.amount=Math.round(l.amount,0),l.amount>0){var c=l.amount;c*=l.isPerHead?n.head_count:1,c*=l.isPerMonth?n.months:1,n.sum+=c,n.particulars.push(l)}}));var l=v()().diff(v()(a.startdate),"days");n.prodata=l<30?{isProdata:!0,days:l,maxDays:v()(a.startdate).daysInMonth()}:{isProdata:!1},U.addInvoice(a,n),t.push({person:a,invoice:n})})),w(!0),z(t),setTimeout((function(){return x("invoice-summary")}),500)}(e)}))},h&&h.map((function(e,t){return l.a.createElement(n.Fragment,{key:t},l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},e.icon),"\xa0\xa0",e.title)),l.a.createElement("div",{className:"container"},l.a.createElement("center",null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("center",null,e.title.includes("+/-")&&l.a.createElement(N,{small:!0,icon:"\uf068",style:{margin:"0 5%",display:"inline-block"},onClick:function(){return F(t,-10)}}),l.a.createElement("input",{name:e.fieldname,style:{display:"inline-block",color:"black",backgroundColor:"white"},type:"number",pattern:"[0-9]*",value:e.value,ref:a,className:"editable-label-input",readOnly:!0}),e.title.includes("+/-")&&l.a.createElement(N,{small:!0,icon:"\uf067",style:{margin:"0 5%",display:"inline-block"},onClick:function(){return F(t,10)}}))),l.a.createElement("small",{style:{display:"inline-block",width:"40%",color:"darkgrey"}},e.isPerHead?"per head":e.isShared?"per house":""),l.a.createElement("br",null),l.a.createElement("br",null),e.isPPB&&l.a.createElement("div",{style:{display:"inline-block",width:"80%"}},e.perPersonValue.map((function(e,t){return l.a.createElement(N,{key:e.id,small:!0,color:"#5e09b8",icon:"\uf007",title:e.value||"0",titleStyle:{color:"darkgrey"},style:{margin:"0 4%"}})})))),e.isShared&&l.a.createElement("div",{style:{display:"inline-flex",width:"40%",margin:"0 2% 3% 0"}},l.a.createElement("div",{style:{display:"inline-block",width:"20%",marginRight:"8%"}},l.a.createElement(Y,{small:!0,condition:e.isPerHead,onClick:function(){return function(e){y((function(t){var a=t[e];return(a=void 0!==a.isPerHead?Object(W.a)(Object(W.a)({},a),{},{isPerHead:!a.isPerHead}):Object(W.a)(Object(W.a)({},a),{},{isPerHead:!0})).isPPB?U.persons().forEach((function(e){e[a.valueTemplate]&&(a=Object(W.a)(Object(W.a)({},a),{},{perPersonValue:[].concat(Object(s.a)(a.perPersonValue),[{id:e.id,value:a.isPerHead?e[a.valueTemplate]*(e.profile.head_count||0):e[a.valueTemplate]}])}))})):a=a.isShared?a.isPerHead?Object(W.a)(Object(W.a)({},a),{},{value:a.value*D/T}):Object(W.a)(Object(W.a)({},a),{},{value:a.value*T/D}):Object(W.a)(Object(W.a)({},a),{},{value:0}),a=Object(W.a)(Object(W.a)({},a),{},{value:Math.round(a.value,0)}),Array.from([].concat(Object(s.a)(t.slice(0,e)),[a],Object(s.a)(t.slice(e+1))))}))}(t)},color:["#006CFF","#c20808"],icon:["\uf0c0","\ue065"]})),l.a.createElement("div",{style:{display:"inline-block",width:"80%",marginTop:"1%"}},l.a.createElement("small",{style:{display:"inline-block",color:"darkgrey"}},e.isPerHead?"Split Per Head":"Per House"),l.a.createElement("br",null))),d>1&&l.a.createElement("div",{style:{display:"inline-flex",width:"40%",margin:"0 2% 3% 0"}},l.a.createElement("div",{style:{display:"inline-block",width:"20%",marginRight:"8%"}},l.a.createElement(Y,{small:!0,condition:e.isPerMonth,onClick:function(){return function(e){y((function(t){var a=t[e];return a=void 0!==a.isPerMonth?Object(W.a)(Object(W.a)({},a),{},{isPerMonth:!a.isPerMonth}):Object(W.a)(Object(W.a)({},a),{},{isPerMonth:!0}),Array.from([].concat(Object(s.a)(t.slice(0,e)),[a],Object(s.a)(t.slice(e+1))))}))}(t)},color:["#de3ea1","#4bbde3"],icon:["\uf073","\uf133"]})),l.a.createElement("div",{style:{display:"inline-block",width:"80%",marginTop:"1%"}},l.a.createElement("small",{style:{display:"inline-block",color:"darkgrey"}},e.isPerMonth?"Per Month":"For ".concat(d," Months")),l.a.createElement("br",null)))),l.a.createElement("br",null),l.a.createElement("br",null))})),l.a.createElement("center",null,l.a.createElement("button",{type:"submit",className:"overlay-button",style:{backgroundColor:"#006CFF",color:"white",width:"90%"}},"Create"))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(C,{style:{transition:".3s ease"},visible:k,height:25},l.a.createElement("center",null,l.a.createElement("div",{className:"fas",style:{color:"#07ab0a",fontSize:90,marginTop:"5%"}},"\uf00c"))))};var q=function(e){var t=Object(n.useState)(),a=Object(o.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(),m=Object(o.a)(s,2),u=m[0],d=m[1],f=e.location.state||[];return r?l.a.createElement(M.a,{push:!0,to:{pathname:r,state:u}}):l.a.createElement("div",null,l.a.createElement(i.a,{bg:"primary",variant:"dark",fixed:"top"},l.a.createElement(i.a.Brand,{className:"mx-auto"},l.a.createElement("h3",null,l.a.createElement("b",null,"Rent")))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h3",null,l.a.createElement("b",{className:"fas"},"\uf543"),l.a.createElement("b",null,"\xa0\xa0Summary")),l.a.createElement("small",{style:{display:"inline-block",color:"darkgrey"}},"".concat(v()(f[0].invoice.billing_start,"YYYY-MM").format("MMMM, YYYY")," to ").concat(v()(f[0].invoice.billing_end,"YYYY-MM").format("MMMM, YYYY")))),l.a.createElement("br",null),f.map((function(e,t){return l.a.createElement(I.b,{document:l.a.createElement(F,e),fileName:"".concat(e.person.profile.name," ").concat(v()().format("YYYY-MM-DD"),".pdf"),key:t,style:{textDecoration:"none",color:"black"}},(function(t){t.blob,t.url;var a=t.loading;t.error;return a?l.a.createElement(n.Fragment,null):l.a.createElement("div",{className:"container",style:{cursor:"pointer"},onClick:function(){d(e),c("/invoice")}},l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("b",{className:"fas",style:{display:"inline-block",width:"10%",margin:"-1% 1% 2% 3%",fontSize:"40px",color:"#0e8587",textDecoration:"none"}},"\uf570"),l.a.createElement("div",{style:{marginLeft:"5%"}},l.a.createElement("small",{style:{display:"inline-block",textDecoration:"none",color:"darkgrey"}},e.person.profile.name),l.a.createElement("h4",{style:{marginTop:"-1%",textDecoration:"none",color:"black"}},l.a.createElement("b",{className:"fas",style:{fontSize:20,textDecoration:"none",color:"black"}},"\uf156"),"\xa0",l.a.createElement("b",null,e.invoice.sum)))))}))})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("button",{className:"overlay-button",style:{backgroundColor:"#006CFF",color:"white",width:"90%"},onClick:function(){return c("/")}},"Done")),l.a.createElement("br",null),l.a.createElement("br",null))},X=a(109),Q=a(39),$=a(75),K=new k;var Z=function(e){var t=Object(R.a)(),a=t.register,r=t.handleSubmit,c=Object(n.useState)(!1),s=Object(o.a)(c,2),m=s[0],u=s[1],d=Object(n.useState)(),f=Object(o.a)(d,2),b=f[0],E=f[1],h=Object(n.useState)(!0),y=Object(o.a)(h,2),p=y[0],g=y[1],v=function(t){var a={id:e.location.state,startdate:t.startdate,advance:parseInt(t.advance),base_rent:parseInt(t.base_rent),water:parseInt(t.water),profile:{name:t.name,head_count:parseInt(t.head_count),mobile:t.mobile}};!function(e){Object.keys(e).forEach((function(t){void 0===e[t]?g(!1):g(!0)}))}(a),console.log(p),p?(K.addUser(t.id,a),u(!0)):u(!1),setTimeout((function(){return E("/")}),1500)};return b?l.a.createElement(M.a,{push:!0,to:{pathname:b}}):l.a.createElement(n.Fragment,null,l.a.createElement("br",null),l.a.createElement(i.a,{bg:"primary",variant:"dark",fixed:"top"},l.a.createElement(i.a.Brand,{className:"mx-auto"},l.a.createElement("h3",null,l.a.createElement("b",null,"Rent")))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h3",null,l.a.createElement("b",{className:"fas"},"\uf234"),l.a.createElement("b",null,"\xa0\xa0Add User"))),l.a.createElement("br",null),l.a.createElement(Q.a,{style:{marginLeft:"5%",marginRight:"5%"},onSubmit:function(){return r((function(e){return v(e)})),u(!!p),setTimeout((function(){return E("/")}),1500)}},l.a.createElement(Q.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("div",{style:{display:"inline-block",marginRight:"5%",fontSize:28},className:"fas"},"\uf2bd"),l.a.createElement(Q.a.Control,{type:"text",placeholder:"Name",ref:a,name:"name",style:{borderBottom:"2px solid darkgrey",borderTop:"none",borderLeft:"none",borderRight:"none"}}))),l.a.createElement("br",null),l.a.createElement(Q.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("div",{style:{display:"inline-block",marginRight:"6%",fontSize:28},className:"fas"},"\uf073"),l.a.createElement(Q.a.Control,{type:"date",placeholder:"startdate",ref:a,name:"startdate",style:{borderBottom:"2px solid darkgrey",borderTop:"none",borderLeft:"none",borderRight:"none"}}))),l.a.createElement("br",null),l.a.createElement(Q.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("div",{style:{display:"inline-block",marginRight:"3%",fontSize:28},className:"fas"},"\uf3d1"),l.a.createElement(Q.a.Control,{type:"number",placeholder:"Advance",ref:a,name:"advance",style:{borderBottom:"2px solid darkgrey",borderTop:"none",borderLeft:"none",borderRight:"none"}}))),l.a.createElement("br",null),l.a.createElement(Q.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("div",{style:{display:"inline-block",marginRight:"8%",fontSize:28},className:"fas"},"\uf156"),l.a.createElement(Q.a.Control,{type:"number",placeholder:"Base Rent",ref:a,name:"base_rent",style:{borderBottom:"2px solid darkgrey",borderTop:"none",borderLeft:"none",borderRight:"none"}}))),l.a.createElement("br",null),l.a.createElement(Q.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("div",{style:{display:"inline-block",marginRight:"5%",fontSize:28},className:"fas"},"\uf879"),l.a.createElement(Q.a.Control,{type:"number",placeholder:"Mobile",ref:a,name:"mobile",style:{borderBottom:"2px solid darkgrey",borderTop:"none",borderLeft:"none",borderRight:"none"}}))),l.a.createElement("br",null),l.a.createElement(Q.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("div",{style:{display:"inline-block",marginRight:"7%",fontSize:28},className:"fas"},"\uf043"),l.a.createElement(Q.a.Control,{type:"number",placeholder:"Water",ref:a,name:"water",style:{borderBottom:"2px solid darkgrey",borderTop:"none",borderLeft:"none",borderRight:"none"}}))),l.a.createElement("br",null),l.a.createElement(Q.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("label",null,l.a.createElement($.a,{className:"mb-3"},l.a.createElement($.a.Prepend,null,l.a.createElement($.a.Checkbox,{"aria-label":"Checkbox for following text input"})),l.a.createElement(X.a,{variant:"light",style:{display:"inline-flex",width:"15%",fontSize:38,paddingLeft:"2%",border:"1px solid black"}},l.a.createElement("div",{className:"fas"},"\uf007")),"\xa0\xa0",l.a.createElement($.a.Prepend,null,l.a.createElement($.a.Checkbox,{"aria-label":"Checkbox for following text input"})),l.a.createElement(X.a,{variant:"light",style:{display:"inline-flex",width:"19%",fontSize:38,paddingLeft:"2%",border:"1px solid black"}},l.a.createElement("div",{className:"fas"},"\uf500")),"\xa0\xa0",l.a.createElement($.a.Prepend,null,l.a.createElement($.a.Checkbox,{"aria-label":"Checkbox for following text input"})),l.a.createElement(X.a,{variant:"light",style:{display:"inline-flex",width:"20%",fontSize:38,paddingLeft:"2%",border:"1px solid black"}},l.a.createElement("div",{className:"fas"},"\uf0c0")))))),l.a.createElement("center",null," ",l.a.createElement(X.a,{variant:"primary",type:"submit",size:"lg",block:!0},l.a.createElement("b",null,"Submit")))),l.a.createElement(C,{style:{transition:"1s ease"},visible:m,bgClick:function(){return u(!m)},height:25},l.a.createElement("center",null,l.a.createElement("div",{className:"fas",style:{color:"#07ab0a",fontSize:90,marginTop:"5%"}},"\uf00c"))))},ee=a(257);var te=function(){return l.a.createElement(ee.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(M.b,{exact:!0,path:"/",component:V}),l.a.createElement(M.b,{path:"/details",render:function(e){return l.a.createElement(G,e)}}),l.a.createElement(M.b,{path:"/add-person",render:function(e){return l.a.createElement(Z,e)}}),l.a.createElement(M.b,{path:"/generate-invoice",render:function(e){return l.a.createElement(J,e)}}),l.a.createElement(M.b,{path:"/invoice-summary",render:function(e){return l.a.createElement(q,e)}}),l.a.createElement(M.b,{path:"/invoice",render:function(e){return l.a.createElement(F,e)}}),l.a.createElement(M.b,{path:"/adjustment",render:function(e){return l.a.createElement(L,e)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[261,1,2]]]);
//# sourceMappingURL=main.7c2adff9.chunk.js.map