(this.webpackJsonprent=this.webpackJsonprent||[]).push([[0],{182:function(e,t,a){},260:function(e,t,a){e.exports=a(452)},265:function(e,t,a){},269:function(e,t,a){},276:function(e,t){},278:function(e,t){},320:function(e,t){},321:function(e,t){},452:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(92),c=a.n(r),i=(a(265),a(16)),o=a(38),s=a(18),m=a(31),u=a.n(m),d=a(47),f=a(241),b=a(259),E=a(256),h=a(65),y=a.n(h),p=(a(266),{apiKey:"AIzaSyBFDTNmvOzGvYgIXwmOJbR8NYTmYd9kGdk",authDomain:"landlord-b68c5.firebaseapp.com",databaseURL:"https://landlord-b68c5.firebaseio.com",projectId:"landlord-b68c5",storageBucket:"landlord-b68c5.appspot.com",messagingSenderId:"18825199721",appId:"1:18825199721:web:da5322c747c82034c322f8",measurementId:"G-XXJHCZ4G3Q"}),g=a(9),v=a.n(g),k=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).refreshCache=function(e,t){var a="/";n.data&&(e&&(a+=e),t&&(a+="/"+t)),y.a.database().ref(a).on("value",function(){var a=Object(d.a)(u.a.mark((function a(l){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n.data||!e){a.next=12;break}if(!t){a.next=7;break}return a.next=4,l.val();case 4:n.data[e][t]=a.sent,a.next=10;break;case 7:return a.next=9,l.val();case 9:n.data[e]=a.sent;case 10:a.next=15;break;case 12:return a.next=14,l.val();case 14:n.data=a.sent;case 15:return localStorage.setItem("rent-db",JSON.stringify(n.data)),a.abrupt("return",new Promise((function(e,t){setTimeout((function(){n.data&&e(n.data)}),200)})));case 17:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},n.get=function(){if(!n.data){var e=localStorage.getItem("rent-db");if(e)n.data=JSON.parse(e);else y.a.database().ref("/").on("value",function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.val();case 2:return n.data=e.sent,localStorage.setItem("rent-db",JSON.stringify(n.data)),e.abrupt("return",new Promise((function(e,t){setTimeout((function(){n.data&&e(n.data)}),200)})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},n.persons=function(e){n.data||n.get();var t=[];return Object.keys(n.data).forEach((function(a,l){e?a.split("_")[0]===e&&t.push(n.data[a]):t.push(n.data[a])})),t},n.profiles=function(e){n.data||n.get();var t=[];return Object.keys(n.data).forEach((function(a,l){e?a.split("_")[0]===e&&t.push(n.data[a].profile):t.push(n.data[a].profile)})),t},n.parseId=function(e){n.data||n.get();var t=e.split("_");if(e)return t.length?{building:t[0],floor:parseInt(t[1]),door:parseInt(t[2])}:void 0},n.updateUser=function(e,t,a){e&&a&&(Array.isArray(a)?y.a.database().ref(e+"/"+t).set(a,(function(t){return new Promise((function(a,l){t&&l(t),a(n.refreshCache(e))}))})):y.a.database().ref(e+"/"+t).update(a,(function(t){return new Promise((function(a,l){t&&l(t),a(n.refreshCache(e))}))})))},n.getExpectedRent=function(e,t){for(var a=[],l=v()(e.startdate);l.isSameOrBefore(v()().add(1,"M"))&&!l.isAfter(v()());l.add(1,"M").startOf("month")){var r=Math.floor(a.length/11),c={housing:Math.floor(e.base_rent*Math.pow(1.05,r)),others:0};e.invoices&&(c.others+=n.getInvoiceSum(e,l.month()-1));if(a.length+1===t)return c;a.push(c)}return a},n.getDues=function(e,t,a,l){var r=n.getExpectedRent(e),c=[{housing:0,others:0}];e.payment_history&&(c=Object(s.a)(e.payment_history));for(var i={housing:0,others:0};c.length!==r.length;)c.push({housing:0,others:0});var o={housing:0,others:0};return c.forEach((function(e,t){var a={housing:r[t].housing-e.housing,others:r[t].others-e.others};i.housing+=a.housing,i.others+=a.others,t===l&&(o=a)})),l&&(i=o),t?a?0===i.housing&&0===i.others:0===i.housing:a?i:i.housing},n.getPaidRent=function(e,t){var a=n.getExpectedRent(e),l=[{housing:0,others:0}];for(e.payment_history&&(l=Object(s.a)(e.payment_history));l.length!==a.length;)l.push({housing:0,others:0});return t?l[t]||{housing:0,others:0}:l},n.getLess=function(e,t){var a=0,l=[];return n.getExpectedRent(e).forEach((function(t,r){var c=n.getDues(e,!1,!0,r+1);l.push({month:r+1,amount:c.housing+c.others,reason:"Rent ".concat(c.others>0?"& Utilities ":"","- ").concat(v()(e.startdate).add(r+1,"M").format("MMM YY"))}),a+=c.housing+c.others})),t?a:l},n.addUser=function(e,t){if(console.log(n.data),console.log(e),n.data||n.get(),!n.data[e])return!1;y.a.database().ref("/"+e).set(t,(function(t){return new Promise((function(a,l){t&&l(t),a(n.refreshCache(e))}))}))},n.getNickname=function(e){return e?e.nickname?e.nickname:e.name.split(" ")[0]:"undefined"},n.deleteUser=function(e,t){if(!Object.keys(n.data).find(e))return!0;y.a.database().ref(e).remove().catch((function(e){return console.log(e),!1}))},n.addPay=function(e,t,a){var l=e.payment_history||[];return t>l.length?l.push(a):l[t-1]=a,n.updateUser(e.id,"payment_history",l)},n.getNextRenewal=function(e){var t=e.renewals;return v()(void 0!==t&&t.length>0?t[t.length-1]:e.startdate,"YYYY-MM-DD",!0).add(11,"M")},n.getBuildings=function(){n.data||n.get();var e=[];return Object.keys(n.data).forEach((function(t,a){e.push(n.parseId(t).building)})),Object(s.a)(new Set(e))},n.getFloors=function(e){n.data||n.get();var t=[];return Object.keys(n.data).forEach((function(a,l){n.parseId(a).building===e&&t.push(n.parseId(a).floor)})),Object(s.a)(new Set(t)).reverse()},n.getDoors=function(e,t){n.data||n.get();var a=[];return Object.keys(n.data).forEach((function(l,r){n.parseId(l).building===e&&n.parseId(l).floor===parseInt(t)&&a.push(n.parseId(l).door)})),Object(s.a)(new Set(a))},n.generateInvoiceId=function(e){var t=n.parseId(e.id),a="I-".concat(t.building.padStart(2,"0")).concat(t.floor).concat(t.door,"-").concat(e.profile.mobile.slice(-4),"-").concat(v()().format("YYYYMMDD"),"-");if(e.invoices){var l=function(){var t=e.invoices.filter((function(e){return e.date===v()().format("YYYY-MM-DD")})),n=0,l="";do{l=(++n).toString().padStart(2,"0")}while(t.find((function(e){return e.id===a+l})));return{v:a+l}}();if("object"===typeof l)return l.v}return a+"01"},n.addInvoice=function(e,t){var a=e.invoices||[];return a.push(t),n.updateUser(e.id,"invoices",a)},n.getInvoiceSum=function(e,t){var a=e.invoices||[],n=0;return a.forEach((function(e){t?t===v()(e.billing_end,"YYYY-MM").month()+1&&(n+=e.sum||0):n+=e.sum||0})),n},y.a.apps.length||(y.a.initializeApp(p),n.get()),n}return a}(l.a.Component),M=(a(182),a(21)),w=(a(269),function(e){return l.a.createElement("div",{className:"circle-container",style:e.style,onClick:e.onClick},l.a.createElement("div",{className:e.small?"circle-sm":"circle",style:e.condition?{backgroundColor:e.color[0]}:{backgroundColor:e.color[1]}},l.a.createElement("center",null,l.a.createElement("b",{className:"fas"},e.condition?e.icon[0]:e.icon[1]))),e.title?l.a.createElement("p",{style:e.titleStyle||{}},e.title):null)}),N=function(e){return l.a.createElement("div",{className:"circle-container",style:e.style,onClick:e.onClick},l.a.createElement("div",{className:e.small?"circle-sm":"circle",style:{backgroundColor:e.invert?"white":e.color||"darkgrey"}},l.a.createElement("center",null,l.a.createElement("b",{className:"fas",style:{color:e.invert?e.color:"white"}},e.icon))),l.a.createElement("br",null),e.title?l.a.createElement("p",{style:e.titleStyle||{}},e.title):null)},Y=function(e){return l.a.createElement("div",{style:{overflow:"scroll",height:"100%"}},l.a.createElement("div",{className:"vertical-timeline",content:"\uf067",style:{height:"".concat(17*e.content.length,"%")}},e.content.map((function(e,t){return l.a.createElement("div",{key:t,className:"vertical-timeline-container"},l.a.createElement("div",{className:"content"},l.a.createElement("h5",null,e.title),l.a.createElement("div",{style:{marginBottom:"5%"}},e.subtitle)))}))))},O=function(e){return l.a.createElement("div",{className:"horizontal-timeline"},e.content.map((function(e,t){return l.a.createElement("div",{key:t,className:"horizontal-timeline-container",onClick:e.onClick,style:{cursor:e.onClick?"pointer":"default"}},l.a.createElement("div",{className:"content"},l.a.createElement("h5",null,e.title),l.a.createElement("p",null,e.subtitle)))})))},j=function(e){return l.a.createElement("div",{className:"horizontal-timeline",content:"\uf067"},e.content.map((function(t,a){return l.a.createElement("div",{key:a,className:"horizontal-timeline-container"},l.a.createElement("div",{className:"content"},l.a.createElement("h5",null,t.title),l.a.createElement("p",null,t.subtitle),l.a.createElement(w,{small:!0,color:e.color,icon:e.icon,style:{position:"relative",top:-70,zIndex:1},condition:e.conditionArray[a]})))})))},S=function(e){return l.a.createElement("div",{style:{overflow:"scroll",height:"100%"}},l.a.createElement("div",{className:"vertical-timeline",content:"\uf067",style:{height:"".concat(17*e.content.length,"%")}},e.content.map((function(t,a){return l.a.createElement("div",{key:a,className:"vertical-timeline-container"},l.a.createElement("div",{className:"content",style:{color:"white",width:"130%"}},l.a.createElement("h5",null,t.title),l.a.createElement("div",{style:{marginBottom:"5%"}},t.subtitle),l.a.createElement(w,{small:!0,color:e.color,icon:e.icon,style:{position:"absolute",top:-78,zIndex:1,marginLeft:"88%"},condition:e.conditionArray[a-1]||!1})))}))))},C=function(e){return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"headCountContainer",style:e.style,onClick:e.bgClick},e.children))},x=function(e){return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"overlay",onClick:e.bgClick,style:{opacity:!0===e.visible?1:0,display:!0===e.visible?"block":"none"}}),l.a.createElement("div",{className:"sliding-overlay-container",style:{bottom:"".concat(-e.height+e.height*(!0===e.visible?1:0),"%"),height:"".concat(e.height,"%")}},e.children))},P=function(e){return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"overlay",onClick:e.bgClick,style:{opacity:!0===e.visible?1:0,display:!0===e.visible?"block":"none"}}),l.a.createElement("center",null,l.a.createElement("div",{className:"overlay-container",style:{display:!0===e.visible?"block":"none",height:"".concat(e.height,"%"),top:"".concat((100-e.height)/2,"%")}},e.children)))},R=a(257),I=a(72),z=new k;var T=function(){var e=Object(n.useState)(),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(),s=Object(i.a)(c,2),m=s[0],u=s[1],d=Object(n.useState)(!1),f=Object(i.a)(d,2),b=f[0],E=f[1],h=Object(n.useState)(),y=Object(i.a)(h,2),p=y[0],g=y[1],k=Object(n.useState)(!1),Y=Object(i.a)(k,2),O=Y[0],j=Y[1],S=Object(I.a)(),C=S.register,T=S.handleSubmit,_=Object(n.useState)(0),B=Object(i.a)(_,2),F=B[0],D=B[1];Object(n.useEffect)((function(){z.refreshCache()}),[]);var L=function(){var e=[];return z.data&&z.persons().map((function(t,a){return z.getNextRenewal(t).isBetween(v()().subtract(1,"M"),v()().add(7,"M"),"M")?e.push({i:a,name:t.profile.name,date:z.getNextRenewal(t).format("Do MMMM, YYYY")}):null})),e},A=function(e){var t=v()().diff(v()(e.startdate).startOf("month"),"months")+1;return void 0!==e.payment_history?{i:t-1,month:v()().subtract(t-e.payment_history.length-1,"M").startOf("month"),amount:z.getExpectedRent(e,t)}:{i:0,month:v()(e.startdate),amount:z.getExpectedRent(e,1)}},H=function(){var e=0,t=0;return z.persons().forEach((function(a){var n=A(a),l=z.getPaidRent(a,n.i).housing||0;e+=l,t+=0===l?z.getExpectedRent(a,n.i+1).housing:l})),{current:e,total:t,percent:e/t*100}}(),V=function(){j(!1),D(0)};return a?l.a.createElement(M.a,{push:!0,to:{pathname:a,state:m}}):l.a.createElement("div",null,l.a.createElement(o.a,{bg:"primary",variant:"dark",fixed:"top"},l.a.createElement(o.a.Brand,{className:"mx-auto"},l.a.createElement("h3",null,l.a.createElement("b",null,"Rent")))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf662"),"\xa0\xa0",v()().format("MMMM")),l.a.createElement("div",{className:"container"},z.data&&z.getBuildings().reverse().map((function(e,t){return l.a.createElement(n.Fragment,{key:t},z.persons(e).map((function(e,a){return l.a.createElement(n.Fragment,{key:t+a},l.a.createElement(w,{title:z.getNickname(e.profile),condition:A(e).month.isAfter(v()()),onClick:function(){u(e),r("/details")},color:["#07ab0a","darkgrey"],icon:["\uf00c","\uf00d"]}),l.a.createElement("br",{style:a%3===2?{display:"block"}:{display:"none"}}))})),t!==z.getBuildings().length-1?l.a.createElement("hr",{style:{marginTop:"-1%",marginBottom:"6%"}}):null)})))),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf4c0"),"\xa0\xa0Collected")),l.a.createElement("div",{className:"container"},l.a.createElement("center",null,l.a.createElement("br",null),l.a.createElement("h2",null,l.a.createElement("b",{className:"fas",style:{fontSize:26}},"\uf156"),"\xa0\xa0",H.current),l.a.createElement(R.a,{now:H.percent,style:{borderRadius:"25px",margin:"5% 0",width:"95%"}}),l.a.createElement("small",{style:{display:"inline-block",width:"40%",color:"darkgrey"}},"out of ",H.total)),l.a.createElement("br",null)),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf1da"),"\xa0\xa0Upcoming Renewals")),l.a.createElement("div",{className:"container"},z.data&&L().map((function(e,t){return l.a.createElement(n.Fragment,{key:t},l.a.createElement("div",{style:{display:"inline-flex",width:"100%",marginLeft:"2%",cursor:"pointer"}},l.a.createElement("div",{style:{display:"inline-block",width:"20%",marginRight:"8%"}},l.a.createElement(N,{color:"#5e09b8",icon:"\uf007"})),l.a.createElement("div",{style:{display:"inline-block",width:"80%",marginTop:"1.5%"}},l.a.createElement("b",null,e.name),l.a.createElement("br",null),e.date)),t!==L().length-1?l.a.createElement("hr",{style:{marginTop:"-3%"}}):null)}))),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf0c0"),"\xa0\xa0Tennants")),l.a.createElement("div",{className:"container"},z.data&&z.getBuildings().reverse().map((function(e,t){return l.a.createElement(n.Fragment,{key:t},z.getFloors(e).map((function(t,a){return l.a.createElement(n.Fragment,{key:a},l.a.createElement("div",{className:"floor-label-container"},l.a.createElement("center",null,l.a.createElement("b",{className:"floor-label"},0===t?"G":t))),l.a.createElement("div",{className:"floor"},z.getDoors(e,t).map((function(n,r){return l.a.createElement("div",{key:r,onClick:function(){g({building:e,floor:t,door:n}),E(!0)},style:{width:"".concat(100/z.getDoors(e,t).length,"%"),backgroundColor:"hsl(".concat(48-2*(a+r),", ").concat((a+r+1)/z.getDoors(e,t).length*80+15,"%, ").concat((a+r)/z.getDoors(e,t).length*13+74,"%)")},className:"door"},l.a.createElement("center",null,l.a.createElement("b",{className:"door-label"},l.a.createElement("b",{className:"fas"},"\uf52a"),"\xa0",0===t?"G":t,"0",n),l.a.createElement("p",{className:"door-subtitle"},z.getNickname(z.data["".concat(e,"_").concat(t,"_").concat(n)].profile))))}))),l.a.createElement("br",null))})),t!==z.getBuildings().length-1?l.a.createElement("hr",null):null)}))),l.a.createElement("br",null),l.a.createElement("br",null),p&&l.a.createElement(P,{visible:b,bgClick:function(){return E(!b)},height:25},l.a.createElement("h3",null,l.a.createElement("b",null,z.data["".concat(p.building,"_").concat(p.floor,"_").concat(p.door)].profile.name)),"".concat(0===p.floor?"G":p.floor,"0").concat(p.door,", #").concat(p.building),l.a.createElement("br",null),"Since "+v()(z.data["".concat(p.building,"_").concat(p.floor,"_").concat(p.door)].startdate).format("Do MMM, YYYY"),l.a.createElement("br",null),l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#ED0034"}},"Vacate"),"\xa0\xa0",l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#00A4BC"},onClick:function(){u("".concat(p.building,"_").concat(p.floor,"_").concat(p.door)),r("/add-person")}},"Replace")),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf543"),"\xa0\xa0Invoices")),l.a.createElement("div",{className:"container"},l.a.createElement("center",null,l.a.createElement("h3",null,"Generate"),l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#006CFF"},onClick:function(){return j(!0)}},v()().format("MMMM")),"\xa0\xa0",l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#00A4BC"}},"Quarterly"),l.a.createElement("br",null),l.a.createElement("br",null))),l.a.createElement(x,{visible:O,bgClick:function(){return V()},height:48},l.a.createElement("b",{className:"fas",style:{fontSize:22,float:"right"},onClick:function(){return V()}},"\uf00d"),l.a.createElement("br",null),l.a.createElement("form",{onSubmit:T((function(e){u(e),r("/generate-invoice")}))},l.a.createElement("center",null,l.a.createElement("div",{style:{display:"inline-block",width:"420%",transition:".2s ease",marginLeft:"".concat(-2-104*F,"%"),position:"relative",zIndex:10}},l.a.createElement("div",{style:{display:"inline-block",width:"20%"}},l.a.createElement("h3",null,l.a.createElement("b",null,"Electricity")),l.a.createElement("p",{style:{marginTop:"-2%"}},"Stairs & Pump"),l.a.createElement("br",null),l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"eb",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:850,ref:C,className:"editable-label-input"})),l.a.createElement("div",{style:{display:"inline-block",marginLeft:"5%",width:"20%"}},l.a.createElement("h3",{style:{marginBottom:"-1%"}},l.a.createElement("b",null,"Other Charges")),l.a.createElement("input",{name:"other1-title",style:{display:"inline-block",fontSize:16,fontWeight:"normal"},defaultValue:"Other Expense 1",ref:C,className:"editable-label-input"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"other1-amount",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:0,ref:C,className:"editable-label-input"})),l.a.createElement("div",{style:{display:"inline-block",marginLeft:"5%",width:"20%"}},l.a.createElement("h3",{style:{marginBottom:"-1%"}},l.a.createElement("b",null,"Other Charges")),l.a.createElement("input",{name:"other2-title",style:{display:"inline-block",fontSize:16,fontWeight:"normal"},defaultValue:"Other Expense 2",ref:C,className:"editable-label-input"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"other2-amount",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:0,ref:C,className:"editable-label-input"})),l.a.createElement("div",{style:{display:"inline-block",marginLeft:"5%",width:"20%"}},l.a.createElement("h3",{style:{marginBottom:"-1%"}},l.a.createElement("b",null,"Other Charges")),l.a.createElement("input",{name:"other3-title",style:{display:"inline-block",fontSize:16,fontWeight:"normal"},defaultValue:"Other Expense 3",ref:C,className:"editable-label-input"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"other3-amount",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:0,ref:C,className:"editable-label-input"})))),l.a.createElement("b",{className:"fas",onClick:function(){return D(3===F?0:F+1)},style:{fontSize:22,float:"right",marginRight:"5%",marginTop:"-15%",position:"relative",zIndex:15}},"\uf1b2"),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("button",{className:"overlay-button",style:{marginTop:"5%",color:"#006CFF"},type:"submit"},"Next")))),l.a.createElement("br",null),l.a.createElement("br",null))},_=new k;var B=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],c=a[1],m=Object(n.useState)(!1),u=Object(i.a)(m,2),d=u[0],f=u[1],b=Object(n.useState)(!1),E=Object(i.a)(b,2),h=E[0],y=E[1],p=Object(n.useState)(!1),g=Object(i.a)(p,2),k=g[0],w=g[1],C=Object(n.useState)(!1),R=Object(i.a)(C,2),z=R[0],T=R[1],B=Object(n.useState)(!1),F=Object(i.a)(B,2),D=F[0],L=F[1],A=Object(n.useState)([]),H=Object(i.a)(A,2),V=H[0],G=H[1],W=Object(n.useState)(),U=Object(i.a)(W,2),J=U[0],q=U[1],Q=Object(n.useState)(),X=Object(i.a)(Q,2),$=X[0],K=X[1],Z=Object(I.a)(),ee=Z.register,te=Z.getValues,ae=Z.setValue,ne=e.location.state,le=_.parseId(ne.id),re=function(){c(!1),w(!1)},ce=void 0!==ne.payment_history?{i:ne.payment_history.length,month:v()(ne.startdate).add(ne.payment_history.length,"M").startOf("month"),amount:_.getExpectedRent(ne,ne.payment_history.length)}:{i:0,month:v()(ne.startdate),amount:_.getExpectedRent(ne,1)},ie=Object(n.useState)(ce),oe=Object(i.a)(ie,2),se=oe[0],me=oe[1],ue=_.getPaidRent(ne),de=_.getLess(ne),fe=_.getLess(ne,!0);return J?l.a.createElement(M.a,{push:!0,to:{pathname:J,state:$}}):l.a.createElement("div",null,l.a.createElement(o.a,{bg:"primary",variant:"dark",fixed:"top"},l.a.createElement(o.a.Brand,{className:"mx-auto"},l.a.createElement("h3",null,l.a.createElement("b",null,"Rent")))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{style:{display:"inline-flex",width:"95%",marginLeft:"2%",cursor:"pointer"}},l.a.createElement("div",{style:{display:"inline-block",width:"20%",marginRight:"8%"}},l.a.createElement(N,{color:"#5e09b8",icon:"\uf007",style:{marginLeft:"50%"}})),l.a.createElement("div",{style:{display:"inline-block",width:"80%",marginTop:"1%",marginLeft:"5%"}},l.a.createElement("h3",{style:{marginBottom:"-2%"}},ne.profile.name),l.a.createElement("small",{style:{display:"inline-block",width:"40%",color:"darkgrey"}},"".concat(0===le.floor?"G":le.floor,"0").concat(le.door,", #").concat(le.building)),l.a.createElement("br",null))),l.a.createElement("div",{className:"container"},l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("b",{className:"fas",style:{display:"inline-block",width:"10%",margin:"-1% 1% 2% 3%",fontSize:"40px",color:"#f03050"}},"\uf073"),l.a.createElement("div",{style:{marginLeft:"5%"}},l.a.createElement("small",{style:{display:"inline-block",width:"40%",color:"darkgrey"}},"Since"),l.a.createElement("h4",{style:{marginTop:"-1%"}},l.a.createElement("b",null,v()(ne.startdate).format("Do MMMM, YYYY")))))),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf1da"),"\xa0\xa0Rent History")),l.a.createElement("div",{className:"container",onClick:function(){return f(!0)}},void 0!==ne.payment_history?l.a.createElement(j,{content:ue.map((function(e,t){return{title:v()(ne.startdate).add(t,"M").format("MMM"),subtitle:e.housing}})).slice(-3),conditionArray:ue.map((function(e){return 0!==e.housing})).slice(-3),color:["#07ab0a","darkgrey"],icon:["\uf00c","\uf00d"]}):null),l.a.createElement(x,{visible:d,height:85,bgClick:function(){return f(!1)}},l.a.createElement("b",{className:"fas",style:{fontSize:20,float:"right"},onClick:function(){return f(!d)}},"\uf00d"),l.a.createElement("br",null),void 0!==ne.payment_history?l.a.createElement(S,{content:ue.map((function(e,t){return{title:v()(ne.startdate).add(t,"M").format("MMM YY"),subtitle:l.a.createElement("div",null,l.a.createElement("b",{className:"fas"},"\uf015")," ",e.housing,"\xa0\xa0\xa0\xa0",l.a.createElement("b",{className:"fas"},"\uf1b2")," ",e.others)}})),conditionArray:ue.map((function(e){return 0!==e.housing})),color:["#07ab0a","darkgrey"],icon:["\uf00c","\uf00d"]}):null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf3d1"),"\xa0\xa0Returnable Advance")),l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h2",null,l.a.createElement("b",{className:"fas",style:{fontSize:26}},"\uf156"),l.a.createElement("b",null,"\xa0",ne.advance-fe))),l.a.createElement("br",null),l.a.createElement("div",{style:{color:"darkgrey",fontSize:14}},de.filter((function(e){return 0!==e.amount})).map((function(e,t){return l.a.createElement(n.Fragment,{key:t},l.a.createElement("b",{className:"fas",style:{marginRight:"3%"}},"\uf06a"),e.reason,l.a.createElement("br",null))})).slice(-2).reverse(),l.a.createElement("button",{className:"btn btn-link",style:{margin:"-2% 0 0 -4%"},onClick:function(){return y(!0)}},l.a.createElement("small",null,de.filter((function(e){return 0!==e.amount})).length," more..")))),l.a.createElement("br",null),l.a.createElement(x,{visible:h,height:85,bgClick:function(){return y(!1)}},l.a.createElement("b",{className:"fas",style:{fontSize:20,float:"right"},onClick:function(){return y(!h)}},"\uf00d"),l.a.createElement("br",null),l.a.createElement(Y,{content:de.filter((function(e){return 0!==e.amount})).map((function(e){return{title:e.reason,subtitle:-e.amount}}))})),l.a.createElement(n.Fragment,null,l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf251"),"\xa0\xa0Renewals")),l.a.createElement("div",{className:"container"},l.a.createElement(O,{content:[].concat(Object(s.a)(ne.renewals||[]),[_.getNextRenewal(ne)]).map((function(e){return{title:v()(e).format("MMM"),subtitle:v()(e).format("YYYY")}}))}))),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf543"),"\xa0\xa0Invoices")),l.a.createElement("div",{className:"container"},void 0!==ne.invoices?l.a.createElement(O,{content:ne.invoices.map((function(e,t){return{title:v()(e.billing_end,"YYYY-MM").format("MMM"),subtitle:e.sum,onClick:function(){K({person:ne,invoice:e}),q("/invoice")}}})).slice(-3)}):null,l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#00A4BC",width:"48%"},onClick:function(){return L(!0)}},"Adjust"),"\xa0\xa0",l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#ED0034",width:"48%"},onClick:function(){K({person:ne,end:v()().format("YYYY-MM-DD"),type:"settlement",less:de,lessTotal:fe}),q("/adjustment")}},"Settle")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(N,{color:"#006CFF",icon:"\uf067",style:{position:"fixed",bottom:"1%",right:"2%"},onClick:function(){return c(!0)}}),l.a.createElement(x,{visible:r,bgClick:function(){return re()},height:48},l.a.createElement("b",{className:"fas",style:{fontSize:22,float:"right"},onClick:function(){return re()}},"\uf00d"),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h3",{style:{marginLeft:"5%"}},l.a.createElement("b",null,k?"Utilities":l.a.createElement("span",{onClick:function(){return G(_.getExpectedRent(ne)),void T(!z)}},"Rent ".concat(se.month.format("MMMM"))))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{style:{display:"inline-block",width:"210%",transition:".2s ease",marginLeft:k?"-115%":"4%",position:"relative",zIndex:10}},l.a.createElement("div",{style:{display:"inline-block",width:"45%"}},l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"housing-payment",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:se.amount.housing,ref:ee,className:"editable-label-input"})),l.a.createElement("div",{style:{display:"inline-block",marginLeft:"10%",width:"45%"}},l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"other-payment",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:se.amount.others,ref:ee,className:"editable-label-input"})))),l.a.createElement("b",{className:"fas",onClick:function(){return w(!k)},style:{fontSize:22,float:"right",marginRight:"5%",marginTop:"-15%",position:"relative",zIndex:15}},"\uf1b2"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("button",{className:"overlay-button",onClick:function(){_.addPay(ne,se.i+1,{housing:parseInt(te("housing-payment")),others:parseInt(te("other-payment"))}),re()},style:{color:"#006CFF"}},"Save"))),l.a.createElement(P,{visible:z,bgClick:function(){return T(!z)},height:40},l.a.createElement("div",{style:{display:"inline-block",width:"100%",overflow:"scroll"}},V.length>0&&V.map((function(e,t){return l.a.createElement(n.Fragment,{key:t},v()(ne.startdate).add(t,"M").startOf("month").isSame(se.month,"month")?l.a.createElement("button",{className:"overlay-button-mx",key:t,style:{margin:"2% 1%"},onClick:function(){me({i:t,month:v()(ne.startdate).add(t,"M").startOf("month"),amount:e}),ae("housing-payment",se.amount.housing),ae("other-payment",se.amount.others),T(!1)}},v()(ne.startdate).add(t,"M").format("MMM YY")):l.a.createElement("span",{className:"overlay-button-mx-light",key:t,onClick:function(){me({i:t,month:v()(ne.startdate).add(t,"M").startOf("month"),amount:e}),ae("housing-payment",se.amount.housing),ae("other-payment",se.amount.others),T(!1)}},v()(ne.startdate).add(t,"M").format("MMM YY")),t%3===2?l.a.createElement("br",null):null)})))),l.a.createElement(P,{visible:D,bgClick:function(){return L(!D)},height:40},l.a.createElement("div",{style:{display:"inline-block",width:"100%",overflow:"scroll"}},ne.renewals?[ne.startdate].concat(Object(s.a)(ne.renewals)).map((function(e,t){return l.a.createElement(n.Fragment,{key:t},l.a.createElement("button",{className:"overlay-button-mx-light",key:t,onClick:function(){K({person:ne,type:"adjustment",less:de,lessTotal:fe,start:v()(e).format("MMMM YYYY"),end:t===ne.renewals.length?v()().format("MMMM YYYY"):v()(ne.renewals[t+1]).format("MMMM YYYY")}),q("/adjustment")}},v()(e).format("MMM YY")," - ",t===ne.renewals.length?v()().format("MMM YY"):v()(ne.renewals[t+1]).format("MMM YY")),l.a.createElement("br",null))})):l.a.createElement("button",{className:"overlay-button-mx-light",style:{margin:"2% 1%"},onClick:function(){K({person:ne,type:"adjustment",less:de,lessTotal:fe,start:v()(ne.startdate).format("MMMM YYYY"),end:v()().format("MMMM YYYY")}),q("/adjustment")}},v()(ne.startdate).format("MMM YY")," - ",v()().format("MMM YY")))))},F=a(26),D=new k;var L=function(e){var t=Object(I.a)(),a=t.register,r=t.getValues,c=t.handleSubmit,m=Object(n.useState)(3),u=Object(i.a)(m,2),d=u[0],f=u[1],b=Object(n.useState)(),E=Object(i.a)(b,2),h=E[0],y=E[1],p=Object(n.useState)(!1),g=Object(i.a)(p,2),k=g[0],Y=g[1],O=Object(n.useState)(),j=Object(i.a)(O,2),S=j[0],C=j[1],x=Object(n.useState)(),R=Object(i.a)(x,2),z=R[0],T=R[1],_=function(){var e=4;return D.persons().forEach((function(t){e+=t.profile.head_count||0})),e}(),B=function(){var e=1;return D.persons().forEach((function(t){e+=t.profile.isEmpty?0:1})),e}(),L=e.location.state;Object(n.useEffect)((function(){var e=[{title:"Stairs & Pump",value:parseInt(L.eb),fieldname:"eb",icon:"\uf0e7",isShared:!0,isPerHead:!1},{title:"Water +/-",value:0,valueTemplate:"water",fieldname:"water",icon:"\ue005",isPPB:!0,isPerHead:!0,perPersonValue:[]},{title:"Garbage +/-",value:60,fieldname:"garbage",icon:"\uf1f8"}];Array.from(["1","2","3"]).forEach((function(t){"0"!==L["other".concat(t,"-amount")]&&e.push({title:L["other".concat(t,"-title")],value:parseInt(L["other".concat(t,"-amount")]),icon:"\uf1b2",fieldname:"other".concat(t),isShared:!0,isPerHead:!0})})),e.forEach((function(e,t){e.isPerMonth=!1,e.isPPB?D.persons().forEach((function(t){t[e.valueTemplate]&&e.perPersonValue.push({id:t.id,value:e.isPerHead?t[e.valueTemplate]*(t.profile.head_count||0):t[e.valueTemplate]})})):e.isShared&&(e.value/=e.isPerHead?_:B),e.value=Math.round(e.value,0)||0})),y(e)}),[L,_,B]);var A=function(e,t){y((function(a){var n=a[e];return n.isPPB?(n=Object(F.a)(Object(F.a)({},n),{},{value:n.value+t,perPersonValue:n.perPersonValue.map((function(e){return{id:e.id,value:e.value+t}}))}),Array.from([].concat(Object(s.a)(a.slice(0,e)),[n],Object(s.a)(a.slice(e+1))))):(n=n.isShared?n.isPerHead?Object(F.a)(Object(F.a)({},n),{},{value:n.value+t*_}):Object(F.a)(Object(F.a)({},n),{},{value:n.value+t*B}):Object(F.a)(Object(F.a)({},n),{},{value:n.value+t}),Array.from([].concat(Object(s.a)(a.slice(0,e)),[n],Object(s.a)(a.slice(e+1)))))}))};return S?l.a.createElement(M.a,{push:!0,to:{pathname:S,state:z}}):l.a.createElement("div",null,l.a.createElement(o.a,{bg:"primary",variant:"dark",fixed:"top"},l.a.createElement(o.a.Brand,{className:"mx-auto"},l.a.createElement("h3",null,l.a.createElement("b",null,"Rent")))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h3",null,l.a.createElement("b",{className:"fas"},"\uf543"),l.a.createElement("b",null,"\xa0\xa0New Invoice")),l.a.createElement("input",{name:"billing-start",style:{display:"inline-block",fontSize:16,fontWeight:"normal",backgroundColor:"#fafafa",color:"grey"},defaultValue:v()().subtract(3,"M").format("YYYY-MM"),type:"month",ref:a,onChange:function(){return f(v()(r("billing-end"),"YYYY-MM").diff(v()(r("billing-start"),"YYYY-MM"),"months")+1)},className:"editable-label-input"}),l.a.createElement("input",{name:"billing-end",style:{display:"inline-block",fontSize:16,fontWeight:"normal",backgroundColor:"#fafafa",color:"grey"},defaultValue:v()().subtract(1,"M").format("YYYY-MM"),type:"month",ref:a,onChange:function(){return f(v()(r("billing-end")).diff(v()(r("billing-start")),"months")+1)},className:"editable-label-input"})),l.a.createElement("br",null),l.a.createElement("form",{onSubmit:c((function(e){return function(e){var t=[];D.persons().forEach((function(a){var n={date:v()().format("YYYY-MM-DD"),id:D.generateInvoiceId(a),head_count:a.profile.head_count||1,type:"utilities",months:v()(e["billing-end"]).diff(e["billing-start"],"months")+1,billing_start:e["billing-start"],billing_end:e["billing-end"],sum:0,particulars:[]};h.forEach((function(e,t){var l={item:e.title.replace(" +/-",""),isPerHead:e.isPerHead||!1,isPerMonth:e.isPerMonth};if(e.isPPB){var r=e.perPersonValue.find((function(e){return e.id===a.id}))||{value:0};l.amount=r.value}else l.amount=e.value;if(l.isPerHead&&(l.amount/=n.head_count),l.amount=Math.round(l.amount,0),l.amount>0){var c=l.amount;c*=l.isPerHead?n.head_count:1,c*=l.isPerMonth?n.months:1,n.sum+=c,n.particulars.push(l)}}));var l=v()().diff(v()(a.startdate),"days");n.prodata=l<30?{isProdata:!0,days:l,maxDays:v()(a.startdate).daysInMonth()}:{isProdata:!1},D.addInvoice(a,n),t.push({person:a,invoice:n})})),Y(!0),T(t),setTimeout((function(){return C("invoice-summary")}),500)}(e)}))},h&&h.map((function(e,t){return l.a.createElement(n.Fragment,{key:t},l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},e.icon),"\xa0\xa0",e.title)),l.a.createElement("div",{className:"container"},l.a.createElement("center",null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("center",null,e.title.includes("+/-")&&l.a.createElement(N,{small:!0,icon:"\uf068",style:{margin:"0 5%",display:"inline-block"},onClick:function(){return A(t,-10)}}),l.a.createElement("input",{name:e.fieldname,style:{display:"inline-block",color:"black",backgroundColor:"white"},type:"number",pattern:"[0-9]*",value:e.value,ref:a,className:"editable-label-input",readOnly:!0}),e.title.includes("+/-")&&l.a.createElement(N,{small:!0,icon:"\uf067",style:{margin:"0 5%",display:"inline-block"},onClick:function(){return A(t,10)}}))),l.a.createElement("small",{style:{display:"inline-block",width:"40%",color:"darkgrey"}},e.isPerHead?"per head":e.isShared?"per house":""),l.a.createElement("br",null),l.a.createElement("br",null),e.isPPB&&l.a.createElement("div",{style:{display:"inline-block",width:"80%"}},e.perPersonValue.map((function(e,t){return l.a.createElement(N,{key:e.id,small:!0,color:"#5e09b8",icon:"\uf007",title:e.value||"0",titleStyle:{color:"darkgrey"},style:{margin:"0 4%"}})})))),e.isShared&&l.a.createElement("div",{style:{display:"inline-flex",width:"40%",margin:"0 2% 3% 0"}},l.a.createElement("div",{style:{display:"inline-block",width:"20%",marginRight:"8%"}},l.a.createElement(w,{small:!0,condition:e.isPerHead,onClick:function(){return function(e){y((function(t){var a=t[e];return(a=void 0!==a.isPerHead?Object(F.a)(Object(F.a)({},a),{},{isPerHead:!a.isPerHead}):Object(F.a)(Object(F.a)({},a),{},{isPerHead:!0})).isPPB?D.persons().forEach((function(e){e[a.valueTemplate]&&(a=Object(F.a)(Object(F.a)({},a),{},{perPersonValue:[].concat(Object(s.a)(a.perPersonValue),[{id:e.id,value:a.isPerHead?e[a.valueTemplate]*(e.profile.head_count||0):e[a.valueTemplate]}])}))})):a=a.isShared?a.isPerHead?Object(F.a)(Object(F.a)({},a),{},{value:a.value*B/_}):Object(F.a)(Object(F.a)({},a),{},{value:a.value*_/B}):Object(F.a)(Object(F.a)({},a),{},{value:0}),a=Object(F.a)(Object(F.a)({},a),{},{value:Math.round(a.value,0)}),Array.from([].concat(Object(s.a)(t.slice(0,e)),[a],Object(s.a)(t.slice(e+1))))}))}(t)},color:["#006CFF","#c20808"],icon:["\uf0c0","\ue065"]})),l.a.createElement("div",{style:{display:"inline-block",width:"80%",marginTop:"1%"}},l.a.createElement("small",{style:{display:"inline-block",color:"darkgrey"}},e.isPerHead?"Split Per Head":"Per House"),l.a.createElement("br",null))),d>1&&l.a.createElement("div",{style:{display:"inline-flex",width:"40%",margin:"0 2% 3% 0"}},l.a.createElement("div",{style:{display:"inline-block",width:"20%",marginRight:"8%"}},l.a.createElement(w,{small:!0,condition:e.isPerMonth,onClick:function(){return function(e){y((function(t){var a=t[e];return a=void 0!==a.isPerMonth?Object(F.a)(Object(F.a)({},a),{},{isPerMonth:!a.isPerMonth}):Object(F.a)(Object(F.a)({},a),{},{isPerMonth:!0}),Array.from([].concat(Object(s.a)(t.slice(0,e)),[a],Object(s.a)(t.slice(e+1))))}))}(t)},color:["#de3ea1","#4bbde3"],icon:["\uf073","\uf133"]})),l.a.createElement("div",{style:{display:"inline-block",width:"80%",marginTop:"1%"}},l.a.createElement("small",{style:{display:"inline-block",color:"darkgrey"}},e.isPerMonth?"Per Month":"For ".concat(d," Months")),l.a.createElement("br",null)))),l.a.createElement("br",null),l.a.createElement("br",null))})),l.a.createElement("center",null,l.a.createElement("button",{type:"submit",className:"overlay-button",style:{backgroundColor:"#006CFF",color:"white",width:"90%"}},"Create"))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(P,{style:{transition:".3s ease"},visible:k,height:25},l.a.createElement("center",null,l.a.createElement("div",{className:"fas",style:{color:"#07ab0a",fontSize:90,marginTop:"5%"}},"\uf00c"))))};var A=function(e){var t=Object(n.useState)(),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(),m=Object(i.a)(s,2),u=m[0],d=m[1],f=e.location.state||[];return r?l.a.createElement(M.a,{push:!0,to:{pathname:r,state:u}}):l.a.createElement("div",null,l.a.createElement(o.a,{bg:"primary",variant:"dark",fixed:"top"},l.a.createElement(o.a.Brand,{className:"mx-auto"},l.a.createElement("h3",null,l.a.createElement("b",null,"Rent")))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h3",null,l.a.createElement("b",{className:"fas"},"\uf543"),l.a.createElement("b",null,"\xa0\xa0Summary")),l.a.createElement("small",{style:{display:"inline-block",color:"darkgrey"}},"".concat(v()(f[0].invoice.billing_start,"YYYY-MM").format("MMMM, YYYY")," to ").concat(v()(f[0].invoice.billing_end,"YYYY-MM").format("MMMM, YYYY")))),l.a.createElement("br",null),f.map((function(e,t){return l.a.createElement("div",{className:"container",key:t,style:{cursor:"pointer"},onClick:function(){d(e),c("/invoice")}},l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("b",{className:"fas",style:{display:"inline-block",width:"10%",margin:"-1% 1% 2% 3%",fontSize:"40px",color:"#0e8587"}},"\uf570"),l.a.createElement("div",{style:{marginLeft:"5%"}},l.a.createElement("small",{style:{display:"inline-block"}},e.person.profile.name),l.a.createElement("h4",{style:{marginTop:"-1%"}},l.a.createElement("b",{className:"fas",style:{fontSize:20}},"\uf156"),"\xa0",l.a.createElement("b",null,e.invoice.sum)))))})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("button",{className:"overlay-button",style:{backgroundColor:"#006CFF",color:"white",width:"90%"},onClick:function(){return c("/")}},"Done")),l.a.createElement("br",null),l.a.createElement("br",null))},H=a(4),V=new k,G=["","One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine ","Ten ","Eleven ","Twelve ","Thirteen ","Fourteen ","Fifteen ","Sixteen ","Seventeen ","Eighteen ","Nineteen "],W=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],U=function(e){if((e=e.toString()).length>9)return"overflow";var t=("000000000"+e).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);if(t){var a="";return a+=0!==Number(t[3])?(G[Number(t[3])]||W[t[3][0]]+" "+G[t[3][1]])+"Thousand ":"",a+=0!==Number(t[4])?(G[Number(t[4])]||W[t[4][0]]+" "+G[t[4][1]])+"Hundred ":"",a+=0!==Number(t[5])?(""!==a?"and ":"")+(G[Number(t[5])]||W[t[5][0]]+" "+G[t[5][1]])+"only. ":""}},J=H.d.create({page:{padding:"5%"},small:{color:"darkgrey",fontSize:10},id:{position:"absolute",top:"3%",right:"4%"},h1:{fontSize:30,fontWeight:"bold"},table:{display:"table",width:"auto",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0},tr:{margin:"auto",flexDirection:"row"},tcol:{width:"20%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tcell:{margin:"auto",marginTop:5,fontSize:10},total:{fontSize:14,fontWeight:"bold",textAlign:"right"},footer:{textAlign:"center",fontSize:8},sign:{fontSize:10,width:"100%",flexDirection:"row"}});function q(e){var t=e.location.state.invoice,a=e.location.state.person,n=V.parseId(a.id),r="86"===n.building?"BTM 4th Stage, 2nd Block,\nVijaya Bank Layout":"Vinayaka Nagar,\nNyanapanhalli",c=t.prodata.isProdata?t.prodata.days/t.prodata.maxDays:1,i=Math.round(t.sum*c,0),o=function(e){var a=1;return e.isPerHead&&(a*=t.head_count),e.isPerMonth&&(a*=t.months),a};return l.a.createElement(H.b,{width:"100%",height:window.innerHeight},l.a.createElement(H.a,null,l.a.createElement(H.c,{size:"A4",style:J.page},l.a.createElement(H.e,{style:[J.small,J.id]},t.id),l.a.createElement(H.e,{style:J.h1},t.type.charAt(0).toUpperCase()+t.type.slice(1)," Invoice","\n"),l.a.createElement(H.e,{style:J.small},v()(t.date).format("Do MMMM, YYYY")),l.a.createElement(H.f,{style:J.small},l.a.createElement(H.e,null,"\n\n".concat(a.profile.name,"\n").concat(0===n.floor?"G":n.floor,"0").concat(n.door,", #").concat(n.building,",\n").concat(r,", Bengaluru - 560076\n\n\n")),l.a.createElement(H.e,null,"Billing Period: ".concat(v()(t.billing_start,"YYYY-MM").format("MMMM, YYYY")," to ").concat(v()(t.billing_end,"YYYY-MM").format("MMMM, YYYY"),"\nNo of. heads: ").concat(t.head_count,"\n\n\n"))),l.a.createElement(H.f,{style:J.table},l.a.createElement(H.f,{style:J.tr},l.a.createElement(H.f,{style:[J.tcol,{width:"5%"}]},l.a.createElement(H.e,{style:J.tcell},"Sl.")),l.a.createElement(H.f,{style:[J.tcol,{width:"70%"}]},l.a.createElement(H.e,{style:[J.tcell,{justifyContent:"flex-start"}]},"Particulars")),l.a.createElement(H.f,{style:[J.tcol,{width:"10%"}]},l.a.createElement(H.e,{style:J.tcell},"Unit Price (INR)")),l.a.createElement(H.f,{style:[J.tcol,{width:"5%"}]},l.a.createElement(H.e,{style:J.tcell},"Qty")),l.a.createElement(H.f,{style:[J.tcol,{width:"10%"}]},l.a.createElement(H.e,{style:J.tcell},"Net Price (INR)"))),t.particulars.map((function(e,a){return l.a.createElement(H.f,{style:J.tr,key:a},l.a.createElement(H.f,{style:[J.tcol,{width:"5%"}]},l.a.createElement(H.e,{style:J.tcell},a+1)),l.a.createElement(H.f,{style:[J.tcol,{width:"70%",justifyContent:"flex-start"}]},l.a.createElement(H.e,{style:J.tcell},e.item," ",e.isPerMonth?" ( x ".concat(t.months," months)"):""," ",e.isPerHead?" ( x ".concat(t.head_count," heads)"):"",t.prodata.isProdata?"\n(Calculated as per prodata basis for ".concat(t.prodata.days," days: price*(").concat(t.prodata.days,"/").concat(t.prodata.maxDays,"))"):"")),l.a.createElement(H.f,{style:[J.tcol,{width:"10%"}]},l.a.createElement(H.e,{style:J.tcell},e.amount,"/-")),l.a.createElement(H.f,{style:[J.tcol,{width:"5%"}]},l.a.createElement(H.e,{style:J.tcell},o(e))),l.a.createElement(H.f,{style:[J.tcol,{width:"10%"}]},l.a.createElement(H.e,{style:J.tcell},Math.round(e.amount*o(e)*c,0),"/-")))}))),l.a.createElement(H.e,{style:J.total},"\n\n","Net Payable: INR. ",i,"/-"),l.a.createElement(H.e,{style:[J.total,{fontSize:10,position:"relative",top:"-1%"}]},"\n","In Words: Rupees ",U(i)),l.a.createElement(H.f,null,l.a.createElement(H.e,{style:[J.small,J.footer]},"\n\n\n\n\n\n","This is a computer generated invoice and does not require signature while being shared electronically.")))))}function Q(e){var t=e.location.state.person,a=e.location.state.start,n=e.location.state.end,r=e.location.state.type,c=e.location.state.less,i=e.location.state.lessTotal,o=t.advance-i,s=V.getExpectedRent(t,t.payment_history.length).housing,m=V.parseId(t.id),u="86"===m.building?"BTM 4th Stage, 2nd Block,\nVijaya Bank Layout":"Vinayaka Nagar,\nNyanapanhalli",d=function(){return Math.round(s*v()(n).date()/v()(n).daysInMonth(),0)};return"settlement"===r&&(c.forEach((function(e){e.reason.includes(v()().format("MMM YY"))&&(o+=s)})),o-=d()+s),l.a.createElement(H.b,{width:"100%",height:window.innerHeight},l.a.createElement(H.a,null,l.a.createElement(H.c,{size:"A4",style:J.page},l.a.createElement(H.e,{style:J.h1},r.charAt(0).toUpperCase()+r.slice(1)," Invoice","\n"),l.a.createElement(H.e,{style:J.small},v()().format("Do MMMM, YYYY")),l.a.createElement(H.f,{style:J.small},l.a.createElement(H.e,null,"\n\n".concat(t.profile.name,"\n").concat(0===m.floor?"G":m.floor,"0").concat(m.door,", #").concat(m.building,",\n").concat(u,", Bengaluru - 560076\n\n\n")),l.a.createElement(H.e,null,"".concat(r.charAt(0).toUpperCase()+r.slice(1)," Period: ").concat("adjustment"===r?a:v()(t.startdate).format("Do MMMM, YYYY")," to ").concat("adjustment"===r?n:v()(n).format("Do MMMM, YYYY"),"\n\n\n"))),l.a.createElement(H.f,{style:J.table},l.a.createElement(H.f,{style:J.tr},l.a.createElement(H.f,{style:[J.tcol,{width:"5%"}]},l.a.createElement(H.e,{style:J.tcell},"Sl.")),l.a.createElement(H.f,{style:[J.tcol,{width:"65%"}]},l.a.createElement(H.e,{style:[J.tcell,{justifyContent:"flex-start"}]},"Particulars")),l.a.createElement(H.f,{style:[J.tcol,{width:"15%"}]},l.a.createElement(H.e,{style:J.tcell},"Credit (INR)")),l.a.createElement(H.f,{style:[J.tcol,{width:"15%"}]},l.a.createElement(H.e,{style:J.tcell},"Debit (INR)"))),l.a.createElement(H.f,{style:J.tr},l.a.createElement(H.f,{style:[J.tcol,{width:"5%"}]},l.a.createElement(H.e,{style:J.tcell},"1")),l.a.createElement(H.f,{style:[J.tcol,{width:"65%",justifyContent:"flex-start"}]},l.a.createElement(H.e,{style:J.tcell},"Security Deposit")),l.a.createElement(H.f,{style:[J.tcol,{width:"15%"}]},l.a.createElement(H.e,{style:J.tcell},t.advance,"/-")),l.a.createElement(H.f,{style:[J.tcol,{width:"15%"}]},l.a.createElement(H.e,{style:J.tcell}))),c.filter((function(e){return 0!==e.amount&&!e.reason.includes(v()().format("MMM YY"))})).map((function(e,t){return l.a.createElement(H.f,{style:J.tr,key:t},l.a.createElement(H.f,{style:[J.tcol,{width:"5%"}]},l.a.createElement(H.e,{style:J.tcell},t+2)),l.a.createElement(H.f,{style:[J.tcol,{width:"65%",justifyContent:"flex-start"}]},l.a.createElement(H.e,{style:J.tcell},"Less: ",e.reason)),l.a.createElement(H.f,{style:[J.tcol,{width:"15%"}]},l.a.createElement(H.e,{style:J.tcell})),l.a.createElement(H.f,{style:[J.tcol,{width:"15%"}]},l.a.createElement(H.e,{style:J.tcell},e.amount,"/-")))})),"settlement"===r&&l.a.createElement(H.f,{style:J.tr},l.a.createElement(H.f,{style:[J.tcol,{width:"5%"}]},l.a.createElement(H.e,{style:J.tcell},c.filter((function(e){return 0!==e.amount})).length+2)),l.a.createElement(H.f,{style:[J.tcol,{width:"65%",justifyContent:"flex-start"}]},l.a.createElement(H.e,{style:J.tcell},"Less: Rent for ",v()(n).format("MMM YYYY"),"\n","(Calculated as per prodata basis for ",v()(n).date()," days: x ",v()(n).date(),"/",v()(n).daysInMonth(),")")),l.a.createElement(H.f,{style:[J.tcol,{width:"15%"}]},l.a.createElement(H.e,{style:J.tcell})),l.a.createElement(H.f,{style:[J.tcol,{width:"15%"}]},l.a.createElement(H.e,{style:J.tcell},d(),"/-"))),"settlement"===r&&l.a.createElement(H.f,{style:J.tr},l.a.createElement(H.f,{style:[J.tcol,{width:"5%"}]},l.a.createElement(H.e,{style:J.tcell},c.filter((function(e){return 0!==e.amount})).length+3)),l.a.createElement(H.f,{style:[J.tcol,{width:"65%",justifyContent:"flex-start"}]},l.a.createElement(H.e,{style:J.tcell},"Less: Painting (One month rent)")),l.a.createElement(H.f,{style:[J.tcol,{width:"15%"}]},l.a.createElement(H.e,{style:J.tcell})),l.a.createElement(H.f,{style:[J.tcol,{width:"15%"}]},l.a.createElement(H.e,{style:J.tcell},s,"/-")))),l.a.createElement(H.e,{style:J.total},"\n\n","Net ",o>=0?"Receivable":"Payable",": INR. ",o>=0?o:-o,"/-"),l.a.createElement(H.e,{style:[J.total,{fontSize:10,position:"relative",top:"-1%"}]},"\n","In Words: Rupees ",U(o>=0?o:-o)),"settlement"===r&&l.a.createElement(H.f,null,l.a.createElement(H.e,null,"\n\n\n"),l.a.createElement(H.f,{style:[J.sign]},l.a.createElement(H.e,{style:{width:"50%",flexGrow:1,textAlign:"left",paddingLeft:"5%"}},"R. Maqsood"),l.a.createElement(H.e,{style:{width:"50%",flexGrow:1,textAlign:"right",float:"right",paddingRight:"8%"}},t.profile.name))),l.a.createElement(H.f,null,"settlement"!==r&&l.a.createElement(H.e,{style:[J.small,J.footer]},"\n\n\n\n\n\n","This is a computer generated invoice and does not require signature while being shared electronically.")))))}var X=a(258),$=a(41),K=new k;var Z=function(e){var t=Object(n.useState)(),a=Object(i.a)(t,2),r=(a[0],a[1],Object(I.a)()),c=r.register,s=r.handleSubmit,m=Object(n.useState)(!1),u=Object(i.a)(m,2),d=u[0],f=u[1],b=Object(n.useState)(),E=Object(i.a)(b,2),h=E[0],y=E[1],p=Object(n.useState)(!0),g=Object(i.a)(p,2),v=g[0],k=g[1],w=function(t){var a={id:e.location.state,startdate:t.startdate,advance:parseInt(t.advance),base_rent:parseInt(t.base_rent),water:parseInt(t.water),profile:{name:t.name,head_count:parseInt(t.head_count),mobile:t.mobile}};if(function(e){Object.keys(e).forEach((function(t){void 0===e[t]&&k(!1)})),console.log(v)}(a),!v)return!1;K.addUser(t.id,a)};return h?l.a.createElement(M.a,{push:!0,to:{pathname:h}}):l.a.createElement(n.Fragment,null,l.a.createElement("br",null),l.a.createElement(o.a,{bg:"primary",variant:"dark",fixed:"top"},l.a.createElement(o.a.Brand,{className:"mx-auto"},l.a.createElement("h3",null,l.a.createElement("b",null,"Rent")))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h3",null,l.a.createElement("b",{className:"fas"},"\uf234"),l.a.createElement("b",null,"\xa0\xa0Add User"))),l.a.createElement("br",null),l.a.createElement($.a,{style:{marginLeft:"5%",marginRight:"5%"},onSubmit:s((function(e){return w(e)}))},l.a.createElement($.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("div",{style:{display:"inline-block",marginRight:"5%",fontSize:28},className:"fas"},"\uf2bd"),l.a.createElement($.a.Control,{type:"text",placeholder:"Name",ref:c,name:"name",style:{borderBottom:"2px solid darkgrey",borderTop:"none",borderLeft:"none",borderRight:"none"}}))),l.a.createElement("br",null),l.a.createElement($.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("div",{style:{display:"inline-block",marginRight:"6%",fontSize:28},className:"fas"},"\uf073"),l.a.createElement($.a.Control,{type:"date",placeholder:"startdate",ref:c,name:"startdate",style:{borderBottom:"2px solid darkgrey",borderTop:"none",borderLeft:"none",borderRight:"none"}}))),l.a.createElement("br",null),l.a.createElement($.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("div",{style:{display:"inline-block",marginRight:"3%",fontSize:28},className:"fas"},"\uf3d1"),l.a.createElement($.a.Control,{type:"number",placeholder:"Advance",ref:c,name:"advance",style:{borderBottom:"2px solid darkgrey",borderTop:"none",borderLeft:"none",borderRight:"none"}}))),l.a.createElement("br",null),l.a.createElement($.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("div",{style:{display:"inline-block",marginRight:"8%",fontSize:28},className:"fas"},"\uf156"),l.a.createElement($.a.Control,{type:"number",placeholder:"Base Rent",ref:c,name:"base_rent",style:{borderBottom:"2px solid darkgrey",borderTop:"none",borderLeft:"none",borderRight:"none"}}))),l.a.createElement("br",null),l.a.createElement($.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("div",{style:{display:"inline-block",marginRight:"5%",fontSize:28},className:"fas"},"\uf879"),l.a.createElement($.a.Control,{type:"number",placeholder:"Mobile",ref:c,name:"mobile",style:{borderBottom:"2px solid darkgrey",borderTop:"none",borderLeft:"none",borderRight:"none"}}))),l.a.createElement("br",null),l.a.createElement($.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("div",{style:{display:"inline-block",marginRight:"7%",fontSize:28},className:"fas"},"\uf043"),l.a.createElement($.a.Control,{type:"number",placeholder:"Water",ref:c,name:"water",style:{borderBottom:"2px solid darkgrey",borderTop:"none",borderLeft:"none",borderRight:"none"}}))),l.a.createElement("br",null),l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},"\xa0\xa0",l.a.createElement(C,{style:{display:"inline-flex",width:"30%",fontSize:38,paddingLeft:"10%"}},l.a.createElement("div",{className:"fas"},"\uf007")),"\xa0\xa0",l.a.createElement(C,{style:{display:"inline-flex",width:"30%",fontSize:38,paddingLeft:"8%"}},l.a.createElement("div",{className:"fas"},"\uf500")),"\xa0\xa0",l.a.createElement(C,{style:{display:"inline-flex",width:"30%",fontSize:38,paddingLeft:"8%"}},l.a.createElement("div",{className:"fas"},"\uf0c0")),"\xa0\xa0"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null," ",l.a.createElement(X.a,{variant:"primary",onClick:function(){setTimeout((function(){return y("/")}),1500),f(!!v)},type:"submit",size:"lg",block:!0},l.a.createElement("b",null,"Submit")))),l.a.createElement(P,{style:{transition:"1s ease"},visible:d,bgClick:function(){return f(!d)},height:25},l.a.createElement("center",null,l.a.createElement("div",{className:"fas",style:{color:"#07ab0a",fontSize:90,marginTop:"5%"}},"\uf00c"))))},ee=a(255);var te=function(){return l.a.createElement(ee.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(M.b,{exact:!0,path:"/",component:T}),l.a.createElement(M.b,{path:"/details",render:function(e){return l.a.createElement(B,e)}}),l.a.createElement(M.b,{path:"/add-person",render:function(e){return l.a.createElement(Z,e)}}),l.a.createElement(M.b,{path:"/generate-invoice",render:function(e){return l.a.createElement(L,e)}}),l.a.createElement(M.b,{path:"/invoice-summary",render:function(e){return l.a.createElement(A,e)}}),l.a.createElement(M.b,{path:"/invoice",render:function(e){return l.a.createElement(q,e)}}),l.a.createElement(M.b,{path:"/adjustment",render:function(e){return l.a.createElement(Q,e)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[260,1,2]]]);
//# sourceMappingURL=main.6428995e.chunk.js.map