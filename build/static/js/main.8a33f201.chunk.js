(this.webpackJsonprent=this.webpackJsonprent||[]).push([[0],{137:function(e,t,a){},263:function(e,t,a){e.exports=a(455)},268:function(e,t,a){},272:function(e,t,a){},277:function(e,t){},279:function(e,t){},321:function(e,t){},322:function(e,t){},455:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(91),c=a.n(r),i=(a(268),a(16)),o=a(19),s=a(31),m=a.n(s),u=a(46),d=a(244),f=a(262),b=a(260),E=a(51),h=a.n(E),y=(a(269),{apiKey:"AIzaSyBFDTNmvOzGvYgIXwmOJbR8NYTmYd9kGdk",authDomain:"landlord-b68c5.firebaseapp.com",databaseURL:"https://landlord-b68c5.firebaseio.com",projectId:"landlord-b68c5",storageBucket:"landlord-b68c5.appspot.com",messagingSenderId:"18825199721",appId:"1:18825199721:web:da5322c747c82034c322f8",measurementId:"G-XXJHCZ4G3Q"}),p=a(9),g=a.n(p),v=function(e){Object(f.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).refreshCache=function(e,t){var a="/";n.data&&(e&&(a+=e),t&&(a+="/"+t)),h.a.database().ref(a).on("value",function(){var a=Object(u.a)(m.a.mark((function a(l){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n.data||!e){a.next=12;break}if(!t){a.next=7;break}return a.next=4,l.val();case 4:n.data[e][t]=a.sent,a.next=10;break;case 7:return a.next=9,l.val();case 9:n.data[e]=a.sent;case 10:a.next=15;break;case 12:return a.next=14,l.val();case 14:n.data=a.sent;case 15:return localStorage.setItem("rent-db",JSON.stringify(n.data)),a.abrupt("return",new Promise((function(e,t){setTimeout((function(){n.data&&e(n.data)}),200)})));case 17:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},n.get=function(){if(!n.data){var e=localStorage.getItem("rent-db");if(e)n.data=JSON.parse(e);else h.a.database().ref("/").on("value",function(){var e=Object(u.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.val();case 2:return n.data=e.sent,localStorage.setItem("rent-db",JSON.stringify(n.data)),e.abrupt("return",new Promise((function(e,t){setTimeout((function(){n.data&&e(n.data)}),200)})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},n.persons=function(e){n.data||n.get();var t=[];return Object.keys(n.data).forEach((function(a){e?a.split("_")[0]===e&&(n.data[a].isEmpty||t.push(n.data[a])):n.data[a].isEmpty||t.push(n.data[a])})),t},n.profiles=function(e){n.data||n.get();var t=[];return Object.keys(n.data).forEach((function(a){e?a.split("_")[0]===e&&(n.data[a].isEmpty||t.push(n.data[a].profile)):n.data[a].isEmpty||t.push(n.data[a].profile)})),t},n.parseId=function(e){n.data||n.get();var t=e.split("_");if(e)return t.length?{building:t[0],floor:parseInt(t[1]),door:parseInt(t[2])}:void 0},n.updateUser=function(e,t,a){e&&a&&(Array.isArray(a)?h.a.database().ref(e+"/"+t).set(a,(function(t){return new Promise((function(a,l){t&&l(t),a(n.refreshCache(e))}))})):h.a.database().ref(e+"/"+t).once("value").then((function(l){l.val()?h.a.database().ref(e+"/"+t).update(a,(function(t){return new Promise((function(a,l){t&&l(t),a(n.refreshCache(e))}))})):h.a.database().ref(e+"/"+t).set(a,(function(t){return new Promise((function(a,l){t&&l(t),a(n.refreshCache(e))}))}))})))},n.getExpectedRent=function(e,t){for(var a=[],l=0,r=g()(e.startdate);r.isSameOrBefore(g()().add(1,"M"))&&!r.isAfter(g()());r.add(1,"M").startOf("month")){l=e.renewals?e.renewals.slice(-1)[0].increase:0;var c=Math.floor(a.length/11),i={housing:Math.floor(e.base_rent*Math.pow(1+l/100,c)),others:0};e.invoices&&(i.others+=n.getInvoiceSum(e,r.month()-1));if(a.length+1===t)return i;a.push(i)}return a},n.getDues=function(e,t,a,l){var r=n.getExpectedRent(e),c=[{housing:0,others:0}];e.payment_history&&(c=Object(o.a)(e.payment_history));for(var i={housing:0,others:0};c.length!==r.length;)c.push({housing:0,others:0});var s={housing:0,others:0};return c.forEach((function(e,t){var a={housing:r[t].housing-e.housing,others:r[t].others-e.others};i.housing+=a.housing,i.others+=a.others,t===l&&(s=a)})),l&&(i=s),t?a?0===i.housing&&0===i.others:0===i.housing:a?i:i.housing},n.getPaidRent=function(e,t){var a=n.getExpectedRent(e),l=[{housing:0,others:0}];for(e.payment_history&&(l=Object(o.a)(e.payment_history));l.length!==a.length;)l.push({housing:0,others:0});return t?l[t]||{housing:0,others:0}:l},n.getLess=function(e,t){var a=0,l=[];return n.getExpectedRent(e).forEach((function(t,r){var c=n.getDues(e,!1,!0,r+1);l.push({month:r+1,amount:c.housing+c.others,reason:"Rent ".concat(c.others>0?"& Utilities ":""," - ").concat(g()(e.startdate).add(r+1,"M").format("MMM YY"))}),a+=c.housing+c.others})),t?a:l},n.addUser=function(e,t){if(n.data||n.get(),!n.data[e])return!1;h.a.database().ref("/"+e).set(t,(function(t){return new Promise((function(a,l){t&&l(t),a(n.refreshCache(e))}))}))},n.getNickname=function(e){return e?e.nickname?e.nickname:e.name.split(" ")[0]:"undefined"},n.deleteUser=function(e,t){if(!Object.keys(n.data).find(e))return!0;h.a.database().ref(e).remove().catch((function(e){return console.log(e),!1}))},n.addPay=function(e,t,a){var l=e.payment_history||[];return t>l.length?l.push(a):l[t-1]=a,n.updateUser(e.id,"payment_history",l)},n.getNextRenewal=function(e){var t=e.renewals;return console.log(t),void 0!==t&&t.length>0?{date:g()(t.slice(-1)[0].date).add(11,"M"),increase:t.slice(-1)[0].increase}:{date:g()(e.startdate,"YYYY-MM-DD",!0).add(11,"M"),increase:0}},n.getBuildings=function(){n.data||n.get();var e=[];return Object.keys(n.data).forEach((function(t,a){e.push(n.parseId(t).building)})),Object(o.a)(new Set(e))},n.getFloors=function(e){n.data||n.get();var t=[];return Object.keys(n.data).forEach((function(a,l){n.parseId(a).building===e&&t.push(n.parseId(a).floor)})),Object(o.a)(new Set(t)).reverse()},n.getDoors=function(e,t){n.data||n.get();var a=[];return Object.keys(n.data).forEach((function(l,r){n.parseId(l).building===e&&n.parseId(l).floor===parseInt(t)&&a.push(n.parseId(l).door)})),Object(o.a)(new Set(a))},n.generateInvoiceId=function(e){var t=n.parseId(e.id),a="I-".concat(t.building.padStart(2,"0")).concat(t.floor).concat(t.door,"-").concat(e.profile.mobile.slice(-4),"-").concat(g()().format("YYYYMMDD"),"-");if(e.invoices){var l=function(){var t=e.invoices.filter((function(e){return e.date===g()().format("YYYY-MM-DD")})),n=0,l="";do{l=(++n).toString().padStart(2,"0")}while(t.find((function(e){return e.id===a+l})));return{v:a+l}}();if("object"===typeof l)return l.v}return a+"01"},n.addInvoice=function(e,t){var a=e.invoices||[];return a.push(t),n.updateUser(e.id,"invoices",a)},n.getInvoiceSum=function(e,t){var a=e.invoices||[],n=0;return a.forEach((function(e){t?t===g()(e.billing_end,"YYYY-MM").month()+1&&(n+=e.sum||0):n+=e.sum||0})),n},h.a.apps.length||(h.a.initializeApp(y),n.get()),n}return a}(l.a.Component),M=(a(137),a(22)),k=a(181),Y=(a(272),function(e){return l.a.createElement("div",{className:"circle-container",style:e.style,onClick:e.onClick},l.a.createElement("div",{className:e.small?"circle-sm":"circle",style:e.condition?{backgroundColor:e.color[0]}:{backgroundColor:e.color[1]}},l.a.createElement("center",null,l.a.createElement("b",{className:"fas"},e.condition?e.icon[0]:e.icon[1]))),e.title?l.a.createElement("p",{style:e.titleStyle||{}},e.title):null)}),N=function(e){return l.a.createElement("div",{className:"circle-container",style:e.style,onClick:e.onClick},l.a.createElement("div",{className:e.small?"circle-sm":"circle",style:{backgroundColor:e.invert?"white":e.color||"darkgrey"}},l.a.createElement("center",null,l.a.createElement("b",{className:"fas",style:{color:e.invert?e.color:"white"}},e.icon))),l.a.createElement("br",null),e.title?l.a.createElement("p",{style:e.titleStyle||{}},e.title):null)},w=function(e){return l.a.createElement("div",{style:{overflow:"scroll",height:"100%"}},l.a.createElement("div",{className:"vertical-timeline",content:"\uf067",style:{height:"".concat(17*e.content.length,"%")}},e.content.map((function(e,t){return l.a.createElement("div",{key:t,className:"vertical-timeline-container"},l.a.createElement("div",{className:"content"},l.a.createElement("h5",null,e.title),l.a.createElement("div",{style:{marginBottom:"5%"}},e.subtitle)))}))))},O=function(e){return l.a.createElement("div",{className:"horizontal-timeline"},e.content.map((function(e,t){return l.a.createElement("div",{key:t,className:"horizontal-timeline-container",onClick:e.onClick,style:{cursor:e.onClick?"pointer":"default"}},l.a.createElement("div",{className:"content"},l.a.createElement("h5",null,e.title),l.a.createElement("p",null,e.subtitle)))})))},j=function(e){return l.a.createElement("div",{className:"horizontal-timeline",content:"\uf067"},e.content.map((function(t,a){return l.a.createElement("div",{key:a,className:"horizontal-timeline-container"},l.a.createElement("div",{className:"content"},l.a.createElement("h5",null,t.title),l.a.createElement("p",null,t.subtitle),l.a.createElement(Y,{small:!0,color:e.color,icon:e.icon,style:{position:"relative",top:-70,zIndex:1},condition:e.conditionArray[a]})))})))},S=function(e){return l.a.createElement("div",{style:{overflow:"scroll",height:"100%"}},l.a.createElement("div",{className:"vertical-timeline",content:"\uf067",style:{height:"".concat(17*e.content.length,"%")}},e.content.map((function(t,a){return l.a.createElement("div",{key:a,className:"vertical-timeline-container"},l.a.createElement("div",{className:"content",style:{color:"white",width:"130%"}},l.a.createElement("h5",null,t.title),l.a.createElement("div",{style:{marginBottom:"5%"}},t.subtitle),l.a.createElement(Y,{small:!0,color:e.color,icon:e.icon,style:{position:"absolute",top:-78,zIndex:1,marginLeft:"88%"},condition:e.conditionArray[a-1]||!1})))}))))},C=function(e){return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"overlay",onClick:e.bgClick,style:{opacity:!0===e.visible?1:0,display:!0===e.visible?"block":"none"}}),l.a.createElement("div",{className:"sliding-overlay-container",style:{bottom:"".concat(-e.height+e.height*(!0===e.visible?1:0),"%"),height:"".concat(e.height,"%")}},e.children))},x=function(e){return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"overlay",onClick:e.bgClick,style:{opacity:!0===e.visible?1:0,display:!0===e.visible?"block":"none"}}),l.a.createElement("center",null,l.a.createElement("div",{className:"overlay-container",style:{display:!0===e.visible?"block":"none",height:"".concat(e.height,"%"),top:"".concat((100-e.height)/2,"%")}},e.children)))},P=function(e){return l.a.createElement(n.Fragment,null,l.a.createElement(k.a,{bg:"primary",variant:"dark",fixed:"top"},l.a.createElement(k.a.Brand,{className:"mx-auto",style:{display:"inline-flex"},onClick:e.onClick},l.a.createElement("img",{src:"favicon/icon-transparent.png",height:26,width:26,alt:"logo",style:{margin:"2% 5% 0 -5%"}}),l.a.createElement("h3",null,l.a.createElement("b",null,"Rent Tracker")))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))},_=a(258),I=a(72),z=a(4),T=new v,D=["","One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine ","Ten ","Eleven ","Twelve ","Thirteen ","Fourteen ","Fifteen ","Sixteen ","Seventeen ","Eighteen ","Nineteen "],R=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],F=function(e){if((e=e.toString()).length>9)return"overflow";var t=("000000000"+e).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);if(t){var a="";return a+=0!==Number(t[3])?(D[Number(t[3])]||R[t[3][0]]+" "+D[t[3][1]])+"Thousand ":"",a+=0!==Number(t[4])?(D[Number(t[4])]||R[t[4][0]]+" "+D[t[4][1]])+"Hundred ":"",a+=0!==Number(t[5])?(""!==a?"and ":"")+(D[Number(t[5])]||R[t[5][0]]+" "+D[t[5][1]])+"only. ":""}},B=z.d.create({page:{padding:"5%"},small:{color:"darkgrey",fontSize:10},id:{position:"absolute",top:"3%",right:"4%"},h1:{fontSize:30,fontWeight:"bold"},table:{display:"table",width:"auto",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0},tr:{margin:"auto",flexDirection:"row"},tcol:{width:"20%",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},tcell:{margin:"auto",marginTop:5,fontSize:10},total:{fontSize:14,fontWeight:"bold",textAlign:"right"},footer:{textAlign:"center",fontSize:8},sign:{fontSize:10,width:"100%",flexDirection:"row"}});function A(e){if(!e.invoice||!e.person)return null;var t=e.invoice,a=e.person,n=T.parseId(a.id),r="86"===n.building?"BTM 4th Stage, 2nd Block,\nVijaya Bank Layout":"Vinayaka Nagar,\nNyanapanhalli",c=t.prodata.isProdata?t.prodata.days/t.prodata.maxDays:1,i=Math.round(t.sum*c,0),o=function(e){var a=1;return e.isPerHead&&(a*=t.head_count),e.isPerMonth&&(a*=t.months),a};return l.a.createElement(z.a,null,l.a.createElement(z.c,{size:"A4",style:B.page},l.a.createElement(z.e,{style:[B.small,B.id]},t.id),l.a.createElement(z.e,{style:B.h1},t.type.charAt(0).toUpperCase()+t.type.slice(1)," Invoice","\n"),l.a.createElement(z.e,{style:B.small},g()(t.date).format("Do MMMM, YYYY")),l.a.createElement(z.f,{style:B.small},l.a.createElement(z.e,null,"\n\n".concat(a.profile.name,"\n").concat(0===n.floor?"G":n.floor,"0").concat(n.door,", #").concat(n.building,",\n").concat(r,", Bengaluru - 560076\n\n\n")),l.a.createElement(z.e,null,"Billing Period: ".concat(g()(t.billing_start,"YYYY-MM").format("MMMM, YYYY")," to ").concat(g()(t.billing_end,"YYYY-MM").format("MMMM, YYYY"),"\nNo of. heads: ").concat(t.head_count,"\n\n\n"))),l.a.createElement(z.f,{style:B.table},l.a.createElement(z.f,{style:B.tr},l.a.createElement(z.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(z.e,{style:B.tcell},"Sl.")),l.a.createElement(z.f,{style:[B.tcol,{width:"70%"}]},l.a.createElement(z.e,{style:[B.tcell,{justifyContent:"flex-start"}]},"Particulars")),l.a.createElement(z.f,{style:[B.tcol,{width:"10%"}]},l.a.createElement(z.e,{style:B.tcell},"Unit Price (INR)")),l.a.createElement(z.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(z.e,{style:B.tcell},"Qty")),l.a.createElement(z.f,{style:[B.tcol,{width:"10%"}]},l.a.createElement(z.e,{style:B.tcell},"Net Price (INR)"))),t.particulars.map((function(e,a){return l.a.createElement(z.f,{style:B.tr,key:a},l.a.createElement(z.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(z.e,{style:B.tcell},a+1)),l.a.createElement(z.f,{style:[B.tcol,{width:"70%",justifyContent:"flex-start"}]},l.a.createElement(z.e,{style:B.tcell},e.item," ",e.isPerMonth?" ( x ".concat(t.months," months)"):""," ",e.isPerHead?" ( x ".concat(t.head_count," heads)"):"",t.prodata.isProdata?"\n(Calculated as per prodata basis for ".concat(t.prodata.days," days: price*(").concat(t.prodata.days,"/").concat(t.prodata.maxDays,"))"):"")),l.a.createElement(z.f,{style:[B.tcol,{width:"10%"}]},l.a.createElement(z.e,{style:B.tcell},e.amount,"/-")),l.a.createElement(z.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(z.e,{style:B.tcell},o(e))),l.a.createElement(z.f,{style:[B.tcol,{width:"10%"}]},l.a.createElement(z.e,{style:B.tcell},Math.round(e.amount*o(e)*c,0),"/-")))}))),l.a.createElement(z.e,{style:B.total},"\n\n","Net Payable: INR. ",i,"/-"),l.a.createElement(z.e,{style:[B.total,{fontSize:10,position:"relative",top:"-1%"}]},"\n","In Words: Rupees ",F(i)),l.a.createElement(z.f,null,l.a.createElement(z.e,{style:[B.small,B.footer]},"\n\n\n\n\n\n","This is a computer generated invoice and does not require signature while being shared electronically."))))}function V(e){if(!e.person)return null;var t=e.person,a=e.start,n=e.end,r=e.type,c=e.less,i=e.lessTotal,o=t.advance-i,s=T.getExpectedRent(t,t.payment_history?t.payment_history.length:1).housing,m=T.parseId(t.id),u="86"===m.building?"BTM 4th Stage, 2nd Block,\nVijaya Bank Layout":"Vinayaka Nagar,\nNyanapanhalli",d=function(){return Math.round(s*g()(n).date()/g()(n).daysInMonth(),0)};return"settlement"===r&&(c.forEach((function(e){e.reason.includes(g()().format("MMM YY"))&&(o+=s)})),o-=d()+s),l.a.createElement(z.a,null,l.a.createElement(z.c,{size:"A4",style:B.page},l.a.createElement(z.e,{style:B.h1},r.charAt(0).toUpperCase()+r.slice(1)," Invoice","\n"),l.a.createElement(z.e,{style:B.small},g()().format("Do MMMM, YYYY")),l.a.createElement(z.f,{style:B.small},l.a.createElement(z.e,null,"\n\n".concat(t.profile.name,"\n").concat(0===m.floor?"G":m.floor,"0").concat(m.door,", #").concat(m.building,",\n").concat(u,", Bengaluru - 560076\n\n\n")),l.a.createElement(z.e,null,"".concat(r.charAt(0).toUpperCase()+r.slice(1)," Period: ").concat("adjustment"===r?a:g()(t.startdate).format("Do MMMM, YYYY")," to ").concat("adjustment"===r?n:g()(n).format("Do MMMM, YYYY"),"\n\n\n"))),l.a.createElement(z.f,{style:B.table},l.a.createElement(z.f,{style:B.tr},l.a.createElement(z.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(z.e,{style:B.tcell},"Sl.")),l.a.createElement(z.f,{style:[B.tcol,{width:"65%"}]},l.a.createElement(z.e,{style:[B.tcell,{justifyContent:"flex-start"}]},"Particulars")),l.a.createElement(z.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(z.e,{style:B.tcell},"Credit (INR)")),l.a.createElement(z.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(z.e,{style:B.tcell},"Debit (INR)"))),l.a.createElement(z.f,{style:B.tr},l.a.createElement(z.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(z.e,{style:B.tcell},"1")),l.a.createElement(z.f,{style:[B.tcol,{width:"65%",justifyContent:"flex-start"}]},l.a.createElement(z.e,{style:B.tcell},"Security Deposit")),l.a.createElement(z.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(z.e,{style:B.tcell},t.advance,"/-")),l.a.createElement(z.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(z.e,{style:B.tcell}))),c.filter((function(e){return 0!==e.amount&&!e.reason.includes(g()().format("MMM YY"))})).map((function(e,t){return l.a.createElement(z.f,{style:B.tr,key:t},l.a.createElement(z.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(z.e,{style:B.tcell},t+2)),l.a.createElement(z.f,{style:[B.tcol,{width:"65%",justifyContent:"flex-start"}]},l.a.createElement(z.e,{style:B.tcell},"Less: ",e.reason)),l.a.createElement(z.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(z.e,{style:B.tcell})),l.a.createElement(z.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(z.e,{style:B.tcell},e.amount,"/-")))})),"settlement"===r&&l.a.createElement(z.f,{style:B.tr},l.a.createElement(z.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(z.e,{style:B.tcell},c.filter((function(e){return 0!==e.amount})).length+2)),l.a.createElement(z.f,{style:[B.tcol,{width:"65%",justifyContent:"flex-start"}]},l.a.createElement(z.e,{style:B.tcell},"Less: Rent for ",g()(n).format("MMM YYYY"),"\n","(Calculated as per prodata basis for ",g()(n).date()," days: x ",g()(n).date(),"/",g()(n).daysInMonth(),")")),l.a.createElement(z.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(z.e,{style:B.tcell})),l.a.createElement(z.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(z.e,{style:B.tcell},d(),"/-"))),"settlement"===r&&l.a.createElement(z.f,{style:B.tr},l.a.createElement(z.f,{style:[B.tcol,{width:"5%"}]},l.a.createElement(z.e,{style:B.tcell},c.filter((function(e){return 0!==e.amount})).length+3)),l.a.createElement(z.f,{style:[B.tcol,{width:"65%",justifyContent:"flex-start"}]},l.a.createElement(z.e,{style:B.tcell},"Less: Painting (One month rent)")),l.a.createElement(z.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(z.e,{style:B.tcell})),l.a.createElement(z.f,{style:[B.tcol,{width:"15%"}]},l.a.createElement(z.e,{style:B.tcell},s,"/-")))),l.a.createElement(z.e,{style:B.total},"\n\n","Net ",o>=0?"Receivable":"Payable",": INR. ",o>=0?o:-o,"/-"),l.a.createElement(z.e,{style:[B.total,{fontSize:10,position:"relative",top:"-1%"}]},"\n","In Words: Rupees ",F(o>=0?o:-o)),"settlement"===r&&l.a.createElement(z.f,null,l.a.createElement(z.e,null,"\n\n\n"),l.a.createElement(z.f,{style:[B.sign]},l.a.createElement(z.e,{style:{width:"50%",flexGrow:1,textAlign:"left",paddingLeft:"5%"}},"R. Maqsood"),l.a.createElement(z.e,{style:{width:"50%",flexGrow:1,textAlign:"right",float:"right",paddingRight:"8%"}},t.profile.name))),l.a.createElement(z.f,null,"settlement"!==r&&l.a.createElement(z.e,{style:[B.small,B.footer]},"\n\n\n\n\n\n","This is a computer generated invoice and does not require signature while being shared electronically."))))}var L=new v;var H=function(e){var t=Object(n.useState)(),a=Object(i.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(),s=Object(i.a)(o,2),m=s[0],u=s[1],d=Object(n.useState)(!1),f=Object(i.a)(d,2),b=f[0],E=f[1],h=Object(n.useState)(),y=Object(i.a)(h,2),p=y[0],v=y[1],k=Object(n.useState)(!1),w=Object(i.a)(k,2),O=w[0],j=w[1],S=Object(I.a)(),T=S.register,D=S.getValues,R=S.handleSubmit,F=Object(n.useState)(0),B=Object(i.a)(F,2),A=B[0],H=B[1],W=Object(n.useState)(!1),G=Object(i.a)(W,2),U=G[0],J=G[1],q=Object(n.useState)(),X=Object(i.a)(q,2),Q=X[0],$=X[1],K=Object(n.useState)(!1),Z=Object(i.a)(K,2),ee=Z[0],te=Z[1];Object(n.useEffect)((function(){L.refreshCache()}),[]);var ae=function(){var e=[];return L.data&&L.persons().map((function(t,a){return L.getNextRenewal(t).date.isBetween(g()().subtract(1,"M"),g()().add(7,"M"),"M")?e.push({i:a,name:t.profile.name,date:L.getNextRenewal(t).date.format("Do MMMM, YYYY"),increase:L.getNextRenewal(t).increase}):null})),e},ne=function(e){var t=g()().diff(g()(e.startdate).startOf("month"),"months")+1;return void 0!==e.payment_history?{i:t-1,month:g()().subtract(t-e.payment_history.length-1,"M").startOf("month"),amount:L.getExpectedRent(e,t)}:{i:0,month:g()(e.startdate),amount:L.getExpectedRent(e,1)}},le=function(){var e=0,t=0;return L.persons().forEach((function(a){var n=ne(a),l=L.getPaidRent(a,n.i).housing||0;e+=l,t+=0===l?L.getExpectedRent(a,n.i+1).housing:l})),{current:e,total:t,percent:e/t*100}}(),re=function(){j(!1),H(0)};return r?l.a.createElement(M.a,{push:!0,to:{pathname:r,state:m}}):l.a.createElement("div",null,l.a.createElement(P,null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf662"),"\xa0\xa0",g()().format("MMMM")),l.a.createElement("div",{className:"container"},L.data&&L.getBuildings().reverse().map((function(e,t){return l.a.createElement(n.Fragment,{key:t},L.persons(e).filter((function(e){return!e.isEmpty})).map((function(e,a){return l.a.createElement(n.Fragment,{key:t+a},l.a.createElement(Y,{title:L.getNickname(e.profile),condition:ne(e).month.isAfter(g()()),onClick:function(){u(e),c("/details")},color:["#07ab0a","darkgrey"],icon:["\uf00c","\uf00d"]}),l.a.createElement("br",{style:a%3===2?{display:"block"}:{display:"none"}}))})),t!==L.getBuildings().length-1?l.a.createElement("hr",{style:{marginTop:"-1%",marginBottom:"6%"}}):null)})))),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf4c0"),"\xa0\xa0Collected")),l.a.createElement("div",{className:"container"},l.a.createElement("center",null,l.a.createElement("br",null),l.a.createElement("h2",null,l.a.createElement("b",{className:"fas",style:{fontSize:26}},"\uf156"),"\xa0\xa0",le.current),l.a.createElement(_.a,{now:le.percent,style:{borderRadius:"25px",margin:"5% 0",width:"95%"}}),l.a.createElement("small",{style:{display:"inline-block",width:"40%",color:"darkgrey"}},"out of ",le.total)),l.a.createElement("br",null)),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf1da"),"\xa0\xa0Upcoming Renewals")),l.a.createElement("div",{className:"container"},L.data&&ae().map((function(e,t){return l.a.createElement(n.Fragment,{key:t},l.a.createElement("div",{style:{display:"inline-flex",width:"100%",marginLeft:"2%",cursor:"pointer"}},l.a.createElement("div",{style:{display:"inline-block",width:"20%",marginRight:"8%"}},l.a.createElement(N,{color:"#5e09b8",icon:"\uf007"})),l.a.createElement("div",{style:{display:"inline-block",width:"80%",marginTop:"1.5%"}},l.a.createElement("b",null,e.name),l.a.createElement("br",null),e.date)),t!==ae().length-1?l.a.createElement("hr",{style:{marginTop:"-3%"}}):null)}))),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf0c0"),"\xa0\xa0Tennants")),l.a.createElement("div",{className:"container"},L.data&&L.getBuildings().reverse().map((function(e,t){return l.a.createElement(n.Fragment,{key:t},L.getFloors(e).map((function(t,a){return l.a.createElement(n.Fragment,{key:a},l.a.createElement("div",{className:"floor-label-container"},l.a.createElement("center",null,l.a.createElement("b",{className:"floor-label"},0===t?"G":t))),l.a.createElement("div",{className:"floor"},L.getDoors(e,t).map((function(n,r){return L.data["".concat(e,"_").concat(t,"_").concat(n)].isEmpty?l.a.createElement("div",{key:r,onClick:function(){u("".concat(e,"_").concat(t,"_").concat(n)),c("/add-person")},style:{width:"".concat(100/L.getDoors(e,t).length,"%"),backgroundColor:"lightgrey"},className:"door"},l.a.createElement("center",null,l.a.createElement("b",{className:"door-label",style:{color:"#777"}},l.a.createElement("b",{className:"fas"},"\uf52a")),l.a.createElement("p",{className:"door-subtitle",style:{color:"#777"}},"Empty"))):l.a.createElement("div",{key:r,onClick:function(){v({building:e,floor:t,door:n}),E(!0)},style:{width:"".concat(100/L.getDoors(e,t).length,"%"),backgroundColor:"hsl(".concat(48-2*(a+r),", ").concat((a+r+1)/L.getDoors(e,t).length*80+15,"%, ").concat((a+r)/L.getDoors(e,t).length*13+74,"%)")},className:"door"},l.a.createElement("center",null,l.a.createElement("b",{className:"door-label"},l.a.createElement("b",{className:"fas"},"\uf52a")),l.a.createElement("p",{className:"door-subtitle"},L.getNickname(L.data["".concat(e,"_").concat(t,"_").concat(n)].profile))))}))),l.a.createElement("br",null))})),t!==L.getBuildings().length-1?l.a.createElement("hr",null):null)}))),l.a.createElement("br",null),l.a.createElement("br",null),p&&l.a.createElement(x,{visible:b,bgClick:function(){return E(!b)},height:25},l.a.createElement("h3",null,l.a.createElement("b",null,L.data["".concat(p.building,"_").concat(p.floor,"_").concat(p.door)].profile.name)),"".concat(0===p.floor?"G":p.floor,"0").concat(p.door,", #").concat(p.building),l.a.createElement("br",null),"Since "+g()(L.data["".concat(p.building,"_").concat(p.floor,"_").concat(p.door)].startdate).format("Do MMM, YYYY"),l.a.createElement("br",null),l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#ED0034"},onClick:function(){return J(!0)}},"Vacate")),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf543"),"\xa0\xa0Invoices")),l.a.createElement("div",{className:"container"},l.a.createElement("center",null,l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#006CFF"},onClick:function(){return j(!0)}},"Create New"),l.a.createElement("br",null),l.a.createElement("br",null))),l.a.createElement(C,{visible:O,bgClick:function(){return re()},height:48},l.a.createElement("b",{className:"fas",style:{fontSize:22,float:"right"},onClick:function(){return re()}},"\uf00d"),l.a.createElement("br",null),l.a.createElement("form",{onSubmit:R((function(e){u(e),c("/generate-invoice")}))},l.a.createElement("center",null,l.a.createElement("div",{style:{display:"inline-block",width:"420%",transition:".2s ease",marginLeft:"".concat(-2-104*A,"%"),position:"relative",zIndex:10}},l.a.createElement("div",{style:{display:"inline-block",width:"20%"}},l.a.createElement("h3",null,l.a.createElement("b",null,"Electricity")),l.a.createElement("p",{style:{marginTop:"-2%"}},"Stairs & Pump"),l.a.createElement("br",null),l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"eb",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:850,ref:T,className:"editable-label-input"})),l.a.createElement("div",{style:{display:"inline-block",marginLeft:"5%",width:"20%"}},l.a.createElement("h3",{style:{marginBottom:"-1%"}},l.a.createElement("b",null,"Other Charges")),l.a.createElement("input",{name:"other1-title",style:{display:"inline-block",fontSize:16,fontWeight:"normal"},defaultValue:"Other Expense 1",ref:T,className:"editable-label-input"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"other1-amount",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:0,ref:T,className:"editable-label-input"})),l.a.createElement("div",{style:{display:"inline-block",marginLeft:"5%",width:"20%"}},l.a.createElement("h3",{style:{marginBottom:"-1%"}},l.a.createElement("b",null,"Other Charges")),l.a.createElement("input",{name:"other2-title",style:{display:"inline-block",fontSize:16,fontWeight:"normal"},defaultValue:"Other Expense 2",ref:T,className:"editable-label-input"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"other2-amount",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:0,ref:T,className:"editable-label-input"})),l.a.createElement("div",{style:{display:"inline-block",marginLeft:"5%",width:"20%"}},l.a.createElement("h3",{style:{marginBottom:"-1%"}},l.a.createElement("b",null,"Other Charges")),l.a.createElement("input",{name:"other3-title",style:{display:"inline-block",fontSize:16,fontWeight:"normal"},defaultValue:"Other Expense 3",ref:T,className:"editable-label-input"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"other3-amount",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:0,ref:T,className:"editable-label-input"})))),l.a.createElement("b",{className:"fas",onClick:function(){return H(3===A?0:A+1)},style:{fontSize:22,float:"right",marginRight:"5%",marginTop:"-15%",position:"relative",zIndex:15}},"\uf1b2"),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("button",{className:"overlay-button",style:{marginTop:"5%",color:"#006CFF"},type:"submit"},"Next")))),l.a.createElement(x,{visible:U,bgClick:function(){return J(!U)},height:25},l.a.createElement("h3",null,l.a.createElement("b",null,"Vacating Date")),l.a.createElement("input",{name:"vacate-date",className:"editable-label-input",type:"date",style:{backgroundColor:"white",color:"black",fontSize:16},defaultValue:g()().endOf("month").format("YYYY-MM-DD"),ref:T}),ee?l.a.createElement(z.b,{document:l.a.createElement(V,Q),fileName:"".concat(L.data["".concat(p.building,"_").concat(p.floor,"_").concat(p.door)].profile.name," Settlement.pdf"),style:{textDecoration:"none",color:"black"}},(function(e){e.blob,e.url;var t=e.loading;e.error;return t?l.a.createElement(n.Fragment,null):l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#00A4BC"}},"Settlement")})):l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#00A4BC"},onClick:function(){$({person:L.data["".concat(p.building,"_").concat(p.floor,"_").concat(p.door)],end:D("vacate-date"),type:"settlement",less:L.getLess(L.data["".concat(p.building,"_").concat(p.floor,"_").concat(p.door)]),lessTotal:L.getLess(L.data["".concat(p.building,"_").concat(p.floor,"_").concat(p.door)],!0)}),te(!0)}},"Settle"),l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#ED0034"},onClick:function(){L.updateUser("".concat(p.building,"_").concat(p.floor,"_").concat(p.door),"",{isEmpty:!0}),L.refreshCache(),c("/")}},"Vacate")),l.a.createElement("br",null),l.a.createElement("br",null))},W=new v;var G=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),m=Object(i.a)(s,2),u=m[0],d=m[1],f=Object(n.useState)(!1),b=Object(i.a)(f,2),E=b[0],h=b[1],y=Object(n.useState)(!1),p=Object(i.a)(y,2),v=p[0],M=p[1],k=Object(n.useState)(!1),Y=Object(i.a)(k,2),_=Y[0],T=Y[1],D=Object(n.useState)(!1),R=Object(i.a)(D,2),F=R[0],B=R[1],L=Object(n.useState)([]),H=Object(i.a)(L,2),G=H[0],U=H[1],J=Object(I.a)(),q=J.register,X=J.getValues,Q=J.setValue,$=Object(n.useState)(),K=Object(i.a)($,2),Z=K[0],ee=K[1],te=Object(n.useState)(!1),ae=Object(i.a)(te,2),ne=ae[0],le=ae[1],re=e.location.state,ce=W.parseId(re.id),ie=function(){c(!1),M(!1)},oe=void 0!==re.payment_history?{i:re.payment_history.length,month:g()(re.startdate).add(re.payment_history.length,"M").startOf("month"),amount:W.getExpectedRent(re,re.payment_history.length)}:{i:0,month:g()(re.startdate),amount:W.getExpectedRent(re,1)},se=Object(n.useState)(oe),me=Object(i.a)(se,2),ue=me[0],de=me[1],fe=W.getPaidRent(re),be=W.getLess(re),Ee=W.getLess(re,!0);return console.log(W.getNextRenewal(re)),l.a.createElement("div",null,l.a.createElement(P,null),l.a.createElement("div",{style:{display:"inline-flex",width:"95%",marginLeft:"2%",cursor:"pointer"}},l.a.createElement("div",{style:{display:"inline-block",width:"20%",marginRight:"8%"}},l.a.createElement(N,{color:"#5e09b8",icon:"\uf007",style:{marginLeft:"50%"}})),l.a.createElement("div",{style:{display:"inline-block",width:"80%",marginTop:"1%",marginLeft:"5%"}},l.a.createElement("h3",{style:{marginBottom:"-2%"}},re.profile.name),l.a.createElement("small",{style:{display:"inline-block",width:"40%",color:"darkgrey"}},"".concat(0===ce.floor?"G":ce.floor,"0").concat(ce.door,", #").concat(ce.building)),l.a.createElement("br",null))),l.a.createElement("div",{className:"container"},l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("b",{className:"fas",style:{display:"inline-block",width:"10%",margin:"-1% 1% 2% 3%",fontSize:"40px",color:"#f03050"}},"\uf073"),l.a.createElement("div",{style:{marginLeft:"5%"}},l.a.createElement("small",{style:{display:"inline-block",width:"40%",color:"darkgrey"}},"Since"),l.a.createElement("h4",{style:{marginTop:"-1%"}},l.a.createElement("b",null,g()(re.startdate).format("Do MMMM, YYYY")))))),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf1da"),"\xa0\xa0Rent History")),l.a.createElement("div",{className:"container",onClick:function(){return d(!0)}},void 0!==re.payment_history?l.a.createElement(j,{content:fe.map((function(e,t){return{title:g()(re.startdate).add(t,"M").format("MMM"),subtitle:e.housing}})).slice(-3),conditionArray:fe.map((function(e){return 0!==e.housing})).slice(-3),color:["#07ab0a","darkgrey"],icon:["\uf00c","\uf00d"]}):null),l.a.createElement(C,{visible:u,height:85,bgClick:function(){return d(!1)}},l.a.createElement("b",{className:"fas",style:{fontSize:20,float:"right"},onClick:function(){return d(!u)}},"\uf00d"),l.a.createElement("br",null),void 0!==re.payment_history?l.a.createElement(S,{content:fe.map((function(e,t){return{title:g()(re.startdate).add(t,"M").format("MMM YY"),subtitle:l.a.createElement("div",null,l.a.createElement("b",{className:"fas"},"\uf015")," ",e.housing,"\xa0\xa0\xa0\xa0",l.a.createElement("b",{className:"fas"},"\uf1b2")," ",e.others)}})),conditionArray:fe.map((function(e){return 0!==e.housing})),color:["#07ab0a","darkgrey"],icon:["\uf00c","\uf00d"]}):null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf3d1"),"\xa0\xa0Returnable Advance")),l.a.createElement("div",{className:"container",onClick:function(){return h(!0)}},l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h2",null,l.a.createElement("b",{className:"fas",style:{fontSize:26}},"\uf156"),l.a.createElement("b",null,"\xa0",re.advance-Ee))),l.a.createElement("br",null),l.a.createElement("div",{style:{color:"darkgrey",fontSize:14}},be.filter((function(e){return 0!==e.amount})).map((function(e,t){return l.a.createElement(n.Fragment,{key:t},l.a.createElement("b",{className:"fas",style:{marginRight:"3%"}},"\uf06a"),e.reason,l.a.createElement("br",null))})).slice(-2).reverse(),l.a.createElement("button",{className:"btn btn-link",style:{margin:"-2% 0 0 -4%"},onClick:function(){return h(!0)}},l.a.createElement("small",null,be.filter((function(e){return 0!==e.amount})).length," more..")))),l.a.createElement("br",null),l.a.createElement(C,{visible:E,height:85,bgClick:function(){return h(!1)}},l.a.createElement("b",{className:"fas",style:{fontSize:20,float:"right"},onClick:function(){return h(!E)}},"\uf00d"),l.a.createElement("br",null),l.a.createElement(w,{content:be.filter((function(e){return 0!==e.amount})).map((function(e){return{title:e.reason,subtitle:-e.amount}}))})),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf251"),"\xa0\xa0Renewals")),l.a.createElement("div",{className:"container"},l.a.createElement(O,{content:[].concat(Object(o.a)(re.renewals||[]),[W.getNextRenewal(re)]).map((function(e){return{title:g()(e.date).format("MMM"),subtitle:g()(e.date).format("YYYY")}}))}),l.a.createElement("center",null,l.a.createElement("button",{className:"btn btn-link",onClick:function(){return B(!0)}},"Adjust Advance"))),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},"\uf543"),"\xa0\xa0Invoices")),l.a.createElement("div",{className:"container"},void 0!==re.invoices?l.a.createElement(O,{content:re.invoices.map((function(e,t){return{title:g()(e.billing_end,"YYYY-MM").format("MMM"),subtitle:e.sum,onClick:function(){ee({person:re,invoice:e}),le(!0)}}})).slice(-3)}):null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(N,{color:"#006CFF",icon:"\uf067",style:{position:"fixed",bottom:"1%",right:"2%"},onClick:function(){return c(!0)}}),l.a.createElement(C,{visible:r,bgClick:function(){return ie()},height:48},l.a.createElement("b",{className:"fas",style:{fontSize:22,float:"right"},onClick:function(){return ie()}},"\uf00d"),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("h3",{style:{marginLeft:"5%"}},l.a.createElement("b",null,v?"Utilities":l.a.createElement("span",{onClick:function(){return U(W.getExpectedRent(re)),void T(!_)}},"Rent ".concat(ue.month.format("MMMM"))))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{style:{display:"inline-block",width:"210%",transition:".2s ease",marginLeft:v?"-115%":"4%",position:"relative",zIndex:10}},l.a.createElement("div",{style:{display:"inline-block",width:"45%"}},l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"housing-payment",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:ue.amount.housing,ref:q,className:"editable-label-input"})),l.a.createElement("div",{style:{display:"inline-block",marginLeft:"10%",width:"45%"}},l.a.createElement("b",{className:"fas",style:{fontSize:30,display:"inline-block"}},"\uf156"),l.a.createElement("input",{name:"other-payment",style:{display:"inline-block"},type:"number",pattern:"[0-9]*",defaultValue:ue.amount.others,ref:q,className:"editable-label-input"})))),l.a.createElement("b",{className:"fas",onClick:function(){return M(!v)},style:{fontSize:22,float:"right",marginRight:"5%",marginTop:"-15%",position:"relative",zIndex:15}},"\uf1b2"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("button",{className:"overlay-button",onClick:function(){W.addPay(re,ue.i+1,{housing:parseInt(X("housing-payment")),others:parseInt(X("other-payment"))}),ie()},style:{color:"#006CFF"}},"Save"))),l.a.createElement(x,{visible:_,bgClick:function(){return T(!_)},height:40},l.a.createElement("div",{style:{display:"inline-block",width:"100%",overflow:"scroll"}},G.length>0&&G.map((function(e,t){return l.a.createElement(n.Fragment,{key:t},g()(re.startdate).add(t,"M").startOf("month").isSame(ue.month,"month")?l.a.createElement("button",{className:"overlay-button-mx",key:t,style:{margin:"2% 1%"},onClick:function(){de({i:t,month:g()(re.startdate).add(t,"M").startOf("month"),amount:e}),Q("housing-payment",ue.amount.housing),Q("other-payment",ue.amount.others),T(!1)}},g()(re.startdate).add(t,"M").format("MMM YY")):l.a.createElement("span",{className:"overlay-button-mx-light",key:t,onClick:function(){de({i:t,month:g()(re.startdate).add(t,"M").startOf("month"),amount:e}),Q("housing-payment",ue.amount.housing),Q("other-payment",ue.amount.others),T(!1)}},g()(re.startdate).add(t,"M").format("MMM YY")),t%3===2?l.a.createElement("br",null):null)})))),l.a.createElement(x,{visible:F,bgClick:function(){return B(!F)},height:25},l.a.createElement("div",{style:{display:"inline-block",width:"100%",overflow:"scroll"}},re.renewals?[re.startdate].concat(Object(o.a)(re.renewals)).map((function(e,t){return l.a.createElement(n.Fragment,{key:t},l.a.createElement("button",{className:"overlay-button-mx-light",key:t,onClick:function(){ee({person:re,type:"adjustment",less:be,lessTotal:Ee,start:g()(e).format("MMMM YYYY"),end:t===re.renewals.length?g()().format("MMMM YYYY"):g()(re.renewals[t+1].date).format("MMMM YYYY")}),le(!0)}},g()(e).format("MMM YY")," - ",t===re.renewals.length?g()().format("MMM YY"):g()(re.renewals.slice(-1)[0].date).format("MMM YY")),l.a.createElement("br",null))})):l.a.createElement("button",{className:"overlay-button-mx-light",style:{margin:"2% 1%"},onClick:function(){ee({person:re,type:"adjustment",less:be,lessTotal:Ee,start:g()(re.startdate).format("MMMM YYYY"),end:g()().format("MMMM YYYY")}),le(!0)}},g()(re.startdate).format("MMM YY")," - ",g()().format("MMM YY")))),ne&&l.a.createElement(x,{visible:ne,bgClick:function(){return le(!ne)},height:25},l.a.createElement("div",{style:{display:"inline-block",width:"100%",overflow:"scroll"}},l.a.createElement("h3",null,l.a.createElement("b",null,"adjustment"===Z.type?"Adjustment Invoice":"Utilities Invoice")),"adjustment"===Z.type?"".concat(Z.start," - ").concat(Z.end):"".concat(g()(Z.invoice.billing_start,"YYYY-MM").format("MMMM, YYYY")," - ").concat(g()(Z.invoice.billing_end,"YYYY-MM").format("MMMM, YYYY")),l.a.createElement(z.b,{document:"adjustment"===Z.type?l.a.createElement(V,Z):l.a.createElement(A,Z),fileName:"".concat(re.profile.name," ").concat("adjustment"===Z.type?"Adjustment ":"").concat(g()().format("YYYY-MM-DD"),".pdf"),style:{textDecoration:"none",color:"black"}},(function(e){e.blob,e.url;var t=e.loading;e.error;return t?l.a.createElement(n.Fragment,null):l.a.createElement("button",{className:"overlay-button-mx",style:{marginTop:"5%",backgroundColor:"#00A4BC"}},"Download")})))))},U=a(26),J=new v;var q=function(e){var t=Object(I.a)(),a=t.register,r=t.getValues,c=t.handleSubmit,s=Object(n.useState)(3),m=Object(i.a)(s,2),u=m[0],d=m[1],f=Object(n.useState)(),b=Object(i.a)(f,2),E=b[0],h=b[1],y=Object(n.useState)(!1),p=Object(i.a)(y,2),v=p[0],k=p[1],w=Object(n.useState)(),O=Object(i.a)(w,2),j=O[0],S=O[1],C=Object(n.useState)(),_=Object(i.a)(C,2),z=_[0],T=_[1],D=function(){var e=4;return J.persons().forEach((function(t){e+=t.profile.head_count||0})),e}(),R=function(){var e=1;return J.persons().forEach((function(t){e+=t.profile.isEmpty?0:1})),e}(),F=e.location.state;Object(n.useEffect)((function(){var e=[{title:"Stairs & Pump",value:parseInt(F.eb),fieldname:"eb",icon:"\uf0e7",isShared:!0,isPerHead:!1},{title:"Water +/-",value:0,valueTemplate:"water",fieldname:"water",icon:"\ue005",isPPB:!0,isPerHead:!0,perPersonValue:[]},{title:"Garbage +/-",value:60,fieldname:"garbage",icon:"\uf1f8"}];Array.from(["1","2","3"]).forEach((function(t){"0"!==F["other".concat(t,"-amount")]&&e.push({title:F["other".concat(t,"-title")],value:parseInt(F["other".concat(t,"-amount")]),icon:"\uf1b2",fieldname:"other".concat(t),isShared:!0,isPerHead:!0})})),e.forEach((function(e,t){e.isPerMonth=!1,e.isPPB?J.persons().forEach((function(t){t[e.valueTemplate]&&e.perPersonValue.push({id:t.id,value:e.isPerHead?t[e.valueTemplate]*(t.profile.head_count||0):t[e.valueTemplate]})})):e.isShared&&(e.value/=e.isPerHead?D:R),e.value=Math.round(e.value,0)||0})),h(e)}),[F,D,R]);var B=function(e,t){h((function(a){var n=a[e];return n.isPPB?(n=Object(U.a)(Object(U.a)({},n),{},{value:n.value+t,perPersonValue:n.perPersonValue.map((function(e){return{id:e.id,value:e.value+t}}))}),Array.from([].concat(Object(o.a)(a.slice(0,e)),[n],Object(o.a)(a.slice(e+1))))):(n=n.isShared?n.isPerHead?Object(U.a)(Object(U.a)({},n),{},{value:n.value+t*D}):Object(U.a)(Object(U.a)({},n),{},{value:n.value+t*R}):Object(U.a)(Object(U.a)({},n),{},{value:n.value+t}),Array.from([].concat(Object(o.a)(a.slice(0,e)),[n],Object(o.a)(a.slice(e+1)))))}))};return j?l.a.createElement(M.a,{push:!0,to:{pathname:j,state:z}}):l.a.createElement("div",null,l.a.createElement(P,null),l.a.createElement("center",null,l.a.createElement("h3",null,l.a.createElement("b",{className:"fas"},"\uf543"),l.a.createElement("b",null,"\xa0\xa0New Invoice")),l.a.createElement("input",{name:"billing-start",style:{display:"inline-block",fontSize:16,fontWeight:"normal",backgroundColor:"#fafafa",color:"grey"},defaultValue:g()().subtract(3,"M").format("YYYY-MM"),type:"month",ref:a,onChange:function(){return d(g()(r("billing-end"),"YYYY-MM").diff(g()(r("billing-start"),"YYYY-MM"),"months")+1)},className:"editable-label-input"}),l.a.createElement("input",{name:"billing-end",style:{display:"inline-block",fontSize:16,fontWeight:"normal",backgroundColor:"#fafafa",color:"grey"},defaultValue:g()().subtract(1,"M").format("YYYY-MM"),type:"month",ref:a,onChange:function(){return d(g()(r("billing-end")).diff(g()(r("billing-start")),"months")+1)},className:"editable-label-input"})),l.a.createElement("br",null),l.a.createElement("form",{onSubmit:c((function(e){return function(e){var t=[];J.persons().forEach((function(a){var n={date:g()().format("YYYY-MM-DD"),id:J.generateInvoiceId(a),head_count:a.profile.head_count||1,type:"utilities",months:g()(e["billing-end"]).diff(e["billing-start"],"months")+1,billing_start:e["billing-start"],billing_end:e["billing-end"],sum:0,particulars:[]};E.forEach((function(e,t){var l={item:e.title.replace(" +/-",""),isPerHead:e.isPerHead||!1,isPerMonth:e.isPerMonth};if(e.isPPB){var r=e.perPersonValue.find((function(e){return e.id===a.id}))||{value:0};l.amount=r.value}else l.amount=e.value;if(l.isPerHead&&(l.amount/=n.head_count),l.amount=Math.round(l.amount,0),l.amount>0){var c=l.amount;c*=l.isPerHead?n.head_count:1,c*=l.isPerMonth?n.months:1,n.sum+=c,n.particulars.push(l)}}));var l=g()().diff(g()(a.startdate),"days");n.prodata=l<30?{isProdata:!0,days:l,maxDays:g()(a.startdate).daysInMonth()}:{isProdata:!1},J.addInvoice(a,n),t.push({person:a,invoice:n})})),k(!0),T(t),setTimeout((function(){return S("invoice-summary")}),500)}(e)}))},E&&E.map((function(e,t){return l.a.createElement(n.Fragment,{key:t},l.a.createElement("center",null,l.a.createElement("h4",null,l.a.createElement("b",{className:"fas"},e.icon),"\xa0\xa0",e.title)),l.a.createElement("div",{className:"container"},l.a.createElement("center",null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("center",null,e.title.includes("+/-")&&l.a.createElement(N,{small:!0,icon:"\uf068",style:{margin:"0 5%",display:"inline-block"},onClick:function(){return B(t,-10)}}),l.a.createElement("input",{name:e.fieldname,style:{display:"inline-block",color:"black",backgroundColor:"white"},type:"number",pattern:"[0-9]*",value:e.value,ref:a,className:"editable-label-input",readOnly:!0}),e.title.includes("+/-")&&l.a.createElement(N,{small:!0,icon:"\uf067",style:{margin:"0 5%",display:"inline-block"},onClick:function(){return B(t,10)}}))),l.a.createElement("small",{style:{display:"inline-block",width:"40%",color:"darkgrey"}},e.isPerHead?"per head":e.isShared?"per house":""),l.a.createElement("br",null),l.a.createElement("br",null),e.isPPB&&l.a.createElement("div",{style:{display:"inline-block",width:"80%"}},e.perPersonValue.map((function(e,t){return l.a.createElement(N,{key:e.id,small:!0,color:"#5e09b8",icon:"\uf007",title:e.value||"0",titleStyle:{color:"darkgrey"},style:{margin:"0 4%"}})})))),e.isShared&&l.a.createElement("div",{style:{display:"inline-flex",width:"40%",margin:"0 2% 3% 0"}},l.a.createElement("div",{style:{display:"inline-block",width:"20%",marginRight:"8%"}},l.a.createElement(Y,{small:!0,condition:e.isPerHead,onClick:function(){return function(e){h((function(t){var a=t[e];return(a=void 0!==a.isPerHead?Object(U.a)(Object(U.a)({},a),{},{isPerHead:!a.isPerHead}):Object(U.a)(Object(U.a)({},a),{},{isPerHead:!0})).isPPB?J.persons().forEach((function(e){e[a.valueTemplate]&&(a=Object(U.a)(Object(U.a)({},a),{},{perPersonValue:[].concat(Object(o.a)(a.perPersonValue),[{id:e.id,value:a.isPerHead?e[a.valueTemplate]*(e.profile.head_count||0):e[a.valueTemplate]}])}))})):a=a.isShared?a.isPerHead?Object(U.a)(Object(U.a)({},a),{},{value:a.value*R/D}):Object(U.a)(Object(U.a)({},a),{},{value:a.value*D/R}):Object(U.a)(Object(U.a)({},a),{},{value:0}),a=Object(U.a)(Object(U.a)({},a),{},{value:Math.round(a.value,0)}),Array.from([].concat(Object(o.a)(t.slice(0,e)),[a],Object(o.a)(t.slice(e+1))))}))}(t)},color:["#006CFF","#c20808"],icon:["\uf0c0","\ue065"]})),l.a.createElement("div",{style:{display:"inline-block",width:"80%",marginTop:"1%"}},l.a.createElement("small",{style:{display:"inline-block",color:"darkgrey"}},e.isPerHead?"Split Per Head":"Per House"),l.a.createElement("br",null))),u>1&&l.a.createElement("div",{style:{display:"inline-flex",width:"40%",margin:"0 2% 3% 0"}},l.a.createElement("div",{style:{display:"inline-block",width:"20%",marginRight:"8%"}},l.a.createElement(Y,{small:!0,condition:e.isPerMonth,onClick:function(){return function(e){h((function(t){var a=t[e];return a=void 0!==a.isPerMonth?Object(U.a)(Object(U.a)({},a),{},{isPerMonth:!a.isPerMonth}):Object(U.a)(Object(U.a)({},a),{},{isPerMonth:!0}),Array.from([].concat(Object(o.a)(t.slice(0,e)),[a],Object(o.a)(t.slice(e+1))))}))}(t)},color:["#de3ea1","#4bbde3"],icon:["\uf073","\uf133"]})),l.a.createElement("div",{style:{display:"inline-block",width:"80%",marginTop:"1%"}},l.a.createElement("small",{style:{display:"inline-block",color:"darkgrey"}},e.isPerMonth?"Per Month":"For ".concat(u," Months")),l.a.createElement("br",null)))),l.a.createElement("br",null),l.a.createElement("br",null))})),l.a.createElement("center",null,l.a.createElement("button",{type:"submit",className:"overlay-button",style:{backgroundColor:"#006CFF",color:"white",width:"90%"}},"Create"))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(x,{style:{transition:".3s ease"},visible:v,height:25},l.a.createElement("center",null,l.a.createElement("div",{className:"fas",style:{color:"#07ab0a",fontSize:90,marginTop:"5%"}},"\uf00c"))))};var X=function(e){var t=Object(n.useState)(),a=Object(i.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(),s=Object(i.a)(o,2),m=s[0],u=s[1],d=e.location.state||[];return r?l.a.createElement(M.a,{from:e.location.pathname,exact:!0,to:{pathname:r,state:m}}):l.a.createElement("div",null,l.a.createElement(P,null),l.a.createElement("center",null,l.a.createElement("h3",null,l.a.createElement("b",{className:"fas"},"\uf543"),l.a.createElement("b",null,"\xa0\xa0Summary")),l.a.createElement("small",{style:{display:"inline-block",color:"darkgrey"}},"".concat(g()(d[0].invoice.billing_start,"YYYY-MM").format("MMMM, YYYY")," to ").concat(g()(d[0].invoice.billing_end,"YYYY-MM").format("MMMM, YYYY")))),l.a.createElement("br",null),d.map((function(e,t){return l.a.createElement(z.b,{document:l.a.createElement(A,e),fileName:"".concat(e.person.profile.name," ").concat(g()().format("YYYY-MM-DD"),".pdf"),key:t,style:{textDecoration:"none",color:"black"}},(function(t){t.blob,t.url;var a=t.loading;t.error;return a?l.a.createElement(n.Fragment,null):l.a.createElement("div",{className:"container",style:{cursor:"pointer"},onClick:function(){u(e),c("/invoice")}},l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("b",{className:"fas",style:{display:"inline-block",width:"10%",margin:"-1% 1% 2% 3%",fontSize:"40px",color:"#0e8587",textDecoration:"none"}},"\uf570"),l.a.createElement("div",{style:{marginLeft:"5%"}},l.a.createElement("small",{style:{display:"inline-block",textDecoration:"none",color:"darkgrey"}},e.person.profile.name),l.a.createElement("h4",{style:{marginTop:"-1%",textDecoration:"none",color:"black"}},l.a.createElement("b",{className:"fas",style:{fontSize:20,textDecoration:"none",color:"black"}},"\uf156"),"\xa0",l.a.createElement("b",null,e.invoice.sum)))))}))})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("button",{className:"overlay-button",style:{backgroundColor:"#006CFF",color:"white",width:"90%"},onClick:function(){return c("/")}},"Done")),l.a.createElement("br",null),l.a.createElement("br",null))},Q=a(40),$=a(261),K=a(93),Z=new v;var ee=function(e){var t=Object(I.a)(),a=t.register,r=t.handleSubmit,c=Object(n.useState)(!1),o=Object(i.a)(c,2),s=o[0],m=o[1],u=Object(n.useState)(),d=Object(i.a)(u,2),f=d[0],b=d[1],E=Object(n.useState)(1),h=Object(i.a)(E,2),y=h[0],p=h[1];return f?l.a.createElement(M.a,{push:!0,to:{pathname:f}}):l.a.createElement(n.Fragment,null,l.a.createElement(P,null),l.a.createElement("center",null,l.a.createElement("h3",null,l.a.createElement("b",{className:"fas"},"\uf234"),l.a.createElement("b",null,"\xa0\xa0New Tennant"))),l.a.createElement("br",null),l.a.createElement(Q.a,{style:{padding:"5% 8%"},onSubmit:r((function(t){return function(t){var a={id:e.location.state,startdate:t.startdate,advance:parseInt(t.advance),base_rent:parseInt(t.base_rent),water:parseInt(t.water),profile:{name:t.name,nickname:t.shortname,head_count:y,mobile:t.mobile},payment_history:[{housing:parseInt(t.base_rent),others:0}],isEmpty:!1},n=!0;Object.keys(t).forEach((function(e){t[e].length<1&&(n=!1)})),n&&(Z.addUser(a.id,a),m(!0),Z.refreshCache(),setTimeout((function(){return b("/")}),500))}(t)}))},l.a.createElement("center",null,l.a.createElement(Q.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("div",{className:"input-icon fas",style:{fontSize:24}},"\uf2c2"),l.a.createElement(Q.a.Control,{type:"text",placeholder:"Name",ref:a,name:"name",className:"textfield"}))),l.a.createElement("br",null),l.a.createElement(Q.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("div",{className:"input-icon fas",style:{fontSize:24}},"\uf2c1"),l.a.createElement(Q.a.Control,{type:"text",placeholder:"Short Name",ref:a,name:"shortname",className:"textfield"}))),l.a.createElement("br",null),l.a.createElement(Q.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"47%"}},l.a.createElement("div",{className:"input-icon fas",style:{fontSize:24}},"\uf073"),l.a.createElement(Q.a.Control,{type:"date",placeholder:"Start Date",ref:a,name:"startdate",className:"textfield",defaultValue:g()().startOf("month").format("YYYY-MM-DD")})),"\xa0\xa0\xa0\xa0",l.a.createElement("div",{style:{display:"inline-flex",width:"47%"}},l.a.createElement("div",{className:"input-icon fas",style:{fontSize:24}},"\uf043"),l.a.createElement(Q.a.Control,{type:"number",placeholder:"Water",ref:a,name:"water",className:"textfield"}))),l.a.createElement("br",null),l.a.createElement(Q.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"47%"}},l.a.createElement("div",{className:"input-icon fas",style:{fontSize:24}},"\uf3d1"),l.a.createElement(Q.a.Control,{type:"number",placeholder:"Advance",ref:a,name:"advance",className:"textfield"})),"\xa0\xa0\xa0\xa0",l.a.createElement("div",{style:{display:"inline-flex",width:"47%"}},l.a.createElement("div",{className:"input-icon fas",style:{fontSize:24}},"\uf156"),l.a.createElement(Q.a.Control,{type:"number",placeholder:"Rent",ref:a,name:"base_rent",className:"textfield"}))),l.a.createElement("br",null),l.a.createElement(Q.a.Group,null,l.a.createElement("div",{style:{display:"inline-flex",width:"100%"}},l.a.createElement("div",{className:"input-icon fas",style:{fontSize:24}},"\uf879"),l.a.createElement(Q.a.Control,{type:"number",placeholder:"Mobile",ref:a,name:"mobile",className:"textfield"}))),l.a.createElement("br",null),l.a.createElement($.a,{type:"radio",name:"options",defaultValue:y},l.a.createElement(K.a,{variant:"light",name:"head_count",onClick:function(){return p(1)},value:1},l.a.createElement("div",{className:"fas",style:{fontSize:28}},"\uf007")),l.a.createElement(K.a,{variant:"light",name:"head_count",onClick:function(){return p(2)},value:2},l.a.createElement("div",{className:"fas",style:{fontSize:28}},"\uf500")),l.a.createElement(K.a,{variant:"light",name:"head_count",onClick:function(){return p(3)},value:3},l.a.createElement("div",{className:"fas",style:{fontSize:28}},"\uf0c0"))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("button",{className:"overlay-button-mx",type:"submit",style:{width:"100%"}},"Add Tennant")," ")),l.a.createElement(x,{style:{transition:".3s ease"},visible:s,bgClick:function(){return m(!s)},height:25},l.a.createElement("center",null,l.a.createElement("div",{className:"fas",style:{color:"#07ab0a",fontSize:90,marginTop:"5%"}},"\uf00c"))))},te=a(259);var ae=function(){return l.a.createElement(te.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(M.b,{exact:!0,path:"/",component:H}),l.a.createElement(M.b,{path:"/details",render:function(e){return l.a.createElement(G,e)}}),l.a.createElement(M.b,{path:"/add-person",render:function(e){return l.a.createElement(ee,e)}}),l.a.createElement(M.b,{path:"/generate-invoice",render:function(e){return l.a.createElement(q,e)}}),l.a.createElement(M.b,{path:"/invoice-summary",render:function(e){return l.a.createElement(X,e)}}),l.a.createElement(M.b,{path:"/invoice",render:function(e){return l.a.createElement(A,e)}}),l.a.createElement(M.b,{path:"/adjustment",render:function(e){return l.a.createElement(V,e)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[263,1,2]]]);
//# sourceMappingURL=main.8a33f201.chunk.js.map