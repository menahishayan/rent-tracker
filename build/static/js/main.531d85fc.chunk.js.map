{"version":3,"sources":["config.js","DB.js","Components.js","Invoice.js","Main.js","Details.js","GenerateInvoice.js","InvoicesSummary.js","AddPerson.js","App.js","serviceWorker.js","index.js"],"names":["config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","DB","props","refreshCache","id","item","path","data","firebase","database","ref","on","snapshot","a","val","localStorage","setItem","JSON","stringify","Promise","resolve","reject","setTimeout","get","cache","getItem","parse","persons","building","array","console","log","Object","keys","forEach","split","isEmpty","push","profiles","profile","parseId","idParts","length","floor","parseInt","door","updateUser","Array","isArray","set","error","once","then","update","getExpectedRent","person","month","expectedRent","increaserentby","s","moment","startdate","isSameOrBefore","add","isAfter","startOf","renewals","slice","increase","year","Math","expectedSubTotal","housing","base_rent","pow","others","invoices","getInvoiceSum","getDues","returnStatusOnly","getAllItems","paidRent","payment_history","dueTotal","returnValue","p","i","due_i","getPaidRent","getLess","getSum","sum","less","e","dueForMonth","amount","reason","format","addUser","getNickname","nickname","name","deleteUser","find","remove","catch","addPay","payment","getNextRenewal","r","undefined","date","getBuildings","Set","getFloors","reverse","getDoors","generateInvoiceId","padStart","mobile","filter","index","indexString","toString","addInvoice","invoice","billing_end","apps","initializeApp","React","Component","CircleCondition","className","style","onClick","small","condition","backgroundColor","color","icon","title","titleStyle","Circle","invert","VerticalTimeline","overflow","height","content","map","key","marginBottom","subtitle","HorizontalTimeline","cursor","HorizontalTimelineConditional","position","top","zIndex","conditionArray","VerticalTimelineConditional","width","marginLeft","SlidingOverlay","bgClick","opacity","visible","display","bottom","children","Overlay","Header","Navbar","bg","variant","fixed","Brand","src","alt","margin","db","b","inWords","num","n","substr","match","str","Number","styles","StyleSheet","create","page","padding","fontSize","right","h1","fontWeight","table","borderStyle","borderWidth","borderRightWidth","borderBottomWidth","tr","flexDirection","tcol","borderLeftWidth","borderTopWidth","tcell","marginTop","total","textAlign","footer","sign","Invoice","address","proDataMultiplier","prodata","isProdata","days","maxDays","round","getQty","qty","isPerHead","head_count","isPerMonth","months","size","type","charAt","toUpperCase","billing_start","justifyContent","particulars","Adjustment","start","end","lessTotal","advance","rent","finalRent","daysInMonth","l","includes","flexGrow","paddingLeft","float","paddingRight","Main","useState","redirect","setRedirect","redirectProps","setRedirectProps","tennantOverlay","setTennantOverlay","selectedTennant","setSelectedTennant","ebOverlay","setEBOverlay","useForm","register","getValues","handleSubmit","editOtherAmount","setEditOtherAmount","vacateOverlay","setVacateOverlay","invoiceProps","setInvoiceProps","settleDownloadOverlay","setSettleDownloadOverlay","useEffect","generateRenewalsList","isBetween","subtract","getNextPayment","diff","totalCollection","sumRent","sumExpectedRent","paid","current","percent","getTotalCollection","resetEBOverlay","to","pathname","state","ProgressBar","now","borderRadius","marginRight","f","d","onSubmit","transition","pattern","defaultValue","endOf","document","fileName","textDecoration","blob","url","loading","Details","showAddPayOverlay","setShowAddPayOverlay","showHistoryOverlay","setShowHistoryOverlay","showAdvanceOverlay","setShowAdvanceOverlay","showMonthPicker","setShowMonthPicker","adjustmentOverlay","setAdjustmentOverlay","availableMonths","setAvailableMonths","setValue","invoiceOverlay","setInvoiceOverlay","location","resetAddPayOverlay","nextPayment","selectedMonth","setSelectedMonth","ai","isSame","ri","GenerateInvoice","setMonths","formContent","setFormContent","successOverlay","setSuccessOverlay","heads","getHeads","houses","getHouses","items","initContent","value","eb","fieldname","isShared","valueTemplate","isPPB","perPersonValue","from","o","step","v","onChange","generatedInvoices","personInvoice","replace","ppvForPerson","pv","itemSum","generate","readOnly","vi","updateHS","updatePerMonth","InvoicesSummary","exact","AddPerson","addpersonOverlay","setaddpersonOverlay","headCount","setHeadCount","Form","water","shortname","isValid","submitHandler","Group","Control","placeholder","ToggleButtonGroup","ToggleButton","App","component","render","Boolean","window","hostname","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.531d85fc.chunk.js","sourcesContent":["const config = {\napiKey: \"AIzaSyBFDTNmvOzGvYgIXwmOJbR8NYTmYd9kGdk\",\n    authDomain: \"landlord-b68c5.firebaseapp.com\",\n    databaseURL: \"https://landlord-b68c5.firebaseio.com\",\n    projectId: \"landlord-b68c5\",\n    storageBucket: \"landlord-b68c5.appspot.com\",\n    messagingSenderId: \"18825199721\",\n    appId: \"1:18825199721:web:da5322c747c82034c322f8\",\n    measurementId: \"G-XXJHCZ4G3Q\"\n}\n\nexport default config;\n","import firebase from 'firebase/app';\nimport 'firebase/database';\nimport config from './config';\nimport moment from 'moment';\nimport React from 'react';\n\nclass DB extends React.Component {\n   constructor(props) {\n      super(props)\n      // eslint-disable-next-line no-unused-vars\n      var data;\n      if (!firebase.apps.length) {\n         firebase.initializeApp(config);\n         this.get()\n      }\n   }\n\n   refreshCache = (id, item) => {\n      let path = '/'\n      if (this.data) {\n         if (id) path += id\n         if (item) path += '/' + item\n      }\n      let ref = firebase.database().ref(path);\n      ref.on('value', async (snapshot) => {\n         if (this.data && id) {\n            if (item) this.data[id][item] = await snapshot.val()\n            else this.data[id] = await snapshot.val()\n         } else this.data = await snapshot.val()\n         localStorage.setItem('rent-db', JSON.stringify(this.data));\n         return new Promise((resolve, reject) => {\n            setTimeout(() => {\n               if (this.data) resolve(this.data)\n            }, 200)\n         })\n      })\n   }\n\n   get = () => {\n      if (!this.data) {\n         let cache = localStorage.getItem('rent-db');\n         if (cache)\n            this.data = JSON.parse(cache)\n         else {\n            let ref = firebase.database().ref('/');\n            ref.on('value', async (snapshot) => {\n               this.data = await snapshot.val()\n               localStorage.setItem('rent-db', JSON.stringify(this.data));\n               return new Promise((resolve, reject) => {\n                  setTimeout(() => {\n                     if (this.data) resolve(this.data)\n                  }, 200)\n               })\n            })\n         }\n      }\n   }\n\n   persons = (building) => {\n      if (!this.data) this.get()\n      let array = []\n\t  console.log(this.data)\n      Object.keys(this.data).forEach(id => {\n         if (building) {\n            if (id.split(\"_\")[0] === building)\n               if (!this.data[id].isEmpty) array.push(this.data[id])\n         } else if (!this.data[id].isEmpty) array.push(this.data[id])\n      });\n\n      return array\n   }\n\n   profiles = (building) => {\n      if (!this.data) this.get()\n      let array = []\n\n      Object.keys(this.data).forEach(id => {\n         if (building) {\n            if (id.split(\"_\")[0] === building)\n               if (!this.data[id].isEmpty) array.push(this.data[id].profile)\n         } else if (!this.data[id].isEmpty) array.push(this.data[id].profile)\n      });\n\n      return array\n   }\n\n   parseId = (id) => {\n      if (!this.data) this.get()\n\n      var idParts = id.split(\"_\")\n\n      if (id) {\n         if (idParts.length)\n            return {\n               building: idParts[0],\n               floor: parseInt(idParts[1]),\n               door: parseInt(idParts[2])\n            }\n         else return\n      }\n   }\n\n   updateUser = (id, item, data) => {\n      if (id && data) {\n         if (Array.isArray(data))\n            firebase.database().ref(id + '/' + item).set(data, (error) => {\n               return new Promise((resolve, reject) => {\n                  if (error) reject(error);\n                  resolve(this.refreshCache(id))\n               })\n            })\n         else\n            firebase.database().ref(id + '/' + item).once('value').then(snapshot => {\n               if (snapshot.val())\n                  firebase.database().ref(id + '/' + item).update(data, (error) => {\n                     return new Promise((resolve, reject) => {\n                        if (error) reject(error);\n                        resolve(this.refreshCache(id))\n                     })\n                  })\n               else\n                  firebase.database().ref(id + '/' + item).set(data, (error) => {\n                     return new Promise((resolve, reject) => {\n                        if (error) reject(error);\n                        resolve(this.refreshCache(id))\n                     })\n                  })\n            })\n      }\n   }\n\n   getExpectedRent = (person, month) => {\n      let expectedRent = []\n\t  let increaserentby=0\n      for (let s = moment(person.startdate); s.isSameOrBefore(moment().add(1, \"M\")); s.add(1, \"M\").startOf('month')) {\n        if (s.isAfter(moment())) break;\n\t\tif (person.renewals)\n\t\t \tincreaserentby = person.renewals.slice(-1)[0].increase\n\t\telse increaserentby=0\n        let year = Math.floor(expectedRent.length / 11)\n        let expectedSubTotal = {\n            housing: Math.floor(person.base_rent * Math.pow(1+(increaserentby/100), year)),\n            others: 0\n        }\n        if (person.invoices) expectedSubTotal.others += this.getInvoiceSum(person, s.month() - 1)\n        let lessForMonth = 0\n        // if (person.less) lessForMonth = person.less.find((l) => { return l.month === s.month() + 1 })\n        if (lessForMonth)\n            expectedSubTotal.housing -= lessForMonth.amount\n        if (expectedRent.length + 1 === month) return expectedSubTotal\n        expectedRent.push(expectedSubTotal)\n      }\n      return expectedRent\n   }\n\n   getDues = (person, returnStatusOnly, getAllItems, month) => {\n      let expectedRent = this.getExpectedRent(person)\n\n      let paidRent = [{ housing: 0, others: 0 }]\n      if (person.payment_history) paidRent = [...person.payment_history]\n\n      let dueTotal = { housing: 0, others: 0 }\n      // console.log([person.profile.name,person.payment_history,expectedRent.length]);\n\n      while (paidRent.length !== expectedRent.length) paidRent.push({ housing: 0, others: 0 })\n\n      let returnValue = { housing: 0, others: 0 }\n      paidRent.forEach((p, i) => {\n         let due_i = {\n            housing: expectedRent[i].housing - p.housing,\n            others: expectedRent[i].others - p.others\n         }\n         dueTotal.housing += due_i.housing\n         dueTotal.others += due_i.others\n\n         if (i === month) returnValue = due_i\n      });\n\n      if (month) dueTotal = returnValue\n      if (returnStatusOnly) {\n         if (getAllItems)\n            return (dueTotal.housing === 0 && dueTotal.others === 0) ? true : false\n         else\n            return (dueTotal.housing === 0) ? true : false\n      }\n      else\n         return (getAllItems) ? dueTotal : dueTotal.housing\n   }\n\n   getPaidRent = (person, month) => {\n      let expectedRent = this.getExpectedRent(person)\n\n      let paidRent = [{ housing: 0, others: 0 }]\n      if (person.payment_history) paidRent = [...person.payment_history]\n\n      while (paidRent.length !== expectedRent.length) paidRent.push({ housing: 0, others: 0 })\n\n      return month ? paidRent[month] || { housing: 0, others: 0 } : paidRent\n   }\n\n   getLess = (person, getSum) => {\n      var sum = 0, less = []\n      this.getExpectedRent(person).forEach((e, i) => {\n         let dueForMonth = this.getDues(person, false, true, i + 1)\n         less.push({\n            month: i + 1,\n            amount: dueForMonth.housing + dueForMonth.others,\n            reason: `Rent ${dueForMonth.others > 0 ? '& Utilities ' : ''} - ${moment(person.startdate).add(i + 1, \"M\").format(\"MMM YY\")}`\n         })\n         sum += dueForMonth.housing + dueForMonth.others\n      })\n      return getSum ? sum : less\n   }\n\n   addUser = (id, data) => {\n      if (!this.data) this.get()\n      if (!this.data[id]) return false\n      else {\n         firebase.database().ref('/' + id).set(data, (error) => {\n            return new Promise((resolve, reject) => {\n               if (error) reject(error);\n               resolve(this.refreshCache(id))\n            })\n         })\n      }\n   }\n\n   getNickname = (profile) => {\n      if (!profile) return 'undefined'\n      return profile.nickname ? profile.nickname : profile.name.split(' ')[0]\n   }\n\n   deleteUser = (id, data) => {\n      if (!Object.keys(this.data).find(id))\n         return true\n      else {\n         firebase.database().ref(id).remove().catch((e) => {\n            console.log(e);\n            return false\n         });\n      }\n   }\n\n   addPay = (person, month, payment) => {\n      let paidRent = person.payment_history || []\n      if (month > paidRent.length)\n         paidRent.push(payment)\n      else paidRent[month - 1] = payment\n      return this.updateUser(person.id, \"payment_history\", paidRent)\n   }\n\n   getNextRenewal = (person) => {\n      let r = person.renewals\n\t  let date,increase\n\t  return (r !== undefined && r.length > 0) ? { date: moment(r.slice(-1)[0].date).add(11, \"M\") ,increase: r.slice(-1)[0].increase} : {  date : moment(person.startdate, \"YYYY-MM-DD\", true).add(11, \"M\"), increase : 0 }\n\t  //return (date===true)?{(r !== undefined && r.length > 0) ?  moment(r[r.length - 1]).add(11, \"M\") :  moment(person.startdate, \"YYYY-MM-DD\", true).add(11, \"M\")}:{(r !== undefined && r.length > 0) ? r.slice(-1)[0].incre:0}\n  }\n\n   getBuildings = () => {\n      if (!this.data) this.get()\n      let array = []\n      Object.keys(this.data).forEach((id, i) => {\n         array.push(this.parseId(id).building)\n      });\n      return [...new Set(array)]\n   }\n\n   getFloors = (building) => {\n      if (!this.data) this.get()\n      let array = []\n      Object.keys(this.data).forEach((id, i) => {\n         if (this.parseId(id).building === building)\n            array.push(this.parseId(id).floor)\n      });\n      return [...new Set(array)].reverse()\n   }\n\n   getDoors = (building, floor) => {\n      if (!this.data) this.get()\n      let array = []\n      Object.keys(this.data).forEach((id, i) => {\n         if (this.parseId(id).building === building && this.parseId(id).floor === parseInt(floor))\n            array.push(this.parseId(id).door)\n      });\n      return [...new Set(array)]\n   }\n\n   generateInvoiceId = (person) => {\n      let idParts = this.parseId(person.id)\n      let id = `I-${idParts.building.padStart(2, '0')}${idParts.floor}${idParts.door}-${person.profile.mobile.slice(-4)}-${moment().format(\"YYYYMMDD\")}-`\n\n      if (person.invoices) {\n         let invoices = person.invoices.filter(i => i.date === moment().format(\"YYYY-MM-DD\"))\n         let index = 0, indexString = ''\n         do {\n            indexString = (++index).toString().padStart(2, '0')\n            // eslint-disable-next-line no-loop-func\n         } while (invoices.find(i => i.id === id + indexString))\n         return id + indexString\n      }\n\n      return id + '01'\n   }\n\n   addInvoice = (person, invoice) => {\n      let invoices = person.invoices || []\n      invoices.push(invoice)\n      return this.updateUser(person.id, \"invoices\", invoices)\n   }\n\n   getInvoiceSum = (person, month) => {\n      let invoices = person.invoices || []\n      let sum = 0\n\n      invoices.forEach(invoice => {\n         if (month) {\n            if (month === moment(invoice.billing_end, \"YYYY-MM\").month() + 1)\n               sum += invoice.sum || 0\n         }\n         else sum += invoice.sum || 0\n      })\n      return sum\n   }\n}\n\nexport default DB;\n","import React, { Fragment } from 'react';\nimport Navbar from 'react-bootstrap/Navbar'\nimport './Main.css'\nimport './Components.css'\n\nexport const CircleCondition = props => (\n\t<div className='circle-container' style={props.style} onClick={props.onClick}>\n\t\t<div className={props.small ? \"circle-sm\" : \"circle\"} style={props.condition ? { backgroundColor: props.color[0] } : { backgroundColor: props.color[1] }}>\n\t\t\t<center><b className=\"fas\">{props.condition ? props.icon[0] : props.icon[1]}</b></center>\n\t\t</div>\n\t\t{props.title ? <p style={props.titleStyle || {}}>{props.title}</p> : null}\n\t</div>\n)\n\nexport const Circle = props => (\n\t<div className='circle-container' style={props.style} onClick={props.onClick}>\n\t\t<div className={props.small ? \"circle-sm\" : \"circle\"} style={{ backgroundColor: props.invert ? 'white' : props.color || 'darkgrey' }}>\n\t\t\t<center><b className=\"fas\" style={{ color: !props.invert ? 'white' : props.color }}>{props.icon}</b></center>\n\t\t</div>\n\t\t<br />\n\t\t{props.title ? <p style={props.titleStyle || {}}>{props.title}</p> : null}\n\t</div>\n)\n\nexport const VerticalTimeline = props => (\n\t<div style={{ overflow: \"scroll\", height: '100%' }}>\n\t\t<div className=\"vertical-timeline\" content={'\\uf067'} style={{ height: `${17 * props.content.length}%` }}>\n\t\t\t{\n\t\t\t\tprops.content.map((item, i) => (\n\t\t\t\t\t<div key={i} className=\"vertical-timeline-container\">\n\t\t\t\t\t\t<div className=\"content\">\n\t\t\t\t\t\t\t<h5>{item.title}</h5>\n\t\t\t\t\t\t\t<div style={{ marginBottom: '5%' }}>{item.subtitle}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t))\n\t\t\t}\n\t\t</div>\n\t</div>\n)\n\nexport const HorizontalTimeline = props => (\n\t<div className=\"horizontal-timeline\" >\n\t\t{\n\t\t\tprops.content.map((item, i) => (\n\t\t\t\t<div key={i} className=\"horizontal-timeline-container\" onClick={item.onClick} style={{ cursor: item.onClick ? 'pointer' : 'default' }}>\n\t\t\t\t\t<div className=\"content\">\n\t\t\t\t\t\t<h5>{item.title}</h5>\n\t\t\t\t\t\t<p>{item.subtitle}</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t))\n\t\t}\n\t</div>\n)\n\nexport const HorizontalTimelineConditional = props => (\n\t<div className=\"horizontal-timeline\" content={'\\uf067'} >\n\t\t{\n\t\t\tprops.content.map((item, i) => (\n\t\t\t\t<div key={i} className=\"horizontal-timeline-container\">\n\t\t\t\t\t<div className=\"content\" >\n\t\t\t\t\t\t<h5>{item.title}</h5>\n\t\t\t\t\t\t<p>{item.subtitle}</p>\n\t\t\t\t\t\t<CircleCondition small\n\t\t\t\t\t\t\tcolor={props.color}\n\t\t\t\t\t\t\ticon={props.icon}\n\t\t\t\t\t\t\tstyle={{ position: 'relative', top: -70, zIndex: 1 }}\n\t\t\t\t\t\t\tcondition={props.conditionArray[i]} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t))\n\t\t}\n\t</div>\n)\nexport const VerticalTimelineConditional = props => (\n\t<div style={{ overflow: \"scroll\", height: '100%' }}>\n\t\t<div className=\"vertical-timeline\" content={'\\uf067'} style={{ height: `${17 * props.content.length}%` }}>\n\t\t\t{\n\t\t\t\tprops.content.map((item, i) => (\n\t\t\t\t\t<div key={i} className=\"vertical-timeline-container\">\n\t\t\t\t\t\t<div className=\"content\" style={{ color: 'white', width: '130%' }}>\n\t\t\t\t\t\t\t<h5>{item.title}</h5>\n\t\t\t\t\t\t\t<div style={{ marginBottom: '5%' }}>{item.subtitle}</div>\n\t\t\t\t\t\t\t<CircleCondition small\n\t\t\t\t\t\t\t\tcolor={props.color}\n\t\t\t\t\t\t\t\ticon={props.icon}\n\t\t\t\t\t\t\t\tstyle={{ position: 'absolute', top: -78, zIndex: 1, marginLeft: '88%' }}\n\t\t\t\t\t\t\t\tcondition={props.conditionArray[i - 1] || false} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t))\n\t\t\t}\n\t\t</div>\n\t</div>\n)\n\nexport const HeadCountBox = props => (\n\t<Fragment>\n\t\t<div className=\"headCountContainer\" style={props.style} onClick={props.bgClick}>{props.children}</div>\n\t</Fragment>\n)\n\nexport const SlidingOverlay = props => (\n\t<Fragment>\n\t\t<div className=\"overlay\" onClick={props.bgClick} style={{ opacity: (props.visible === true ? 1 : 0), display: (props.visible === true ? 'block' : 'none') }}></div>\n\t\t<div className=\"sliding-overlay-container\" style={{ bottom: `${-props.height + (props.height * (props.visible === true ? 1 : 0))}%`, height: `${props.height}%` }}>\n\t\t\t{props.children}\n\t\t</div>\n\t</Fragment>\n)\n\nexport const Overlay = props => (\n\t<Fragment>\n\t\t<div className=\"overlay\" onClick={props.bgClick} style={{ opacity: (props.visible === true ? 1 : 0), display: (props.visible === true ? 'block' : 'none') }}></div>\n\t\t<center>\n\t\t\t<div className=\"overlay-container\" style={{ display: (props.visible === true ? 'block' : 'none'), height: `${props.height}%`, top: `${(100 - props.height) / 2}%` }}>\n\t\t\t\t{props.children}\n\t\t\t</div>\n\t\t</center>\n\t</Fragment>\n)\n\nexport const Header = props => (\n\t<Fragment>\n\t\t<Navbar bg=\"primary\" variant=\"dark\" fixed=\"top\">\n\t\t\t<Navbar.Brand className=\"mx-auto\" style={{display:'inline-flex'}} onClick={props.onClick}><img src=\"favicon/icon-transparent.png\" height={26} width={26} alt=\"logo\" style={{margin:'2% 5% 0 -5%'}}/><h3><b>Rent Tracker</b></h3></Navbar.Brand>\n\t\t</Navbar>\n\t\t<br /><br /><br /><br />\n\t</Fragment>\n)","import React from 'react';\nimport { Document, Page, Text, View, StyleSheet } from '@react-pdf/renderer';\nimport moment from 'moment';\nimport DB from './DB';\n\nvar db = new DB()\n\nvar a = ['','One ','Two ','Three ','Four ', 'Five ','Six ','Seven ','Eight ','Nine ','Ten ','Eleven ','Twelve ','Thirteen ','Fourteen ','Fifteen ','Sixteen ','Seventeen ','Eighteen ','Nineteen '];\nvar b = ['', '', 'Twenty','Thirty','Forty','Fifty', 'Sixty','Seventy','Eighty','Ninety'];\n\nconst inWords = (num) => {\n    if ((num = num.toString()).length > 9) return 'overflow';\n    let n = ('000000000' + num).substr(-9).match(/^(\\d{2})(\\d{2})(\\d{2})(\\d{1})(\\d{2})$/);\n    if (!n) return; var str = '';\n    str += (Number(n[3]) !== 0) ? (a[Number(n[3])] || b[n[3][0]] + ' ' + a[n[3][1]]) + 'Thousand ' : '';\n    str += (Number(n[4]) !== 0) ? (a[Number(n[4])] || b[n[4][0]] + ' ' + a[n[4][1]]) + 'Hundred ' : '';\n    str += (Number(n[5]) !== 0) ? ((str !== '') ? 'and ' : '') + (a[Number(n[5])] || b[n[5][0]] + ' ' + a[n[5][1]]) + 'only. ' : '';\n    return str;\n}\n\nconst styles = StyleSheet.create({\n    page: { padding: '5%' },\n    small: { color: 'darkgrey', fontSize: 10 },\n    id: { position: 'absolute', top: '3%', right: '4%' },\n    h1: { fontSize: 30, fontWeight: 'bold' },\n    table: { display: \"table\", width: \"auto\", borderStyle: \"solid\", borderWidth: 1, borderRightWidth: 0, borderBottomWidth: 0 },\n    tr: { margin: \"auto\", flexDirection: \"row\" },\n    tcol: { width: \"20%\", borderStyle: \"solid\", borderWidth: 1, borderLeftWidth: 0, borderTopWidth: 0 },\n    tcell: { margin: \"auto\", marginTop: 5, fontSize: 10 },\n    total: { fontSize:14, fontWeight: 'bold', textAlign:'right'},\n    footer: { textAlign:'center', fontSize:8 },\n    sign: { fontSize:10, width:'100%',flexDirection: 'row' }\n});\n\nexport function Invoice(props) {\n    if(!props.invoice || !props.person) return null\n    let invoice = props.invoice\n    let person = props.person\n    let idParts = db.parseId(person.id)\n    let address = idParts.building === \"86\" ? \"BTM 4th Stage, 2nd Block,\\nVijaya Bank Layout\" : \"Vinayaka Nagar,\\nNyanapanhalli\"\n\n    let proDataMultiplier = invoice.prodata.isProdata ? invoice.prodata.days/invoice.prodata.maxDays : 1\n    let sum = Math.round(invoice.sum*proDataMultiplier,0)\n\n    const getQty = (item) => {\n        let qty = 1\n        if(item.isPerHead) qty *= invoice.head_count\n        if(item.isPerMonth) qty *= invoice.months\n        return qty\n    }\n\n    return (\n            <Document>\n                <Page size=\"A4\" style={styles.page}>\n                    <Text style={[styles.small, styles.id]}>{invoice.id}</Text>\n                    <Text style={styles.h1}>{invoice.type.charAt(0).toUpperCase() + invoice.type.slice(1)} Invoice{'\\n'}</Text>\n                    <Text style={styles.small}>{moment(invoice.date).format(\"Do MMMM, YYYY\")}</Text>\n                    <View style={styles.small}>\n                        <Text>{`\\n\\n${person.profile.name}\\n${idParts.floor === 0 ? 'G' : idParts.floor}0${idParts.door}, #${idParts.building},\\n${address}, Bengaluru - 560076\\n\\n\\n`}</Text>\n                        <Text>{`Billing Period: ${moment(invoice.billing_start,\"YYYY-MM\").format(\"MMMM, YYYY\")} to ${moment(invoice.billing_end,\"YYYY-MM\").format(\"MMMM, YYYY\")}\\nNo of. heads: ${invoice.head_count}\\n\\n\\n`}</Text>\n                    </View>\n                    <View style={styles.table}>\n                        <View style={styles.tr}>\n                            <View style={[styles.tcol,{width:'5%'}]}>\n                                <Text style={styles.tcell}>Sl.</Text>\n                            </View>\n                            <View style={[styles.tcol,{width:'70%'}]}>\n                                <Text style={[styles.tcell,{justifyContent:'flex-start'}]}>Particulars</Text>\n                            </View>\n                            <View style={[styles.tcol,{width:'10%'}]}>\n                                <Text style={styles.tcell}>Unit Price (INR)</Text>\n                            </View>\n                            <View style={[styles.tcol,{width:'5%'}]}>\n                                <Text style={styles.tcell}>Qty</Text>\n                            </View>\n                            <View style={[styles.tcol,{width:'10%'}]}>\n                                <Text style={styles.tcell}>Net Price (INR)</Text>\n                            </View>\n                        </View>\n                        {\n                            invoice.particulars.map((item, i) =>\n                                <View style={styles.tr} key={i}>\n                                    <View style={[styles.tcol,{width:'5%'}]}>\n                                        <Text style={styles.tcell}>{i+1}</Text>\n                                    </View>\n                                    <View style={[styles.tcol,{width:'70%',justifyContent:'flex-start'}]}>\n                                        <Text style={styles.tcell}>\n                                            {item.item} {item.isPerMonth? ` ( x ${invoice.months} months)` : ''} {item.isPerHead ? ` ( x ${invoice.head_count} heads)` : ''}\n                                            {invoice.prodata.isProdata ? `\\n(Calculated as per prodata basis for ${invoice.prodata.days} days: price*(${invoice.prodata.days}/${invoice.prodata.maxDays}))` : ''}\n                                        </Text>\n                                    </View>\n                                    <View style={[styles.tcol,{width:'10%'}]}>\n                                        <Text style={styles.tcell}>{item.amount}/-</Text>\n                                    </View>\n                                    <View style={[styles.tcol,{width:'5%'}]}>\n                                        <Text style={styles.tcell}>{getQty(item)}</Text>\n                                    </View>\n                                    <View style={[styles.tcol,{width:'10%'}]}>\n                                        <Text style={styles.tcell}>{Math.round(item.amount*getQty(item)*proDataMultiplier,0)}/-</Text>\n                                    </View>\n                                </View>\n                            )\n                        }\n                    </View>\n                    <Text style={styles.total}>{'\\n\\n'}Net Payable: INR. {sum}/-</Text>\n                    <Text style={[styles.total,{fontSize:10,position:'relative',top:'-1%'}]}>{'\\n'}In Words: Rupees {inWords(sum)}</Text>\n                    <View>\n                    <Text style={[styles.small,styles.footer]}>{'\\n\\n\\n\\n\\n\\n'}This is a computer generated invoice and does not require signature while being shared electronically.</Text>\n                    </View>\n                </Page>\n            </Document>\n    )\n}\n\nexport function Adjustment(props) {\n    if(!props.person) return null\n\n    let person = props.person\n\n    let start = props.start\n    let end = props.end\n\n    let type = props.type\n\n    let less = props.less\n    let lessTotal = props.lessTotal\n    let sum = person.advance - lessTotal\n    let rent = db.getExpectedRent(person,person.payment_history ? person.payment_history.length : 1).housing\n\n    let idParts = db.parseId(person.id)\n    let address = idParts.building === \"86\" ? \"BTM 4th Stage, 2nd Block,\\nVijaya Bank Layout\" : \"Vinayaka Nagar,\\nNyanapanhalli\"\n\n    const finalRent = () => {\n        return Math.round(rent * moment(end).date()/moment(end).daysInMonth(),0)\n    }\n\n    if(type === 'settlement') {\n        less.forEach(l => {\n            if(l.reason.includes(moment().format(\"MMM YY\")))\n                sum += rent\n        })\n        sum -= finalRent() + rent\n    }\n\n    return (\n            <Document>\n                <Page size=\"A4\" style={styles.page}>\n                    <Text style={styles.h1}>{type.charAt(0).toUpperCase() + type.slice(1)} Invoice{'\\n'}</Text>\n                    <Text style={styles.small}>{moment().format(\"Do MMMM, YYYY\")}</Text>\n                    <View style={styles.small}>\n                        <Text>{`\\n\\n${person.profile.name}\\n${idParts.floor === 0 ? 'G' : idParts.floor}0${idParts.door}, #${idParts.building},\\n${address}, Bengaluru - 560076\\n\\n\\n`}</Text>\n                        <Text>{`${type.charAt(0).toUpperCase() + type.slice(1)} Period: ${type === 'adjustment' ? start : moment(person.startdate).format(\"Do MMMM, YYYY\")} to ${type === 'adjustment' ? end : moment(end).format(\"Do MMMM, YYYY\")}\\n\\n\\n`}</Text>\n                    </View>\n                    <View style={styles.table}>\n                        <View style={styles.tr}>\n                            <View style={[styles.tcol,{width:'5%'}]}>\n                                <Text style={styles.tcell}>Sl.</Text>\n                            </View>\n                            <View style={[styles.tcol,{width:'65%'}]}>\n                                <Text style={[styles.tcell,{justifyContent:'flex-start'}]}>Particulars</Text>\n                            </View>\n                            <View style={[styles.tcol,{width:'15%'}]}>\n                                <Text style={styles.tcell}>Credit (INR)</Text>\n                            </View>\n                            <View style={[styles.tcol,{width:'15%'}]}>\n                                <Text style={styles.tcell}>Debit (INR)</Text>\n                            </View>\n                        </View>\n                        <View style={styles.tr}>\n                            <View style={[styles.tcol,{width:'5%'}]}>\n                                <Text style={styles.tcell}>1</Text>\n                            </View>\n                            <View style={[styles.tcol,{width:'65%',justifyContent:'flex-start'}]}>\n                                <Text style={styles.tcell}>Security Deposit</Text>\n                            </View>\n                            <View style={[styles.tcol,{width:'15%'}]}>\n                                <Text style={styles.tcell}>{person.advance}/-</Text>\n                            </View>\n                            <View style={[styles.tcol,{width:'15%'}]}>\n                                <Text style={styles.tcell}></Text>\n                            </View>\n                        </View>\n                        {\n                            less.filter(l => l.amount!==0 && !l.reason.includes(moment().format(\"MMM YY\"))).map((item, i) =>\n                                <View style={styles.tr} key={i}>\n                                    <View style={[styles.tcol,{width:'5%'}]}>\n                                        <Text style={styles.tcell}>{i+2}</Text>\n                                    </View>\n                                    <View style={[styles.tcol,{width:'65%',justifyContent:'flex-start'}]}>\n                                        <Text style={styles.tcell}>Less: {item.reason}</Text>\n                                    </View>\n                                    <View style={[styles.tcol,{width:'15%'}]}>\n                                        <Text style={styles.tcell}></Text>\n                                    </View>\n                                    <View style={[styles.tcol,{width:'15%'}]}>\n                                        <Text style={styles.tcell}>{item.amount}/-</Text>\n                                    </View>\n                                </View>\n                            )\n                        }\n                        {\n                            type === 'settlement' &&\n                                <View style={styles.tr}>\n                                    <View style={[styles.tcol,{width:'5%'}]}>\n                                        <Text style={styles.tcell}>{less.filter(l => l.amount!==0).length+2}</Text>\n                                    </View>\n                                    <View style={[styles.tcol,{width:'65%',justifyContent:'flex-start'}]}>\n                                        <Text style={styles.tcell}>Less: Rent for {moment(end).format('MMM YYYY')}{'\\n'}(Calculated as per prodata basis for {moment(end).date()} days: x {moment(end).date()}/{moment(end).daysInMonth()})</Text>\n                                    </View>\n                                    <View style={[styles.tcol,{width:'15%'}]}>\n                                        <Text style={styles.tcell}></Text>\n                                    </View>\n                                    <View style={[styles.tcol,{width:'15%'}]}>\n                                        <Text style={styles.tcell}>{finalRent()}/-</Text>\n                                    </View>\n                                </View>\n                        }\n                        {\n                            type === 'settlement' &&\n                                <View style={styles.tr}>\n                                    <View style={[styles.tcol,{width:'5%'}]}>\n                                        <Text style={styles.tcell}>{less.filter(l => l.amount!==0).length+3}</Text>\n                                    </View>\n                                    <View style={[styles.tcol,{width:'65%',justifyContent:'flex-start'}]}>\n                                        <Text style={styles.tcell}>Less: Painting (One month rent)</Text>\n                                    </View>\n                                    <View style={[styles.tcol,{width:'15%'}]}>\n                                        <Text style={styles.tcell}></Text>\n                                    </View>\n                                    <View style={[styles.tcol,{width:'15%'}]}>\n                                        <Text style={styles.tcell}>{rent}/-</Text>\n                                    </View>\n                                </View>\n                        }\n                    </View>\n                    <Text style={styles.total}>{'\\n\\n'}Net {sum >= 0 ? 'Receivable' : 'Payable'}: INR. {sum >= 0 ? sum : -sum}/-</Text>\n                    <Text style={[styles.total,{fontSize:10,position:'relative',top:'-1%'}]}>{'\\n'}In Words: Rupees {inWords(sum >= 0 ? sum : -sum)}</Text>\n                    {\n                        type === 'settlement' &&\n                        <View><Text>{'\\n\\n\\n'}</Text>\n                        <View style={[styles.sign]}>\n                            <Text style={{width:'50%', flexGrow: 1, textAlign:'left', paddingLeft:'5%'}}>R. Maqsood</Text>\n                            <Text style={{width:'50%', flexGrow: 1, textAlign:'right', float:'right', paddingRight:'8%'}}>{person.profile.name}</Text>\n                        </View>\n                        </View>\n                    }\n                    \n                    <View>\n                    {type !== 'settlement' && <Text style={[styles.small,styles.footer]}>{'\\n\\n\\n\\n\\n\\n'}This is a computer generated invoice and does not require signature while being shared electronically.</Text>}\n                    </View>\n                </Page>\n            </Document>\n    )\n}\n\n// export default Invoice","import DB from './DB';\nimport React, { Fragment, useState, useEffect } from 'react';\nimport './Main.css'\nimport moment from 'moment';\nimport { Redirect } from 'react-router';\nimport { Circle, CircleCondition, Overlay, SlidingOverlay, Header } from './Components'\nimport ProgressBar from 'react-bootstrap/ProgressBar'\nimport { useForm } from 'react-hook-form'\nimport { PDFDownloadLink } from '@react-pdf/renderer'\nimport { Adjustment } from './Invoice'\n\nvar db = new DB()\n\nfunction Main(props) {\n\tconst [redirect, setRedirect] = useState();\n\tconst [redirectProps, setRedirectProps] = useState();\n\tconst [tennantOverlay, setTennantOverlay] = useState(false);\n\tconst [selectedTennant, setSelectedTennant] = useState();\n\tconst [ebOverlay, setEBOverlay] = useState(false);\n\tconst { register, getValues, handleSubmit } = useForm();\n\tconst [editOtherAmount, setEditOtherAmount] = useState(0);\n\tconst [vacateOverlay, setVacateOverlay] = useState(false);\n\n\tconst [invoiceProps, setInvoiceProps] = useState();\n\tconst [settleDownloadOverlay, setSettleDownloadOverlay] = useState(false);\n\n\tuseEffect(() => {\n\t\tdb.refreshCache()\n\t}, [])\n\n\tconst generateRenewalsList = () => {\n\t\tlet array = []\n\t\tif (db.data)\n\t\t\tdb.persons().map((person, i) => (\n\t\t\t\tdb.getNextRenewal(person).date.isBetween(moment().subtract(1, \"M\"), moment().add(7, \"M\"), \"M\") ?\n\t\t\t\t\tarray.push({\n\t\t\t\t\t\ti: i,\n\t\t\t\t\t\tname: person.profile.name,\n\t\t\t\t\t\tdate: db.getNextRenewal(person).date.format(\"Do MMMM, YYYY\"),\n\t\t\t\t\t\tincrease:db.getNextRenewal(person).increase\n\t\t\t\t\t})\n\t\t\t\t\t: null\n\t\t\t))\n\t\treturn array\n\t}\n\n\tconst getNextPayment = (person) => {\n\t\tlet month = moment().diff(moment(person.startdate).startOf('month'), 'months') + 1\n\t\tif (person.payment_history !== undefined) {\n\t\t\treturn {\n\t\t\t\ti: month - 1,\n\t\t\t\tmonth: moment().subtract(month - person.payment_history.length - 1, \"M\").startOf('month'),\n\t\t\t\tamount: db.getExpectedRent(person, month)\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\treturn {\n\t\t\t\ti: 0,\n\t\t\t\tmonth: moment(person.startdate),\n\t\t\t\tamount: db.getExpectedRent(person, 1)\n\t\t\t}\n\t}\n\n\tconst getTotalCollection = () => {\n\t\tvar sumRent = 0, sumExpectedRent = 0\n\t\tdb.persons().forEach((person) => {\n\t\t\tlet month = getNextPayment(person)\n\t\t\tlet paid = db.getPaidRent(person, month.i).housing || 0\n\t\t\tsumRent += paid\n\t\t\tsumExpectedRent += paid === 0 ? db.getExpectedRent(person, month.i + 1).housing : paid\n\t\t});\n\t\treturn { current: sumRent, total: sumExpectedRent, percent: (sumRent / sumExpectedRent) * 100 }\n\t}\n\n\tvar totalCollection = getTotalCollection()\n\n\tconst resetEBOverlay = () => {\n\t\tsetEBOverlay(false)\n\t\tsetEditOtherAmount(0)\n\t}\n\n\tif (redirect) return <Redirect push to={{ pathname: redirect, state: redirectProps }} />\n\treturn (\n\t\t<div>\n\t\t\t<Header />\n\t\t\t<center>\n\t\t\t\t<h4><b className=\"fas\">{\"\\uf662\"}</b>&nbsp;&nbsp;{moment().format(\"MMMM\")}</h4>\n\t\t\t\t<div className=\"container\" >\n\t\t\t\t\t{\n\t\t\t\t\t\tdb.data && db.getBuildings().reverse().map((building, b) => (\n\t\t\t\t\t\t\t<Fragment key={b}>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tdb.persons(building).filter(p => !p.isEmpty).map((person, i) => (\n\t\t\t\t\t\t\t\t\t\t<Fragment key={b + i}>\n\t\t\t\t\t\t\t\t\t\t\t<CircleCondition title={db.getNickname(person.profile)} condition={getNextPayment(person).month.isAfter(moment())} onClick={() => { setRedirectProps(person); setRedirect('/details'); }} color={['#07ab0a', 'darkgrey']} icon={['\\uf00c', '\\uf00d']} />\n\t\t\t\t\t\t\t\t\t\t\t<br style={i % 3 === 2 ? { display: 'block' } : { display: 'none' }} />\n\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t{b !== db.getBuildings().length - 1 ? <hr style={{ marginTop: \"-1%\", marginBottom: \"6%\" }} /> : null}\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</center>\n\t\t\t<br />\n\t\t\t<center>\n\t\t\t\t<h4><b className=\"fas\">{\"\\uf4c0\"}</b>&nbsp;&nbsp;Collected</h4>\n\t\t\t</center>\n\t\t\t<div className=\"container\">\n\t\t\t\t<center>\n\t\t\t\t\t<br />\n\t\t\t\t\t<h2><b className=\"fas\" style={{ fontSize: 26 }}>{\"\\uf156\"}</b>&nbsp;&nbsp;{totalCollection.current}</h2>\n\t\t\t\t\t<ProgressBar now={totalCollection.percent} style={{ borderRadius: '25px', margin: '5% 0', width: '95%' }} />\n\t\t\t\t\t<small style={{ display: 'inline-block', width: '40%', color: 'darkgrey' }}>out of {totalCollection.total}</small>\n\t\t\t\t</center>\n\t\t\t\t<br />\n\t\t\t</div>\n\t\t\t<br />\n\t\t\t<center>\n\t\t\t\t<h4><b className=\"fas\">{\"\\uf1da\"}</b>&nbsp;&nbsp;Upcoming Renewals</h4>\n\t\t\t</center>\n\t\t\t<div className=\"container\">\n\t\t\t\t{\n\t\t\t\t\tdb.data && generateRenewalsList().map((person, i) => (\n\t\t\t\t\t\t<Fragment key={i}>\n\t\t\t\t\t\t\t<div style={{ display: 'inline-flex', width: '100%', marginLeft: '2%', cursor: 'pointer' }}>\n\t\t\t\t\t\t\t\t<div style={{ display: 'inline-block', width: '20%', marginRight: '8%' }}>\n\t\t\t\t\t\t\t\t\t<Circle color=\"#5e09b8\" icon={\"\\uf007\"} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div style={{ display: 'inline-block', width: '80%', marginTop: '1.5%' }}>\n\t\t\t\t\t\t\t\t\t<b>{person.name}</b><br />\n\t\t\t\t\t\t\t\t\t{person.date}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{i !== generateRenewalsList().length - 1 ? <hr style={{ marginTop: \"-3%\" }} /> : null}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t))\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t<br />\n\t\t\t<center>\n\t\t\t\t<h4><b className=\"fas\">{\"\\uf0c0\"}</b>&nbsp;&nbsp;Tennants</h4>\n\t\t\t</center>\n\t\t\t<div className=\"container\">\n\t\t\t\t{\n\t\t\t\t\tdb.data && db.getBuildings().reverse().map((building, b) => (\n\t\t\t\t\t\t<Fragment key={b}>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdb.getFloors(building).map((floor, f) => (\n\t\t\t\t\t\t\t\t\t<Fragment key={f}>\n\t\t\t\t\t\t\t\t\t\t<div className=\"floor-label-container\">\n\t\t\t\t\t\t\t\t\t\t\t<center><b className=\"floor-label\">{floor === 0 ? 'G' : floor}</b></center>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"floor\">\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tdb.getDoors(building, floor).map((door, d) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t!db.data[`${building}_${floor}_${door}`].isEmpty ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div key={d} onClick={() => { setSelectedTennant({ building, floor, door }); setTennantOverlay(true) }} style={{ width: `${100 / db.getDoors(building, floor).length}%`, backgroundColor: `hsl(${48 - (f + d) * 2}, ${(((f + d + 1) / db.getDoors(building, floor).length) * 80) + 15}%, ${(((f + d) / db.getDoors(building, floor).length) * 13) + 74}%)` }} className=\"door\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<center><b className=\"door-label\"><b className=\"fas\">{\"\\uf52a\"}</b></b><p className=\"door-subtitle\">{db.getNickname(db.data[`${building}_${floor}_${door}`].profile)}</p></center>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div> :\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div key={d} onClick={() => { setRedirectProps(`${building}_${floor}_${door}`);setRedirect('/add-person'); }} style={{ width: `${100 / db.getDoors(building, floor).length}%`, backgroundColor: 'lightgrey' }} className=\"door\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<center><b className=\"door-label\" style={{color:'#777'}}><b className=\"fas\">{\"\\uf52a\"}</b></b><p className=\"door-subtitle\" style={{color:'#777'}}>Empty</p></center>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{b !== db.getBuildings().length - 1 ? <hr /> : null}\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t))\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t<br /><br />\n\t\t\t{selectedTennant &&\n\t\t\t\t<Overlay visible={tennantOverlay} bgClick={() => setTennantOverlay(!tennantOverlay)} height={25}>\n\t\t\t\t\t<h3><b>{db.data[`${selectedTennant.building}_${selectedTennant.floor}_${selectedTennant.door}`].profile.name}</b></h3>\n\t\t\t\t\t{`${selectedTennant.floor === 0 ? 'G' : selectedTennant.floor}0${selectedTennant.door}, #${selectedTennant.building}`}<br />\n\t\t\t\t\t{'Since ' + moment(db.data[`${selectedTennant.building}_${selectedTennant.floor}_${selectedTennant.door}`].startdate).format(\"Do MMM, YYYY\")}<br />\n\t\t\t\t\t<button className=\"overlay-button-mx\" style={{ marginTop: '5%', backgroundColor: '#ED0034' }} onClick={() => setVacateOverlay(true)}>Vacate</button>\n\t\t\t\t</Overlay>\n\t\t\t}\n\n\t\t\t<center>\n\t\t\t\t<h4><b className=\"fas\">{\"\\uf543\"}</b>&nbsp;&nbsp;Invoices</h4>\n\t\t\t</center>\n\t\t\t<div className=\"container\">\n\t\t\t\t<center>\n\t\t\t\t\t<button className=\"overlay-button-mx\" style={{ marginTop: '5%', backgroundColor: '#006CFF' }} onClick={() => setEBOverlay(true)}>Create New</button>\n\t\t\t\t\t<br /><br />\n\t\t\t\t</center>\n\t\t\t</div>\n\t\t\t<SlidingOverlay visible={ebOverlay} bgClick={() => resetEBOverlay()} height={48}>\n\t\t\t\t<b className=\"fas\" style={{ fontSize: 22, float: 'right' }} onClick={() => resetEBOverlay()}>{\"\\uf00d\"}</b>\n\t\t\t\t<br />\n\t\t\t\t<form onSubmit={handleSubmit((d) => {setRedirectProps(d); setRedirect('/generate-invoice')})}>\n\t\t\t\t<center>\n\t\t\t\t\t<div style={{ display: 'inline-block', width: '420%', transition: '.2s ease', marginLeft: `${-2 - (editOtherAmount * 104)}%`, position: 'relative', zIndex: 10 }}>\n\t\t\t\t\t\t<div style={{ display: 'inline-block', width: '20%' }}>\n\t\t\t\t\t\t\t<h3><b>Electricity</b></h3>\n\t\t\t\t\t\t\t<p style={{ marginTop: '-2%' }}>Stairs & Pump</p>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<b className=\"fas\" style={{ fontSize: 30, display: 'inline-block' }}>{\"\\uf156\"}</b>\n\t\t\t\t\t\t\t<input name=\"eb\" style={{ display: 'inline-block' }} type='number' pattern=\"[0-9]*\" defaultValue={850} ref={register} className=\"editable-label-input\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{ display: 'inline-block', marginLeft: '5%', width: '20%' }}>\n\t\t\t\t\t\t\t<h3 style={{marginBottom:'-1%'}}><b>Other Charges</b></h3>\n\t\t\t\t\t\t\t<input name=\"other1-title\" style={{ display: 'inline-block', fontSize:16, fontWeight:'normal' }} defaultValue=\"Other Expense 1\" ref={register} className=\"editable-label-input\" />\n\t\t\t\t\t\t\t<br /><br/><br/>\n\t\t\t\t\t\t\t<b className=\"fas\" style={{ fontSize: 30, display: 'inline-block' }}>{\"\\uf156\"}</b>\n\t\t\t\t\t\t\t<input name=\"other1-amount\" style={{ display: 'inline-block' }} type='number' pattern=\"[0-9]*\" defaultValue={0} ref={register} className=\"editable-label-input\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{ display: 'inline-block', marginLeft: '5%', width: '20%' }}>\n\t\t\t\t\t\t\t<h3 style={{marginBottom:'-1%'}}><b>Other Charges</b></h3>\n\t\t\t\t\t\t\t<input name=\"other2-title\" style={{ display: 'inline-block', fontSize:16, fontWeight:'normal' }} defaultValue=\"Other Expense 2\" ref={register} className=\"editable-label-input\" />\n\t\t\t\t\t\t\t<br /><br/><br/>\n\t\t\t\t\t\t\t<b className=\"fas\" style={{ fontSize: 30, display: 'inline-block' }}>{\"\\uf156\"}</b>\n\t\t\t\t\t\t\t<input name=\"other2-amount\" style={{ display: 'inline-block' }} type='number' pattern=\"[0-9]*\" defaultValue={0} ref={register} className=\"editable-label-input\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{ display: 'inline-block', marginLeft: '5%', width: '20%' }}>\n\t\t\t\t\t\t\t<h3 style={{marginBottom:'-1%'}}><b>Other Charges</b></h3>\n\t\t\t\t\t\t\t<input name=\"other3-title\" style={{ display: 'inline-block', fontSize:16, fontWeight:'normal' }} defaultValue=\"Other Expense 3\" ref={register} className=\"editable-label-input\" />\n\t\t\t\t\t\t\t<br /><br/><br/>\n\t\t\t\t\t\t\t<b className=\"fas\" style={{ fontSize: 30, display: 'inline-block' }}>{\"\\uf156\"}</b>\n\t\t\t\t\t\t\t<input name=\"other3-amount\" style={{ display: 'inline-block' }} type='number' pattern=\"[0-9]*\" defaultValue={0} ref={register} className=\"editable-label-input\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</center>\n\t\t\t\t<b className=\"fas\" onClick={() => setEditOtherAmount(editOtherAmount === 3 ? 0 : editOtherAmount + 1)} style={{ fontSize: 22, float: 'right', marginRight: '5%', marginTop: '-15%', position: 'relative', zIndex: 15 }}>{\"\\uf1b2\"}</b>\n\t\t\t\t<br />\n\t\t\t\t<center>\n\t\t\t\t\t<button className=\"overlay-button\" style={{ marginTop: '5%', color: '#006CFF' }} type=\"submit\">Next</button>\n\t\t\t\t</center>\n\t\t\t\t</form>\n\t\t\t</SlidingOverlay>\n\t\t\t{\n\t\t\t\t// Vacate Overlay\n\t\t\t}\n\t\t\t<Overlay visible={vacateOverlay} bgClick={() => setVacateOverlay(!vacateOverlay)} height={25}>\n\t\t\t\t<h3><b>Vacating Date</b></h3>\n\t\t\t\t<input name=\"vacate-date\" className=\"editable-label-input\" type=\"date\" style={{backgroundColor:'white',color:'black',fontSize:16}} defaultValue={moment().endOf('month').format(\"YYYY-MM-DD\")} ref={register}/>\n\t\t\t\t{ !settleDownloadOverlay ?\n\t\t\t\t<button className=\"overlay-button-mx\" style={{ marginTop: '5%', backgroundColor: '#00A4BC' }} onClick={() => { setInvoiceProps({person:db.data[`${selectedTennant.building}_${selectedTennant.floor}_${selectedTennant.door}`],end:getValues('vacate-date'), type: 'settlement', less: db.getLess(db.data[`${selectedTennant.building}_${selectedTennant.floor}_${selectedTennant.door}`]), lessTotal: db.getLess(db.data[`${selectedTennant.building}_${selectedTennant.floor}_${selectedTennant.door}`],true)}); setSettleDownloadOverlay(true)}}>Settle</button>\n\t\t\t\t: <PDFDownloadLink document={<Adjustment {...invoiceProps} />} fileName={`${db.data[`${selectedTennant.building}_${selectedTennant.floor}_${selectedTennant.door}`].profile.name} Settlement.pdf`} style={{textDecoration: 'none',color:'black'}}>\n                        {({ blob, url, loading, error }) => (loading ? <Fragment></Fragment> :\n\t\t\t\t\t\t\t<button className=\"overlay-button-mx\" style={{ marginTop: '5%', backgroundColor: '#00A4BC' }}>Settlement</button>\n                        )}\n\t\t\t\t</PDFDownloadLink>\n\t\t\t\t}\n\t\t\t\t<button className=\"overlay-button-mx\" style={{ marginTop: '5%', backgroundColor: '#ED0034' }} onClick={() => {db.updateUser(`${selectedTennant.building}_${selectedTennant.floor}_${selectedTennant.door}`,'',{isEmpty:true}); db.refreshCache(); setRedirect('/')}}>Vacate</button>\n\t\t\t</Overlay>\n\t\t\t<br /><br />\n\t\t</div>\n\t)\n}\n\nexport default Main;\n","import React, { Fragment, useState } from 'react';\nimport DB from './DB';\nimport moment from 'moment';\nimport { useForm } from 'react-hook-form'\nimport { Circle, Header, HorizontalTimeline,VerticalTimelineConditional,VerticalTimeline, HorizontalTimelineConditional,SlidingOverlay, Overlay } from './Components'\nimport { PDFDownloadLink } from '@react-pdf/renderer'\nimport { Invoice, Adjustment } from './Invoice'\n\nvar db = new DB()\n\nfunction Details(props) {\n\tconst [showAddPayOverlay,setShowAddPayOverlay] = useState(false);\n\tconst [showHistoryOverlay,setShowHistoryOverlay] = useState(false);\n\tconst [showAdvanceOverlay,setShowAdvanceOverlay] = useState(false);\n\tconst [editOtherAmount,setEditOtherAmount] = useState(false);\n\tconst [showMonthPicker,setShowMonthPicker] = useState(false);\n\tconst [adjustmentOverlay,setAdjustmentOverlay] = useState(false);\n\tconst [availableMonths,setAvailableMonths] = useState([]);\n\tconst { register, getValues, setValue } = useForm();\n\tconst [invoiceProps, setInvoiceProps] = useState();\n\tconst [invoiceOverlay, setInvoiceOverlay] = useState(false);\n\n\tconst person = props.location.state\n\tconst idParts = db.parseId(person.id)\n\n\tconst getNextPayment = () => {\n\t\tif(person.payment_history!==undefined) {\n\t\t\treturn {\n\t\t\t\ti: person.payment_history.length,\n\t\t\t\tmonth: moment(person.startdate).add(person.payment_history.length,\"M\").startOf('month'),\n\t\t\t\tamount: db.getExpectedRent(person,person.payment_history.length)\n\t\t\t}\n\t\t}\n\t\telse return {\n\t\t\ti: 0,\n\t\t\tmonth: moment(person.startdate),\n\t\t\tamount: db.getExpectedRent(person,1)\n\t\t}\n\t}\n\n\tconst resetAddPayOverlay = () => {\n\t\tsetShowAddPayOverlay(false)\n\t\tsetEditOtherAmount(false)\n\t}\n\n\tvar nextPayment = getNextPayment()\n\tconst [selectedMonth,setSelectedMonth] = useState(nextPayment);\n\n\tconst getAvailableMonths = () => {\n\t\tsetAvailableMonths(db.getExpectedRent(person))\n\t\tsetShowMonthPicker(!showMonthPicker)\n\t}\n\n\tconst paidRent = db.getPaidRent(person)\n\n\tconst less = db.getLess(person), lessTotal =  db.getLess(person,true)\n\n\n\treturn (\n\t\t<div>\n\t\t\t<Header />\n\t\t\t{\n\t\t\t\t// Profile Header\n\t\t\t}\n\t\t\t<div style={{ display: 'inline-flex', width: '95%', marginLeft: '2%', cursor: 'pointer' }}>\n\t\t\t\t<div style={{ display: 'inline-block', width: '20%', marginRight: '8%' }}>\n\t\t\t\t\t<Circle color=\"#5e09b8\" icon={\"\\uf007\"} style={{ marginLeft: '50%' }} />\n\t\t\t\t</div>\n\t\t\t\t<div style={{ display: 'inline-block', width: '80%', marginTop: '1%', marginLeft: '5%' }}>\n\t\t\t\t\t<h3 style={{marginBottom:'-2%'}}>{person.profile.name}</h3>\n\t\t\t\t\t<small style={{ display: 'inline-block', width: '40%', color:'darkgrey' }}>{`${idParts.floor === 0 ? 'G' : idParts.floor}0${idParts.door}, #${idParts.building}`}</small><br/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{\n\t\t\t\t// Start Date Container\n\t\t\t}\n\t\t\t<div className='container'>\n\t\t\t\t<div style={{ display: 'inline-flex', width: '100%' }}>\n\t\t\t\t\t<b className=\"fas\" style={{ display: 'inline-block', width: '10%', margin: '-1% 1% 2% 3%', fontSize: '40px', color:'#f03050' }}>{\"\\uf073\"}</b>\n\t\t\t\t\t<div style={{marginLeft:'5%'}}><small style={{ display: 'inline-block', width: '40%', color:'darkgrey' }}>Since</small>\n\t\t\t\t\t<h4 style={{marginTop:'-1%'}}><b>{moment(person.startdate).format(\"Do MMMM, YYYY\")}</b></h4></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<br />\n\t\t\t{\n\t\t\t\t// Payment History Container\n\t\t\t}\n\t\t\t<center>\n\t\t\t\t<h4><b className=\"fas\">{\"\\uf1da\"}</b>&nbsp;&nbsp;Rent History</h4>\n\t\t\t</center>\n\t\t\t<div className=\"container\" onClick={() => setShowHistoryOverlay(true)}>\n\t\t\t{ person.payment_history!==undefined ?\n\t\t\t\t<HorizontalTimelineConditional\n\t\t\t\t\tcontent={\n\t\t\t\t\t\tpaidRent.map((p, i) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttitle: moment(person.startdate).add(i, \"M\").format(\"MMM\"),\n\t\t\t\t\t\t\t\tsubtitle: p.housing\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).slice(-3)\n\t\t\t\t\t}\n\t\t\t\t\tconditionArray={ paidRent.map(p => p.housing!==0).slice(-3) }\n\t\t\t\t\tcolor={['#07ab0a', 'darkgrey']}\n\t\t\t\t\ticon={['\\uf00c', '\\uf00d']}\n\t\t\t\t/>:null\n\t\t\t}\n\t\t\t</div>\n\t\t\t{\n\t\t\t\t// Payment History Overlay\n\t\t\t}\n\t\t\t<SlidingOverlay visible={showHistoryOverlay} height={85} bgClick={() =>setShowHistoryOverlay(false)} >\n\t\t\t\t<b className=\"fas\" style={{fontSize: 20,float:'right'}} onClick={() => setShowHistoryOverlay(showHistoryOverlay ? false : true)}>{\"\\uf00d\"}</b>\n\t\t\t\t<br/>\n\t\t\t\t{ person.payment_history!==undefined?\n\t\t\t\t\t<VerticalTimelineConditional\n\t\t\t\t\t\tcontent={\n\t\t\t\t\t\t\tpaidRent.map((p, i) => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\ttitle: moment(person.startdate).add(i, \"M\").format(\"MMM YY\"),\n\t\t\t\t\t\t\t\t\tsubtitle: <div><b className=\"fas\">{\"\\uf015\"}</b> {p.housing}&nbsp;&nbsp;&nbsp;&nbsp;<b className=\"fas\">{\"\\uf1b2\"}</b> {p.others}</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconditionArray={ paidRent.map(p => p.housing!==0) }\n\t\t\t\t\t\tcolor={['#07ab0a', 'darkgrey']}\n\t\t\t\t\t\ticon={['\\uf00c', '\\uf00d']}\n\t\t\t\t\t/>:null\n\t\t\t\t}\n\t\t\t</SlidingOverlay>\n\t\t\t<br />\n\t\t\t{\n\t\t\t\t// Less Advance Container\n\t\t\t}\n\t\t\t<center>\n\t\t\t\t<h4><b className=\"fas\">{\"\\uf3d1\"}</b>&nbsp;&nbsp;Returnable Advance</h4>\n\t\t\t</center>\n\t\t\t<div className=\"container\"  onClick={() => setShowAdvanceOverlay(true)}>\n\t\t\t\t<br/>\n\t\t\t\t<center>\n\t\t\t\t\t<h2><b className=\"fas\" style={{ fontSize: 26 }}>{\"\\uf156\"}</b><b>&nbsp;{person.advance-lessTotal}</b></h2>\n\t\t\t\t</center>\n\t\t\t\t<br/>\n\t\t\t\t\t<div style={{ color: 'darkgrey', fontSize: 14 }}>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tless.filter(l => l.amount!==0).map((item, i) => (\n\t\t\t\t\t\t\t\t<Fragment key={i}>\n\t\t\t\t\t\t\t\t\t<b className=\"fas\" style={{marginRight:'3%'}}>{\"\\uf06a\"}</b>{item.reason}<br/>\n\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t)).slice(-2).reverse()\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<button className=\"btn btn-link\" style={{margin:'-2% 0 0 -4%'}} onClick={() => setShowAdvanceOverlay(true)}><small>{less.filter(l => l.amount!==0).length} more..</small></button>\n\t\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<br />\n\t\t\t{\n\t\t\t\t// Less Advance Overlay\n\t\t\t}\n\t\t\t<SlidingOverlay visible={showAdvanceOverlay} height={85} bgClick={() =>setShowAdvanceOverlay(false)} >\n\t\t\t\t<b className=\"fas\" style={{fontSize: 20,float:'right'}} onClick={() => setShowAdvanceOverlay(showAdvanceOverlay ? false : true)}>{\"\\uf00d\"}</b>\n\t\t\t\t<br/>\n\t\t\t\t<VerticalTimeline\n\t\t\t\t\tcontent={ less.filter(l => l.amount!==0).map((item) => {return {title:item.reason, subtitle:-item.amount}}) }\n\t\t\t\t/>\n\t\t\t</SlidingOverlay>\n\t\t\t{\n\t\t\t\t// Renewals Container\n\t\t\t}\n\t\t\t<center>\n\t\t\t\t<h4><b className=\"fas\">{\"\\uf251\"}</b>&nbsp;&nbsp;Renewals</h4>\n\t\t\t</center>\n\t\t\t<div className=\"container\">\n\t\t\t\t<HorizontalTimeline content={[...person.renewals||[], db.getNextRenewal(person)].map((r) => { return { title: moment(r.date).format(\"MMM\"), subtitle: moment(r.date).format(\"YYYY\") } })} />\n\t\t\t<center>\n\t\t\t<button className=\"btn btn-link\" onClick={() => setAdjustmentOverlay(true)}>Adjust Advance</button>\n\t\t\t</center>\n\t\t\t</div>\n\t\t\t<br />\n\t\t\t{\n\t\t\t\t// Invoices Container\n\t\t\t}\n\t\t\t<center>\n\t\t\t\t<h4><b className=\"fas\">{\"\\uf543\"}</b>&nbsp;&nbsp;Invoices</h4>\n\t\t\t</center>\n\t\t\t<div className=\"container\">\n\t\t\t{ person.invoices!==undefined ?\n\t\t\t\t<HorizontalTimeline\n\t\t\t\t\tcontent={\n\t\t\t\t\t\tperson.invoices.map((invoice, i) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttitle: moment(invoice.billing_end,\"YYYY-MM\").format(\"MMM\"),\n\t\t\t\t\t\t\t\tsubtitle: invoice.sum,\n\t\t\t\t\t\t\t\tonClick: () => {setInvoiceProps({person: person, invoice: invoice}); setInvoiceOverlay(true)}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).slice(-3)\n\t\t\t\t\t}\n\t\t\t\t/>:null\n\t\t\t}\n\t\t\t</div>\n\t\t\t<br /><br />\n\t\t\t{\n\t\t\t\t// Add Pay Floating Button\n\t\t\t}\n\t\t\t<Circle color=\"#006CFF\" icon={\"\\uf067\"} style={{ position: 'fixed', bottom: '1%', right: '2%' }} onClick={() => setShowAddPayOverlay(true)}/>\n\t\t\t{\n\t\t\t\t// Add Pay Overlay\n\t\t\t}\n\t\t\t<SlidingOverlay visible={showAddPayOverlay} bgClick={() => resetAddPayOverlay()} height={48}>\n\t\t\t\t<b className=\"fas\" style={{ fontSize: 22,float:'right'}} onClick={() => resetAddPayOverlay()}>{\"\\uf00d\"}</b>\n\t\t\t\t<br/>\n\t\t\t\t<center>\n\t\t\t\t\t<h3 style={{marginLeft:'5%'}}>\n\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t{!editOtherAmount ?\n\t\t\t\t\t\t\t\t<span onClick={() => getAvailableMonths()}>{`Rent ${selectedMonth.month.format(\"MMMM\")}`}</span>\n\t\t\t\t\t\t\t\t: \"Utilities\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</b>\n\t\t\t\t\t</h3>\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\t<div style={{display:'inline-block', width:'210%', transition:'.2s ease', marginLeft: !editOtherAmount ? '4%' : '-115%', position:'relative', zIndex:10}}>\n\t\t\t\t\t\t<div style={{display:'inline-block', width:'45%'}}>\n\t\t\t\t\t\t\t<b className=\"fas\" style={{ fontSize: 30,display:'inline-block' }}>{\"\\uf156\"}</b>\n\t\t\t\t\t\t\t<input name=\"housing-payment\" style={{display:'inline-block'}} type='number' pattern=\"[0-9]*\" defaultValue={selectedMonth.amount.housing} ref={register} className=\"editable-label-input\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style={{display:'inline-block', marginLeft:'10%', width:'45%'}}>\n\t\t\t\t\t\t\t<b className=\"fas\" style={{ fontSize: 30,display:'inline-block' }}>{\"\\uf156\"}</b>\n\t\t\t\t\t\t\t<input name=\"other-payment\" style={{display:'inline-block'}} type='number' pattern=\"[0-9]*\" defaultValue={selectedMonth.amount.others} ref={register} className=\"editable-label-input\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</center>\n\t\t\t\t<b className=\"fas\" onClick={() => setEditOtherAmount(!editOtherAmount)} style={{ fontSize: 22, float:'right', marginRight:'5%', marginTop:'-15%', position:'relative', zIndex:15}}>{\"\\uf1b2\"}</b>\n\t\t\t\t<br/><br/>\n\t\t\t\t<center><button className=\"overlay-button\" onClick={() => {db.addPay(person,selectedMonth.i+1,{housing:parseInt(getValues(\"housing-payment\")), others:parseInt(getValues(\"other-payment\"))}); resetAddPayOverlay()}} style={{color:'#006CFF'}}>Save</button></center>\n\t\t\t</SlidingOverlay>\n\t\t\t{\n\t\t\t\t// Date Picker Overlay\n\t\t\t}\n\t\t\t<Overlay visible={showMonthPicker} bgClick={() => setShowMonthPicker(!showMonthPicker)} height={40}>\n\t\t\t\t<div style={{display:'inline-block', width: '100%', overflow:'scroll'}}>\n\t\t\t\t{\tavailableMonths.length > 0 &&\n\t\t\t\t\tavailableMonths.map((a,ai) => (\n\t\t\t\t\t\t<Fragment key={ai}>\n\t\t\t\t\t\t\t{ moment(person.startdate).add(ai,\"M\").startOf('month').isSame(selectedMonth.month,'month') ?\n\t\t\t\t\t\t\t\t<button className=\"overlay-button-mx\" key={ai} style={{margin:'2% 1%'}}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetSelectedMonth({i: ai,month: moment(person.startdate).add(ai,\"M\").startOf('month'), amount:a});\n\t\t\t\t\t\t\t\t\t\tsetValue(\"housing-payment\", selectedMonth.amount.housing);\n\t\t\t\t\t\t\t\t\t\tsetValue(\"other-payment\", selectedMonth.amount.others);\n\t\t\t\t\t\t\t\t\t\tsetShowMonthPicker(false);\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t{moment(person.startdate).add(ai,\"M\").format(\"MMM YY\")}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<span className=\"overlay-button-mx-light\" key={ai}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetSelectedMonth({i: ai,month: moment(person.startdate).add(ai,\"M\").startOf('month'), amount:a});\n\t\t\t\t\t\t\t\t\t\tsetValue(\"housing-payment\", selectedMonth.amount.housing);\n\t\t\t\t\t\t\t\t\t\tsetValue(\"other-payment\", selectedMonth.amount.others);\n\t\t\t\t\t\t\t\t\t\tsetShowMonthPicker(false);\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t{moment(person.startdate).add(ai,\"M\").format(\"MMM YY\")}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{ ai%3===2 ? <br/> : null }\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t))\n\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</Overlay>\n\t\t\t{\n\t\t\t\t// Adjustment Overlay\n\t\t\t\t//[person.startdate,...person.renewals].map((r,ri) => (\n\t\t\t\t\t//console.log(moment(r).format(\"MMM YY\"))\n\t\t\t\t\t//console.log(ri === person.renewals.length ? moment().format(\"MMM YY\") : moment(person.renewals[ri].date).format(\"MMM YY\"))\n\t\t\t//\t))\n\t\t\t}\n\t\t\t<Overlay visible={adjustmentOverlay} bgClick={() => setAdjustmentOverlay(!adjustmentOverlay)} height={25}>\n\t\t\t\t<div style={{display:'inline-block', width: '100%', overflow:'scroll'}}>\n\t\t\t\t{\tperson.renewals ?\n\t\t\t\t\t[person.startdate,...person.renewals].map((r,ri) => (\n\t\t\t\t\t\t<Fragment key={ri}>\n\t\t\t\t\t\t\t\t<button className=\"overlay-button-mx-light\" key={ri}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tsetInvoiceProps({person: person, type:'adjustment', less:less, lessTotal:lessTotal, start: moment(r).format(\"MMMM YYYY\"), end: ri === person.renewals.length ? moment().format(\"MMMM YYYY\") : moment(person.renewals[ri].date).format(\"MMMM YYYY\")})\n\t\t\t\t\t\t\t\t\t\t\tsetInvoiceOverlay(true)\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t{moment(r).format(\"MMM YY\")} - {ri === person.renewals.length ? moment().format(\"MMM YY\") : moment(person.renewals[ri].date).format(\"MMM YY\")}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t)) : <button className=\"overlay-button-mx-light\" style={{margin:'2% 1%'}}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetInvoiceProps({person: person, type:'adjustment', less:less, lessTotal:lessTotal, start: moment(person.startdate).format(\"MMMM YYYY\"), end: moment().format(\"MMMM YYYY\")})\n\t\t\t\t\t\t\t\tsetInvoiceOverlay(true)\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{moment(person.startdate).format(\"MMM YY\")} - {moment().format(\"MMM YY\")}\n\t\t\t\t\t\t</button>\n\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</Overlay>\n\t\t\t{\n\t\t\t\t// Invoice Overlay\n\t\t\t}\n\t\t\t{ invoiceOverlay &&\n\t\t\t\t<Overlay visible={invoiceOverlay} bgClick={() => setInvoiceOverlay(!invoiceOverlay)} height={25}>\n\t\t\t\t\t<div style={{display:'inline-block', width: '100%', overflow:'scroll'}}>\n\t\t\t\t\t<h3><b>{invoiceProps.type === 'adjustment' ? 'Adjustment Invoice' : 'Utilities Invoice'}</b></h3>\n\t\t\t\t\t{invoiceProps.type === 'adjustment' ? `${invoiceProps.start} - ${invoiceProps.end}` : `${moment(invoiceProps.invoice.billing_start,\"YYYY-MM\").format(\"MMMM, YYYY\")} - ${moment(invoiceProps.invoice.billing_end,\"YYYY-MM\").format(\"MMMM, YYYY\")}`}\n\t\t\t\t\t<PDFDownloadLink document={invoiceProps.type === 'adjustment' ? <Adjustment {...invoiceProps} /> : <Invoice {...invoiceProps} />} fileName={`${person.profile.name} ${invoiceProps.type === 'adjustment' ? 'Adjustment ' : ''}${moment().format(\"YYYY-MM-DD\")}.pdf`} style={{textDecoration: 'none',color:'black'}}>\n\t\t\t\t\t\t\t{({ blob, url, loading, error }) => (loading ? <Fragment></Fragment> :\n\t\t\t\t\t\t\t\t<button className=\"overlay-button-mx\" style={{ marginTop: '5%', backgroundColor: '#00A4BC' }}>Download</button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</PDFDownloadLink>\n\t\t\t\t\t</div>\n\t\t\t\t</Overlay>\n\t\t\t}\n\t\t</div>\n\t);\n}\n\nexport default Details;\n","import React, { Fragment, useState,useEffect } from 'react';\nimport DB from './DB';\nimport moment from 'moment';\nimport { Redirect } from 'react-router';\nimport { useForm } from 'react-hook-form'\nimport { Circle, CircleCondition, Overlay, Header } from './Components';\n\nvar db = new DB()\n\nfunction GenerateInvoice(props) {\n    const { register, getValues, handleSubmit } = useForm();\n\tconst [months, setMonths] = useState(3);\n    const [formContent,setFormContent] = useState();\n    const [successOverlay,setSuccessOverlay] = useState(false);\n\tconst [redirect, setRedirect] = useState();\n\tconst [redirectProps, setRedirectProps] = useState();\n\n    const getHeads = () => {\n        let heads = 4\n        db.persons().forEach(person => {\n            heads += person.profile.head_count || 0\n        })\n        return heads\n    }\n\n    const getHouses = () => {\n        let houses = 1\n        db.persons().forEach(person => {\n            houses += !person.profile.isEmpty ? 1 : 0\n        })\n        return houses\n    }\n\n    var heads = getHeads(), houses = getHouses(), items = props.location.state\n\n    useEffect(() => {\n        var initContent = [\n            { title: 'Stairs & Pump', value: parseInt(items.eb), fieldname: 'eb', icon: '\\uf0e7', isShared: true, isPerHead: false },\n            { title: 'Water +/-', value: 0, valueTemplate: 'water', fieldname: 'water', icon: '\\ue005', isPPB: true, isPerHead: true, perPersonValue: [] },\n            { title: 'Garbage +/-', value: 60, fieldname: 'garbage', icon: '\\uf1f8' }\n        ];\n        Array.from(['1', '2', '3']).forEach(o => {\n            if (items[`other${o}-amount`] !== \"0\")\n                initContent.push({ title: items[`other${o}-title`], value: parseInt(items[`other${o}-amount`]), icon: '\\uf1b2', fieldname: `other${o}`, isShared: true, isPerHead: true })\n        })\n\n        initContent.forEach((item,i) => {\n            item.isPerMonth = false\n            if (item.isPPB) {\n                db.persons().forEach(person => {\n                    if (person[item.valueTemplate])\n                        item.perPersonValue.push({\n                            id: person.id,\n                            value: item.isPerHead ? person[item.valueTemplate] * (person.profile.head_count || 0) : person[item.valueTemplate]\n                        })\n                })\n            }\n            else if (item.isShared) item.value /= item.isPerHead ? heads : houses\n            item.value = Math.round(item.value, 0) || 0\n        })\n        setFormContent(initContent)\n    },[items,heads,houses])\n\n    const updateHS = (i) => {\n        setFormContent(f => {\n            let item = f[i]\n\n            if(item.isPerHead !== undefined) item = { ...item, isPerHead: !item.isPerHead}\n            else item = { ...item, isPerHead: true}\n            \n            if (item.isPPB || false) {\n                db.persons().forEach(person => {\n                    if (person[item.valueTemplate])\n                        item = { ...item, perPersonValue: [...item.perPersonValue, {\n                            id: person.id,\n                            value: item.isPerHead ? person[item.valueTemplate] * (person.profile.head_count || 0) : person[item.valueTemplate]\n                        }]}\n                })\n            }\n            else if (item.isShared) {\n                if (item.isPerHead)\n                    item = { ...item, value: item.value * houses/heads}\n                else item = { ...item, value: item.value * heads/houses}\n            }\n            else item = { ...item, value: 0}\n            item = { ...item, value: Math.round(item.value,0)}\n            return Array.from([...f.slice(0, i),item,...f.slice(i+1)])\n        })\n    }\n\n    const updatePerMonth = (i) => {\n        setFormContent(f => {\n            let item = f[i]\n\n            if(item.isPerMonth !== undefined) item = { ...item, isPerMonth: !item.isPerMonth}\n            else item = { ...item, isPerMonth: true}\n            \n            return Array.from([...f.slice(0, i),item,...f.slice(i+1)])\n        })\n    }\n\n    const step = (i,s) => {\n        setFormContent(f => {\n            let item = f[i]\n            if(item.isPPB || false) {\n                item = { ...item, value: item.value+s, perPersonValue: item.perPersonValue.map(v => {return {id:v.id,value:v.value+s}})}\n                return Array.from([...f.slice(0, i),item,...f.slice(i+1)])\n            } \n            else if (item.isShared) {\n                if (item.isPerHead)\n                    item = { ...item, value: item.value + s*heads}\n                else item = { ...item, value: item.value + s*houses}\n            }\n            else item = { ...item, value: item.value+s}\n            return Array.from([...f.slice(0, i),item,...f.slice(i+1)])\n        })\n    }\n\n    const generate = (d) => {\n        let generatedInvoices = []\n        db.persons().forEach(person => {\n            let personInvoice = {\n                date:moment().format(\"YYYY-MM-DD\"), \n                id: db.generateInvoiceId(person),\n                head_count: person.profile.head_count || 1,\n                type: 'utilities',\n                months: moment(d['billing-end']).diff(d['billing-start'],'months')+1,\n                billing_start: d['billing-start'],\n                billing_end: d['billing-end'],\n                sum:0,\n                particulars: []\n            }\n            formContent.forEach((f,i) => {\n                let item = {item: f.title.replace(' +/-',''), isPerHead: f.isPerHead || false, isPerMonth: f.isPerMonth}\n                if(f.isPPB) {\n                    let ppvForPerson = f.perPersonValue.find(pv => pv.id === person.id) || {value:0}\n                    item.amount = ppvForPerson.value\n                } else item.amount = f.value\n                if(item.isPerHead) item.amount /= personInvoice.head_count\n                item.amount = Math.round(item.amount,0)\n                if(item.amount > 0) {\n                    let itemSum = item.amount\n                    itemSum *= item.isPerHead ? personInvoice.head_count : 1\n                    itemSum *= item.isPerMonth ? personInvoice.months : 1\n                    personInvoice.sum += itemSum\n                    personInvoice.particulars.push(item)\n                }\n            })\n\n            let days = moment().diff(moment(person.startdate), 'days')\n            if(days<30) {\n                personInvoice.prodata = {\n                    isProdata: true,\n                    days: days,\n                    maxDays: moment(person.startdate).daysInMonth()\n                }\n            } else personInvoice.prodata = { isProdata: false }\n            //prodata for vacate\n            db.addInvoice(person, personInvoice)\n            generatedInvoices.push({person: person, invoice: personInvoice})\n        })\n        setSuccessOverlay(true)\n        setRedirectProps(generatedInvoices)\n        setTimeout(() => setRedirect('invoice-summary'),500)\n    }\n\n    if (redirect) return <Redirect push to={{ pathname: redirect, state: redirectProps }} />\n    return (\n        <div>\n            <Header />\n            {\n                // Title\n            }\n            <center>\n                <h3><b className=\"fas\">{\"\\uf543\"}</b><b>&nbsp;&nbsp;New Invoice</b></h3>\n                <input name=\"billing-start\" style={{ display: 'inline-block', fontSize:16, fontWeight:'normal', backgroundColor:'#fafafa',color:'grey' }} defaultValue={moment().subtract(3,\"M\").format(\"YYYY-MM\")} type=\"month\" ref={register} onChange={() => setMonths(moment(getValues(\"billing-end\"),\"YYYY-MM\").diff(moment(getValues(\"billing-start\"),\"YYYY-MM\"),'months')+1)} className=\"editable-label-input\" />\n                <input name=\"billing-end\" style={{ display: 'inline-block', fontSize:16, fontWeight:'normal', backgroundColor:'#fafafa',color:'grey' }} defaultValue={moment().subtract(1,\"M\").format(\"YYYY-MM\")} type=\"month\" ref={register} onChange={() => setMonths(moment(getValues(\"billing-end\")).diff(moment(getValues(\"billing-start\")),'months')+1)} className=\"editable-label-input\" />\n            </center>\n            <br />\n            {\n                // Containers\n            }\n            <form onSubmit={handleSubmit((d) => generate(d))}>\n            {\n                formContent && formContent.map((item, i) => (\n                    <Fragment key={i}>\n                        <center>\n                            <h4><b className=\"fas\">{item.icon}</b>&nbsp;&nbsp;{item.title}</h4>\n                        </center>\n                        <div className='container'>\n                            <center>\n                                <div style={{ display: 'inline-flex', width: '100%' }}>\n                                    <center>\n                                        { item.title.includes('+/-') && <Circle small icon={\"\\uf068\"} style={{ margin: '0 5%', display: 'inline-block' }} onClick={() => step(i,-10)} />}\n                                        <input name={item.fieldname} style={{ display: 'inline-block', color: 'black', backgroundColor: 'white' }} type='number' pattern=\"[0-9]*\" value={item.value} ref={register} className=\"editable-label-input\" readOnly />\n                                        { item.title.includes('+/-') && <Circle small icon={\"\\uf067\"} style={{ margin: '0 5%', display: 'inline-block' }} onClick={() => step(i,10)} />}\n                                    </center>\n                                </div>\n                                <small style={{ display: 'inline-block', width: '40%', color: 'darkgrey' }}>{item.isPerHead ? \"per head\" : (item.isShared ? \"per house\" : \"\")}</small>\n                                <br /><br />\n                                {item.isPPB &&\n                                    <div style={{ display: 'inline-block', width: '80%' }}>\n                                        {\n                                            item.perPersonValue.map((v,vi) => (\n                                                <Circle key={v.id} small color=\"#5e09b8\" icon={\"\\uf007\"} title={v.value || \"0\"} titleStyle={{ color: 'darkgrey' }} style={{ margin: '0 4%' }} />\n                                            ))\n                                        }\n                                    </div>\n                                }\n                            </center>\n                            {item.isShared &&\n                                <div style={{ display: 'inline-flex', width: '40%', margin: '0 2% 3% 0' }}>\n                                    <div style={{ display: 'inline-block', width: '20%', marginRight: '8%' }}>\n                                        <CircleCondition small condition={item.isPerHead} onClick={() => updateHS(i)} color={['#006CFF', '#c20808']} icon={['\\uf0c0', '\\ue065']} />\n                                    </div>\n                                    <div style={{ display: 'inline-block', width: '80%', marginTop: '1%' }}>\n                                        <small style={{ display: 'inline-block', color: 'darkgrey' }}>{item.isPerHead ? \"Split Per Head\" : \"Per House\"}</small><br />\n                                    </div>\n                                </div>\n                            }\n                            {months > 1 &&\n                                <div style={{ display: 'inline-flex', width: '40%', margin: '0 2% 3% 0' }}>\n                                    <div style={{ display: 'inline-block', width: '20%', marginRight: '8%' }}>\n                                        <CircleCondition small condition={item.isPerMonth} onClick={() => updatePerMonth(i)} color={['#de3ea1', '#4bbde3']} icon={['\\uf073', '\\uf133']} />\n                                    </div>\n                                    <div style={{ display: 'inline-block', width: '80%', marginTop: '1%' }}>\n                                        <small style={{ display: 'inline-block', color: 'darkgrey' }}>{item.isPerMonth ? \"Per Month\" : `For ${months} Months`}</small><br />\n                                    </div>\n                                </div>\n                            }\n                        </div>\n                        <br /><br />\n                    </Fragment>\n                ))\n            }\n            <center>\n            <button type=\"submit\" className=\"overlay-button\" style={{backgroundColor:'#006CFF', color:'white', width:'90%'}}>Create</button>\n            </center>\n            </form>\n            <br /><br />\n            <Overlay  style={{transition:'.3s ease'}} visible={successOverlay} height={25}>\n                <center><div className=\"fas\" style={{color:'#07ab0a',fontSize:90,marginTop:'5%'}}>{\"\\uf00c\"}</div></center>\n            </Overlay>\n        </div>\n    )\n}\n\nexport default GenerateInvoice;\n","import React, { Fragment, useState} from 'react';\nimport moment from 'moment';\nimport { Header } from './Components';\nimport { Redirect } from 'react-router';\nimport { PDFDownloadLink } from '@react-pdf/renderer'\nimport { Invoice } from './Invoice'\n\nfunction InvoicesSummary(props) {\n    const [redirect, setRedirect] = useState();\n\tconst [redirectProps, setRedirectProps] = useState();\n\n    let invoices = props.location.state || []\n\n    if (redirect) return <Redirect from={props.location.pathname} exact to={{ pathname: redirect, state: redirectProps }} />\n    return (\n        <div>\n            <Header />\n            {\n                // Title\n            }\n            <center>\n                <h3><b className=\"fas\">{\"\\uf543\"}</b><b>&nbsp;&nbsp;Summary</b></h3>\n                <small style={{ display: 'inline-block', color: 'darkgrey' }}>{`${moment(invoices[0].invoice.billing_start,\"YYYY-MM\").format(\"MMMM, YYYY\")} to ${moment(invoices[0].invoice.billing_end,\"YYYY-MM\").format(\"MMMM, YYYY\")}`}</small>\n            </center>\n            <br />\n            {\n                // Containers\n            }\n            {\n                invoices.map((item,i) =>\n                    <PDFDownloadLink document={<Invoice {...item} />} fileName={`${item.person.profile.name} ${moment().format(\"YYYY-MM-DD\")}.pdf`} key={i} style={{textDecoration: 'none',color:'black'}}>\n                        {({ blob, url, loading, error }) => (loading ? <Fragment></Fragment> : \n                            <div className='container' style={{cursor:'pointer'}} onClick={() => {setRedirectProps(item); setRedirect('/invoice')}}>\n                                <div style={{ display: 'inline-flex', width: '100%' }}>\n                                    <b className=\"fas\" style={{ display: 'inline-block', width: '10%', margin: '-1% 1% 2% 3%', fontSize: '40px', color:'#0e8587', textDecoration: 'none' }}>{\"\\uf570\"}</b>\n                                    <div style={{ marginLeft: '5%' }}><small style={{ display: 'inline-block', textDecoration: 'none', color:'darkgrey' }}>{item.person.profile.name}</small>\n                                        <h4 style={{ marginTop: '-1%', textDecoration: 'none', color:'black' }}><b className=\"fas\" style={{ fontSize: 20, textDecoration: 'none', color:'black' }}>{\"\\uf156\"}</b>&nbsp;<b>{item.invoice.sum}</b></h4></div>\n                                </div>\n                            </div>\n                        )}\n                    </PDFDownloadLink>\n                )\n            }\n            <br/><br />\n            <center>\n            <button className=\"overlay-button\" style={{backgroundColor:'#006CFF', color:'white', width:'90%'}} onClick={() => setRedirect('/')}>Done</button>\n            </center>\n            <br /><br />\n        </div>\n    )\n}\n\nexport default InvoicesSummary;\n","import React, { Fragment, useState } from 'react';\nimport { useForm } from \"react-hook-form\";\nimport Form from 'react-bootstrap/Form';\nimport { Overlay, Header } from './Components';\nimport { Redirect } from 'react-router';\nimport ToggleButtonGroup from 'react-bootstrap/ToggleButtonGroup'\nimport ToggleButton from 'react-bootstrap/ToggleButton'\nimport moment from 'moment';\nimport './Main.css'\nimport DB from './DB';\n\nvar db = new DB()\n\nfunction AddPerson(props) {\n\tconst { register, handleSubmit } = useForm()\n\tconst [addpersonOverlay, setaddpersonOverlay] = useState(false);\n\tconst [redirect, setRedirect] = useState();\n\tconst [headCount, setHeadCount] = useState(1);\n\n\tconst submitHandler = (d) => {\n\t\tvar data = {\n\t\t\tid: props.location.state,\n\t\t\tstartdate: d.startdate,\n\t\t\tadvance: parseInt(d.advance),\n\t\t\tbase_rent: parseInt(d.base_rent),\n\t\t\twater: parseInt(d.water),\n\t\t\tprofile:\n\t\t\t{\n\t\t\t\tname: d.name,\n\t\t\t\tnickname: d.shortname,\n\t\t\t\thead_count: headCount,\n\t\t\t\tmobile: d.mobile\n\t\t\t},\n\t\t\tpayment_history: [{ housing: parseInt(d.base_rent), others: 0 }],\n\t\t\tisEmpty: false\n\t\t}\n\n\t\tlet isValid = true\n\t\tObject.keys(d).forEach(i => {\n\t\t\tif (d[i].length < 1) isValid = false\n\t\t})\n\n\t\tif (isValid) {\n\t\t\tdb.addUser(data.id, data)\n\t\t\tsetaddpersonOverlay(true)\n\t\t\tdb.refreshCache()\n\t\t\tsetTimeout(() => setRedirect('/'), 500)\n\t\t}\n\t}\n\n\tif (redirect) return <Redirect push to={{ pathname: redirect }} />\n\treturn (\n\t\t<Fragment>\n\t\t\t<Header />\n\t\t\t<center>\n\t\t\t\t<h3><b className=\"fas\">{\"\\uf234\"}</b><b>&nbsp;&nbsp;New Tennant</b></h3>\n\t\t\t</center>\n\t\t\t<br />\n\t\t\t<Form style={{ padding: '5% 8%' }} onSubmit={handleSubmit(d => submitHandler(d))}>\n\t\t\t<center>\n\t\t\t\t<Form.Group>\n\t\t\t\t\t<div style={{ display: 'inline-flex', width: '100%' }}>\n\t\t\t\t\t\t<div className=\"input-icon fas\" style={{fontSize:24}}>{\"\\uf2c2\"}</div>\n\t\t\t\t\t\t<Form.Control type=\"text\" placeholder=\"Name\" ref={register} name='name' className=\"textfield\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Form.Group><br />\n\t\t\t\t<Form.Group>\n\t\t\t\t\t<div style={{ display: 'inline-flex', width: '100%' }}>\n\t\t\t\t\t\t<div className=\"input-icon fas\" style={{fontSize:24}}>{\"\\uf2c1\"}</div>\n\t\t\t\t\t\t<Form.Control type=\"text\" placeholder=\"Short Name\" ref={register} name='shortname' className=\"textfield\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Form.Group><br />\n\t\t\t\t<Form.Group>\n\t\t\t\t\t<div style={{ display: 'inline-flex', width: '47%' }}>\n\t\t\t\t\t\t<div className=\"input-icon fas\" style={{fontSize:24}}>{\"\\uf073\"}</div>\n\t\t\t\t\t\t<Form.Control type=\"date\" placeholder=\"Start Date\" ref={register} name='startdate' className=\"textfield\" defaultValue={moment().startOf('month').format(\"YYYY-MM-DD\")} />\n\t\t\t\t\t</div>&nbsp;&nbsp;&nbsp;&nbsp;\n\t\t\t\t\t<div style={{ display: 'inline-flex', width: '47%' }}>\n\t\t\t\t\t\t<div className=\"input-icon fas\" style={{fontSize:24}}>{\"\\uf043\"}</div>\n\t\t\t\t\t\t<Form.Control type=\"number\" placeholder=\"Water\" ref={register} name='water' className=\"textfield\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Form.Group><br />\n\t\t\t\t<Form.Group>\n\t\t\t\t\t<div style={{ display: 'inline-flex', width: '47%' }}>\n\t\t\t\t\t\t<div className=\"input-icon fas\" style={{fontSize:24}}>{\"\\uf3d1\"}</div>\n\t\t\t\t\t\t<Form.Control type=\"number\" placeholder=\"Advance\" ref={register} name='advance' className=\"textfield\" />\n\t\t\t\t\t</div>&nbsp;&nbsp;&nbsp;&nbsp;\n\t\t\t\t\t<div style={{ display: 'inline-flex', width: '47%' }}>\n\t\t\t\t\t\t<div className=\"input-icon fas\" style={{fontSize:24}}>{\"\\uf156\"}</div>\n\t\t\t\t\t\t<Form.Control type=\"number\" placeholder=\"Rent\" ref={register} name='base_rent' className=\"textfield\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Form.Group><br />\n\t\t\t\t<Form.Group>\n\t\t\t\t\t<div style={{ display: 'inline-flex', width: '100%' }}>\n\t\t\t\t\t\t<div className=\"input-icon fas\" style={{fontSize:24}}>{\"\\uf879\"}</div>\n\t\t\t\t\t\t<Form.Control type=\"number\" placeholder=\"Mobile\" ref={register} name='mobile' className=\"textfield\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Form.Group><br />\n\t\t\t\t\n\t\t\t\t\t<ToggleButtonGroup type=\"radio\" name=\"options\" defaultValue={headCount}>\n\t\t\t\t\t\t<ToggleButton variant=\"light\" name='head_count' onClick={() => setHeadCount(1)} value={1}><div className=\"fas\" style={{ fontSize: 28 }}>{\"\\uf007\"}</div></ToggleButton>\n\t\t\t\t\t\t<ToggleButton variant=\"light\" name='head_count' onClick={() => setHeadCount(2)} value={2}><div className=\"fas\" style={{ fontSize: 28 }}>{\"\\uf500\"}</div></ToggleButton>\n\t\t\t\t\t\t<ToggleButton variant=\"light\" name='head_count' onClick={() => setHeadCount(3)} value={3}><div className=\"fas\" style={{ fontSize: 28 }}>{\"\\uf0c0\"}</div></ToggleButton>\n\t\t\t\t\t</ToggleButtonGroup>\n\t\t\t\t<br /><br />\n\t\t\t\t<button className=\"overlay-button-mx\" type=\"submit\" style={{width:'100%'}}>Add Tennant</button> </center>\n\t\t\t</Form>\n\t\t\t<Overlay style={{ transition: '.3s ease' }} visible={addpersonOverlay} bgClick={() => setaddpersonOverlay(!addpersonOverlay)} height={25}>\n\t\t\t\t<center><div className=\"fas\" style={{ color: '#07ab0a', fontSize: 90, marginTop: '5%' }}>{\"\\uf00c\"}</div></center>\n\t\t\t</Overlay>\n\t\t</Fragment>\n\t)\n}\n\nexport default AddPerson;\n","import React from 'react';\nimport Main from './Main';\nimport Details from './Details';\nimport GenerateInvoice from './GenerateInvoice';\nimport InvoicesSummary from './InvoicesSummary';\nimport { Invoice, Adjustment} from './Invoice';\nimport AddPerson from './AddPerson';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\n\nfunction App() {\n   return (\n      <Router>\n         <div className=\"App\">\n            <Route exact path=\"/\" component={Main} />\n            <Route path=\"/details\" render={(props) => <Details {...props} />} />\n            <Route path=\"/add-person\" render={(props) => <AddPerson {...props} />} />\n            <Route path=\"/generate-invoice\" render={(props) => <GenerateInvoice {...props} />} />\n            <Route path=\"/invoice-summary\" render={(props) => <InvoicesSummary {...props} />} />\n            <Route path=\"/invoice\" render={(props) => <Invoice {...props} />} />\n            <Route path=\"/adjustment\" render={(props) => <Adjustment {...props} />} />\n         </div>\n      </Router>\n   );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}